<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nexus-AI åŠ¨æ‰‹å®éªŒæ‰‹å†Œ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" />
    <style>
      :root {
        color-scheme: light dark;
        --bg: #0f172a;
        --bg-secondary: #030712;
        --bg-card: rgba(15, 23, 42, 0.7);
        --panel: rgba(15, 23, 42, 0.45);
        --surface: rgba(15, 23, 42, 0.65);
        --text-primary: #f1f5f9;
        --text-secondary: rgba(226, 232, 240, 0.86);
        --muted: rgba(148, 163, 184, 0.88);
        --accent: #38bdf8;
        --accent-strong: #0ea5e9;
        --border: rgba(148, 163, 184, 0.2);
        --divider: rgba(148, 163, 184, 0.3);
        --shadow: 0 24px 48px -24px rgba(15, 23, 42, 0.6);
        --font-body: "Inter", "PingFang SC", "Source Han Sans", system-ui,
          -apple-system, BlinkMacSystemFont, sans-serif;
        --transition: all 0.3s ease;
        --glow1: rgba(56, 189, 248, 0.18);
        --glow2: rgba(59, 130, 246, 0.15);
        --glow3: rgba(236, 72, 153, 0.12);
        --blockquote-bg: rgba(56, 189, 248, 0.12);
        --btn-bg: rgba(15, 23, 42, 0.45);
        --btn-border: rgba(148, 163, 184, 0.35);
        --copy-bg: rgba(226, 232, 240, 0.08);
        --hero-base: rgba(15, 23, 42, 0.65);
        --hero-gradient: rgba(14, 165, 233, 0.16);
        --badge-bg: rgba(59, 130, 246, 0.14);
        --badge-border: rgba(59, 130, 246, 0.25);
        --badge-color: rgba(219, 234, 254, 0.95);
        --fab-bg: rgba(15, 23, 42, 0.75);
        --code-bg: rgba(15, 23, 42, 0.65);
      }

      [data-theme="light"] {
        --bg: #f8fafc;
        --bg-secondary: #dbeafe;
        --bg-card: rgba(255, 255, 255, 0.95);
        --panel: rgba(15, 23, 42, 0.04);
        --surface: rgba(255, 255, 255, 0.95);
        --text-primary: #0f172a;
        --text-secondary: rgba(30, 41, 59, 0.78);
        --muted: rgba(71, 85, 105, 0.82);
        --accent: #2563eb;
        --accent-strong: #1d4ed8;
        --border: rgba(15, 23, 42, 0.08);
        --divider: rgba(100, 116, 139, 0.38);
        --shadow: 0 18px 36px -20px rgba(30, 64, 175, 0.25);
        --glow1: rgba(96, 165, 250, 0.28);
        --glow2: rgba(129, 140, 248, 0.24);
        --glow3: rgba(244, 114, 182, 0.2);
        --blockquote-bg: rgba(59, 130, 246, 0.12);
        --btn-bg: rgba(255, 255, 255, 0.78);
        --btn-border: rgba(148, 163, 184, 0.3);
        --copy-bg: rgba(226, 232, 240, 0.6);
        --hero-base: rgba(255, 255, 255, 0.9);
        --hero-gradient: rgba(79, 70, 229, 0.12);
        --badge-bg: rgba(37, 99, 235, 0.12);
        --badge-border: rgba(37, 99, 235, 0.2);
        --badge-color: rgba(30, 41, 59, 0.88);
        --fab-bg: rgba(255, 255, 255, 0.9);
        --code-bg: rgba(15, 23, 42, 0.08);
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        font-family: var(--font-body);
        background: linear-gradient(160deg, var(--bg) 0%, var(--bg-secondary) 100%);
        color: var(--text-primary);
        scroll-behavior: smooth;
        line-height: 1.6;
        min-height: 100%;
        overflow-x: hidden;
      }

      body::before {
        content: "";
        position: fixed;
        inset: 0;
        background: radial-gradient(circle at 20% 20%, var(--glow1), transparent 42%),
          radial-gradient(circle at 80% 20%, var(--glow2), transparent 38%),
          radial-gradient(circle at 50% 80%, var(--glow3), transparent 48%);
        z-index: -2;
        opacity: 0.9;
        transition: opacity 0.6s ease;
      }

      .grid {
        display: block;
        padding: 1.5rem clamp(1rem, 2vw + 1rem, 3.5rem) 4rem;
        max-width: 1600px;
        margin: 0 auto;
      }

      .sidebar {
        position: fixed;
        top: 1.5rem;
        left: clamp(1rem, 2vw + 1rem, 3.5rem);
        width: 360px;
        max-height: calc(100vh - 3rem);
        overflow-y: auto;
        background: var(--bg-card);
        backdrop-filter: blur(18px);
        border-radius: 24px;
        border: 1px solid var(--border);
        padding: 1.75rem;
        box-shadow: var(--shadow);
        transition: var(--transition);
        transition-property: background, border, transform, opacity;
        transform: translateX(0);
        z-index: 100;
      }

      .sidebar-content {
        display: flex;
        flex-direction: column;
        gap: 1.2rem;
      }

      .sidebar h2 {
        margin: 0 0 0.5rem 0;
        font-size: 1.15rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--accent);
        font-weight: 600;
      }

      .nav {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 0.3rem;
        max-height: 600px;
        overflow: hidden;
        transition: max-height 0.45s ease, opacity 0.35s ease;
      }

      .nav a {
        text-decoration: none;
        color: var(--text-primary);
        font-size: 0.93rem;
        display: flex;
        align-items: center;
        gap: 0.6rem;
        padding: 0.6rem 0.85rem;
        border-radius: 10px;
        border: 1px solid transparent;
        transition: var(--transition);
        position: relative;
        line-height: 1.4;
      }

      .nav a::before {
        content: "â–¸";
        font-size: 0.8rem;
        color: var(--muted);
        transition: var(--transition);
      }

      .nav a:hover {
        background: var(--panel);
        border-color: var(--border);
        transform: translateX(3px);
      }

      .nav a.active {
        background: var(--panel);
        border-color: var(--accent);
        color: var(--accent);
        font-weight: 600;
      }

      .nav a.active::before {
        content: "â–¾";
        color: var(--accent);
      }

      .nav.collapsed {
        max-height: 0;
        opacity: 0;
        pointer-events: none;
      }

      .note-box {
        display: flex;
        flex-direction: column;
        gap: 0.85rem;
        padding: 1.3rem;
        border-radius: 18px;
        border: 1px solid var(--border);
        background: var(--panel);
      }

      .note-box h3 {
        margin: 0;
        font-size: 1.1rem;
        color: var(--accent);
        font-weight: 600;
      }

      .note-box textarea {
        width: 100%;
        border-radius: 14px;
        border: 1px solid var(--border);
        background: var(--surface);
        color: var(--text-primary);
        padding: 0.85rem 1rem;
        font-size: 0.95rem;
        line-height: 1.6;
        resize: vertical;
        min-height: 110px;
        transition: var(--transition);
        font-family: var(--font-body);
      }

      .note-box textarea:focus,
      .note-search:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.18);
      }

      .note-search {
        width: 100%;
        border-radius: 14px;
        border: 1px solid var(--border);
        background: var(--surface);
        color: var(--text-primary);
        padding: 0.75rem 1rem;
        font-size: 0.9rem;
        transition: var(--transition);
        font-family: var(--font-body);
      }

      .note-controls {
        display: flex;
        gap: 0.65rem;
        justify-content: space-between;
        align-items: center;
      }

      .note-add {
        flex: 1;
        padding: 0.65rem 1.1rem;
        font-size: 0.92rem;
      }

      .note-count {
        font-size: 0.85rem;
        color: var(--muted);
        padding: 0.45rem 0.85rem;
        border-radius: 999px;
        background: var(--surface);
        border: 1px solid var(--border);
        white-space: nowrap;
      }

      .note-entries {
        display: flex;
        flex-direction: column;
        gap: 0.7rem;
        max-height: 380px;
        overflow-y: auto;
        padding-right: 0.4rem;
      }

      .note-entry {
        display: flex;
        flex-direction: column;
        gap: 0.6rem;
        padding: 0.85rem 1rem;
        border-radius: 14px;
        border: 1px solid var(--border);
        background: var(--surface);
        transition: var(--transition);
      }

      .note-entry:hover {
        border-color: var(--accent);
        box-shadow: 0 2px 8px rgba(56, 189, 248, 0.15);
      }

      .note-entry-text {
        white-space: pre-wrap;
        word-break: break-word;
        color: var(--text-secondary);
        font-size: 0.92rem;
        max-height: 4.2em;
        overflow: hidden;
        position: relative;
        line-height: 1.75;
        transition: max-height 0.3s ease;
      }

      .note-entry-text.expanded {
        max-height: none;
      }

      .note-entry-text.truncated::after {
        content: '...';
        position: absolute;
        bottom: 0;
        right: 0;
        background: var(--surface);
        padding-left: 1rem;
      }

      .note-actions {
        display: flex;
        gap: 0.5rem;
        justify-content: flex-end;
      }

      .note-entry button {
        border: 1px solid var(--btn-border);
        border-radius: 0.7rem;
        background: var(--btn-bg);
        color: var(--text-primary);
        padding: 0.35rem 0.75rem;
        font-size: 0.75rem;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        cursor: pointer;
        transition: var(--transition);
      }

      .note-entry button:hover {
        border-color: var(--accent);
        background: rgba(56, 189, 248, 0.18);
      }

      .note-entry button.delete:hover {
        border-color: rgba(248, 113, 113, 0.5);
        background: rgba(248, 113, 113, 0.18);
      }

      .note-empty {
        font-size: 0.85rem;
        color: var(--muted);
        padding: 0.75rem;
        border: 1px dashed var(--border);
        border-radius: 12px;
        background: var(--surface);
        text-align: center;
      }

      .content {
        display: flex;
        flex-direction: column;
        gap: 1.8rem;
        margin-left: 390px;
      }

      section {
        background: var(--bg-card);
        backdrop-filter: blur(16px);
        border-radius: 28px;
        border: 1px solid var(--border);
        padding: clamp(1.8rem, 2vw + 1rem, 2.5rem);
        box-shadow: var(--shadow);
        position: relative;
        overflow: hidden;
        transition: var(--transition);
      }

      section::after {
        content: attr(data-section);
        position: absolute;
        top: 24px;
        right: 28px;
        font-size: 0.75rem;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        color: var(--divider);
      }

      section:hover {
        transform: translateY(-6px);
        border-color: rgba(56, 189, 248, 0.28);
        box-shadow: 0 32px 72px -40px rgba(56, 189, 248, 0.6);
      }

      h1,
      h2,
      h3,
      h4 {
        margin-top: 0;
        font-weight: 700;
        color: inherit;
        line-height: 1.3;
      }

      h1 {
        font-size: clamp(2.2rem, 2vw + 1.6rem, 3rem);
        letter-spacing: 0.04em;
        margin-bottom: 0.8rem;
      }

      h2 {
        margin-bottom: 1.2rem;
        font-size: 1.65rem;
        letter-spacing: 0.02em;
      }

      h3 {
        margin-bottom: 0.85rem;
        margin-top: 1.8rem;
        font-size: 1.25rem;
      }

      h3:first-of-type {
        margin-top: 0;
      }

      h4 {
        margin-bottom: 0.6rem;
        font-size: 1.05rem;
      }

      p {
        margin-bottom: 1.1rem;
        color: var(--text-secondary);
        line-height: 1.7;
      }

      ul,
      ol {
        margin: 0 0 1.2rem 1.5rem;
        color: var(--text-secondary);
        line-height: 1.7;
      }

      li {
        margin-bottom: 0.5rem;
      }

      li:last-child {
        margin-bottom: 0;
      }

      code {
        font-family: "JetBrains Mono", "Fira Code", SFMono-Regular, Menlo, Monaco,
          Consolas, "Liberation Mono", monospace;
        font-size: 0.9em;
        padding: 0.2em 0.4em;
        background: var(--code-bg);
        border-radius: 4px;
        border: 1px solid var(--border);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
      }

      pre {
        background: var(--code-bg) !important;
        padding: 1.3rem !important;
        border-radius: 16px !important;
        border: 1px solid var(--border) !important;
        overflow-x: auto;
        position: relative;
        margin: 1.2rem 0;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      pre code {
        background: none !important;
        padding: 0 !important;
        border-radius: 0 !important;
        border: none !important;
        font-size: 0.9rem !important;
        line-height: 1.6 !important;
        white-space: pre-wrap !important;
        word-wrap: break-word !important;
        display: block !important;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-shadow: none !important;
      }

      /* Prism theme overrides for better readability */
      [data-theme="light"] pre code[class*="language-"],
      [data-theme="light"] pre[class*="language-"] {
        color: #24292e !important;
      }

      [data-theme="light"] .token.comment,
      [data-theme="light"] .token.prolog,
      [data-theme="light"] .token.doctype,
      [data-theme="light"] .token.cdata {
        color: #6a737d !important;
      }

      [data-theme="light"] .token.punctuation {
        color: #24292e !important;
      }

      [data-theme="light"] .token.property,
      [data-theme="light"] .token.tag,
      [data-theme="light"] .token.boolean,
      [data-theme="light"] .token.number,
      [data-theme="light"] .token.constant,
      [data-theme="light"] .token.symbol,
      [data-theme="light"] .token.deleted {
        color: #005cc5 !important;
      }

      [data-theme="light"] .token.selector,
      [data-theme="light"] .token.attr-name,
      [data-theme="light"] .token.string,
      [data-theme="light"] .token.char,
      [data-theme="light"] .token.builtin,
      [data-theme="light"] .token.inserted {
        color: #032f62 !important;
      }

      [data-theme="light"] .token.operator,
      [data-theme="light"] .token.entity,
      [data-theme="light"] .token.url,
      [data-theme="light"] .language-css .token.string,
      [data-theme="light"] .style .token.string {
        color: #d73a49 !important;
      }

      [data-theme="light"] .token.atrule,
      [data-theme="light"] .token.attr-value,
      [data-theme="light"] .token.keyword {
        color: #d73a49 !important;
      }

      [data-theme="light"] .token.function,
      [data-theme="light"] .token.class-name {
        color: #6f42c1 !important;
      }

      [data-theme="dark"] pre code[class*="language-"],
      [data-theme="dark"] pre[class*="language-"] {
        color: #e6edf3 !important;
      }

      [data-theme="dark"] .token.comment,
      [data-theme="dark"] .token.prolog,
      [data-theme="dark"] .token.doctype,
      [data-theme="dark"] .token.cdata {
        color: #8b949e !important;
      }

      [data-theme="dark"] .token.punctuation {
        color: #e6edf3 !important;
      }

      [data-theme="dark"] .token.property,
      [data-theme="dark"] .token.tag,
      [data-theme="dark"] .token.boolean,
      [data-theme="dark"] .token.number,
      [data-theme="dark"] .token.constant,
      [data-theme="dark"] .token.symbol,
      [data-theme="dark"] .token.deleted {
        color: #79c0ff !important;
      }

      [data-theme="dark"] .token.selector,
      [data-theme="dark"] .token.attr-name,
      [data-theme="dark"] .token.string,
      [data-theme="dark"] .token.char,
      [data-theme="dark"] .token.builtin,
      [data-theme="dark"] .token.inserted {
        color: #a5d6ff !important;
      }

      [data-theme="dark"] .token.operator,
      [data-theme="dark"] .token.entity,
      [data-theme="dark"] .token.url,
      [data-theme="dark"] .language-css .token.string,
      [data-theme="dark"] .style .token.string {
        color: #ff7b72 !important;
      }

      [data-theme="dark"] .token.atrule,
      [data-theme="dark"] .token.attr-value,
      [data-theme="dark"] .token.keyword {
        color: #ff7b72 !important;
      }

      [data-theme="dark"] .token.function,
      [data-theme="dark"] .token.class-name {
        color: #d2a8ff !important;
      }

      [data-theme="dark"] .token.variable {
        color: #ffa657 !important;
      }

      pre button.copy {
        position: absolute;
        top: 12px;
        right: 12px;
        background: var(--copy-bg);
        border: 1px solid var(--btn-border);
        color: var(--text-primary);
        padding: 0.35rem 0.6rem;
        border-radius: 8px;
        cursor: pointer;
        transition: var(--transition);
        font-size: 0.72rem;
        letter-spacing: 0.05em;
        text-transform: uppercase;
      }

      pre button.copy:hover {
        background: rgba(56, 189, 248, 0.2);
        border-color: rgba(56, 189, 248, 0.5);
      }

      blockquote {
        margin: 1.5rem 0;
        padding: 1.2rem 1.4rem;
        border-left: 4px solid rgba(56, 189, 248, 0.5);
        border-radius: 0 14px 14px 0;
        background: var(--blockquote-bg);
        color: var(--text-secondary);
        line-height: 1.7;
      }

      blockquote p {
        margin-bottom: 0;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.45rem 0.9rem;
        border-radius: 999px;
        background: var(--badge-bg);
        border: 1px solid var(--badge-border);
        font-size: 0.8rem;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        color: var(--badge-color);
        font-weight: 500;
      }

      .timeline {
        display: grid;
        gap: 1.2rem;
        margin-top: 1.2rem;
      }

      .timeline-item {
        padding: 1.2rem 1.3rem;
        border-radius: 16px;
        border: 1px solid var(--border);
        background: var(--panel);
        transition: var(--transition);
        position: relative;
        overflow: hidden;
      }

      .timeline-item:hover {
        transform: translateY(-3px);
        border-color: rgba(56, 189, 248, 0.35);
        box-shadow: 0 8px 24px -8px rgba(56, 189, 248, 0.25);
      }

      .timeline-item::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          120deg,
          rgba(59, 130, 246, 0.12),
          transparent 65%
        );
        opacity: 0;
        transition: var(--transition);
      }

      .timeline-item:hover::before {
        opacity: 1;
      }

      .timeline-item h4 {
        margin: 0 0 0.5rem;
        font-size: 1.05rem;
      }

      .timeline-item span {
        font-size: 0.92rem;
        color: var(--muted);
        line-height: 1.6;
      }

      .timeline-item p {
        margin-bottom: 0.8rem;
      }

      .timeline-item p:last-child {
        margin-bottom: 0;
      }

      .toolbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
      }

      .toggle,
      .cta {
        border: 1px solid var(--btn-border);
        border-radius: 0.9rem;
        padding: 0.55rem 1rem;
        background: var(--btn-bg);
        color: var(--text-primary);
        cursor: pointer;
        transition: var(--transition);
        font-size: 0.9rem;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }

      .toggle:hover,
      .cta:hover {
        border-color: rgba(56, 189, 248, 0.5);
        transform: translateY(-2px);
      }

      .hero {
        padding: clamp(2.2rem, 3vw + 1rem, 3.2rem);
        border-radius: 32px;
        border: 1px solid var(--border);
        background: linear-gradient(120deg, var(--hero-gradient), transparent 60%),
          var(--hero-base);
        box-shadow: var(--shadow);
        position: relative;
        overflow: hidden;
        margin-bottom: 1.8rem;
      }

      .hero::after {
        content: "";
        position: absolute;
        inset: -20% -30% auto;
        height: 70%;
        background: radial-gradient(
          circle,
          rgba(56, 189, 248, 0.7),
          transparent 55%
        );
        opacity: 0.35;
        z-index: -1;
      }

      .hero h1 {
        margin-bottom: 1rem;
      }

      .hero p {
        font-size: 1.05rem;
        line-height: 1.75;
        margin-bottom: 1.2rem;
      }

      .progress-track {
        position: fixed;
        top: 0;
        left: 0;
        height: 4px;
        width: 100%;
        background: rgba(148, 163, 184, 0.15);
        z-index: 1000;
      }

      .progress-bar {
        height: 100%;
        width: 0;
        background: linear-gradient(90deg, #38bdf8, #818cf8);
        transition: width 0.1s ease-out;
      }

      .floating-nav {
        position: fixed;
        bottom: 32px;
        right: 32px;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        z-index: 1200;
      }

      .floating-nav button {
        border: none;
        border-radius: 50%;
        width: 52px;
        height: 52px;
        background: var(--fab-bg);
        backdrop-filter: blur(12px);
        color: var(--text-primary);
        box-shadow: 0 20px 38px -16px rgba(15, 23, 42, 0.6);
        cursor: pointer;
        transition: var(--transition);
        font-size: 1.2rem;
      }

      .floating-nav button:hover {
        transform: translateY(-4px) scale(1.02);
        background: rgba(56, 189, 248, 0.25);
      }

      .floating-nav button[aria-pressed="true"] {
        border-color: rgba(56, 189, 248, 0.6);
        box-shadow: 0 12px 28px -16px rgba(56, 189, 248, 0.45);
      }

      .chatbot-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(15, 23, 42, 0.55);
        backdrop-filter: blur(4px);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
        z-index: 1100;
      }

      .chatbot-backdrop.visible {
        opacity: 1;
        pointer-events: auto;
      }

      .chatbot-panel {
        position: fixed;
        right: 100px;
        bottom: 100px;
        width: clamp(550px, 45vw, 750px);
        max-height: clamp(650px, 80vh, 850px);
        display: flex;
        flex-direction: column;
        background: var(--bg-card);
        backdrop-filter: blur(20px);
        border: 1px solid var(--border);
        border-radius: 16px;
        box-shadow: 0 24px 48px -24px rgba(15, 23, 42, 0.85);
        transform: translateY(16px) scale(0.96);
        opacity: 0;
        pointer-events: none;
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
                    opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 1150;
        overflow: hidden;
        padding: 0;
      }

      .chatbot-panel.visible {
        transform: translateY(0) scale(1);
        opacity: 1;
        pointer-events: auto;
      }

      .chatbot-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.6rem;
        padding: 0.6rem 0.8rem;
        border-bottom: 1px solid var(--border);
        background: linear-gradient(135deg, rgba(56, 189, 248, 0.12), rgba(59, 130, 246, 0.06));
        flex-shrink: 0;
      }

      .chatbot-header h3 {
        margin: 0;
        font-size: 0.95rem;
        font-weight: 600;
        letter-spacing: 0.03em;
        display: flex;
        align-items: center;
        gap: 0.4rem;
      }

      .chatbot-header h3::before {
        content: "ğŸ¤–";
        font-size: 1.1rem;
      }

      .chatbot-close {
        border: none;
        background: rgba(148, 163, 184, 0.1);
        color: var(--text-primary);
        font-size: 1rem;
        width: 28px;
        height: 28px;
        border-radius: 6px;
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .chatbot-close:hover {
        background: rgba(248, 113, 113, 0.18);
        color: rgba(248, 113, 113, 0.95);
      }

      .chat-messages {
        flex: 1;
        padding: 0.6rem;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        overflow-y: auto;
        background: var(--surface);
        min-height: 0;
      }

      .chat-messages::-webkit-scrollbar {
        width: 5px;
      }

      .chat-messages::-webkit-scrollbar-track {
        background: transparent;
      }

      .chat-messages::-webkit-scrollbar-thumb {
        background: rgba(148, 163, 184, 0.25);
        border-radius: 3px;
      }

      .chat-messages::-webkit-scrollbar-thumb:hover {
        background: rgba(148, 163, 184, 0.4);
      }

      .chat-message {
        display: flex;
        flex-direction: column;
        max-width: 88%;
        gap: 0.25rem;
        animation: slideIn 0.25s ease;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(6px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .chat-message.user {
        align-self: flex-end;
        align-items: flex-end;
      }

      .chat-message.assistant,
      .chat-message.error {
        align-self: flex-start;
        align-items: flex-start;
      }

      .chat-bubble {
        padding: 0.75rem 0.9rem;
        border-radius: 12px;
        line-height: 1.65;
        border: 1px solid transparent;
        word-wrap: break-word;
        font-size: 0.92rem;
      }

      .chat-bubble * {
        max-width: 100%;
      }

      .chat-bubble p {
        margin: 0 0 0.5em 0;
      }

      .chat-bubble p:last-child {
        margin-bottom: 0;
      }

      .chat-bubble ul, .chat-bubble ol {
        margin: 0.5em 0;
        padding-left: 1.5em;
      }

      .chat-bubble li {
        margin: 0.25em 0;
      }

      .chat-bubble code {
        background: rgba(0, 0, 0, 0.1);
        padding: 0.15em 0.35em;
        border-radius: 3px;
        font-size: 0.85em;
      }

      .chat-bubble pre {
        background: rgba(0, 0, 0, 0.15);
        padding: 0.6em;
        border-radius: 6px;
        overflow-x: auto;
        margin: 0.5em 0;
      }

      .chat-bubble pre code {
        background: none;
        padding: 0;
      }

      .chat-bubble h1, .chat-bubble h2, .chat-bubble h3, 
      .chat-bubble h4, .chat-bubble h5, .chat-bubble h6 {
        margin: 0.5em 0 0.3em 0;
        font-weight: 600;
      }

      .chat-bubble h1 {
        font-size: 1.15em;
      }

      .chat-bubble h2 {
        font-size: 1.1em;
      }

      .chat-bubble h3 {
        font-size: 1.05em;
      }

      .chat-bubble h4,
      .chat-bubble h5,
      .chat-bubble h6 {
        font-size: 1em;
      }

      .chat-bubble blockquote {
        border-left: 3px solid rgba(56, 189, 248, 0.5);
        padding-left: 0.8em;
        margin: 0.5em 0;
        color: var(--muted);
      }

      .chat-message.user .chat-bubble {
        background: linear-gradient(135deg, rgba(14, 165, 233, 0.85), rgba(56, 189, 248, 0.8));
        color: #ffffff;
        border-color: rgba(14, 165, 233, 0.25);
        box-shadow: 0 3px 8px -3px rgba(14, 165, 233, 0.35);
      }

      .chat-message.assistant .chat-bubble {
        background: rgba(15, 23, 42, 0.55);
        border-color: rgba(56, 189, 248, 0.2);
        color: var(--text-primary);
      }

      body[data-theme="light"] .chat-message.assistant .chat-bubble {
        background: rgba(255, 255, 255, 0.85);
        border-color: rgba(59, 130, 246, 0.18);
      }

      .chat-message.error .chat-bubble {
        background: rgba(248, 113, 113, 0.15);
        border-color: rgba(248, 113, 113, 0.3);
        color: rgba(248, 113, 113, 1);
      }

      .chat-meta {
        font-size: 0.72rem;
        color: var(--muted);
        line-height: 1.3;
        padding: 0 0.2rem;
      }

      .chat-meta strong {
        color: var(--accent);
        letter-spacing: 0.03em;
        font-weight: 600;
      }

      .chat-form {
        border-top: 1px solid var(--border);
        padding: 0.6rem 0.8rem;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        background: var(--bg-card);
        flex-shrink: 0;
      }

      .chat-form textarea {
        width: 100%;
        min-height: 70px;
        max-height: 140px;
        resize: vertical;
        padding: 0.7rem 0.85rem;
        border-radius: 10px;
        border: 1px solid var(--border);
        background: var(--surface);
        color: var(--text-primary);
        font-family: var(--font-body);
        font-size: 0.88rem;
        line-height: 1.5;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
      }

      .chat-form textarea:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.15);
      }

      .chat-form button[type="submit"] {
        align-self: flex-end;
        padding: 0.6rem 1.1rem;
        border-radius: 10px;
        border: 1px solid var(--btn-border);
        background: linear-gradient(135deg, rgba(56, 189, 248, 0.18), rgba(59, 130, 246, 0.12));
        color: var(--text-primary);
        cursor: pointer;
        letter-spacing: 0.04em;
        text-transform: uppercase;
        transition: var(--transition);
        font-size: 0.82rem;
        font-weight: 600;
      }

      .chat-form button[type="submit"]:hover:not(:disabled) {
        border-color: rgba(56, 189, 248, 0.5);
        background: linear-gradient(135deg, rgba(56, 189, 248, 0.3), rgba(59, 130, 246, 0.2));
        transform: translateY(-1px);
      }

      .chat-form button[type="submit"]:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .chat-advanced-toggle {
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
        border: none;
        background: transparent;
        color: var(--text-secondary);
        cursor: pointer;
        font-size: 0.82rem;
        letter-spacing: 0.03em;
        text-transform: uppercase;
        padding: 0.3rem 0.5rem;
        border-radius: 6px;
        transition: var(--transition);
      }

      .chat-advanced-toggle:hover {
        color: var(--accent);
        background: rgba(56, 189, 248, 0.1);
      }

      .chat-advanced-fields {
        display: grid;
        gap: 0.7rem;
        grid-template-columns: 1fr;
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        transition: max-height 0.35s ease, opacity 0.35s ease;
      }

      .chat-advanced-fields.visible {
        max-height: 480px;
        opacity: 1;
      }

      .chat-advanced-fields input,
      .chat-advanced-fields textarea,
      .chat-advanced-fields select {
        width: 100%;
        border-radius: 10px;
        border: 1px solid var(--border);
        background: var(--surface);
        color: var(--text-primary);
        padding: 0.65rem 0.85rem;
        font-size: 0.88rem;
        font-family: var(--font-body);
        transition: border-color 0.2s ease;
      }

      .chat-advanced-fields input:focus,
      .chat-advanced-fields textarea:focus,
      .chat-advanced-fields select:focus {
        outline: none;
        border-color: var(--accent);
      }

      .chat-advanced-fields label {
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
        font-size: 0.82rem;
        color: var(--muted);
        letter-spacing: 0.02em;
        font-weight: 500;
      }

      .chat-status {
        font-size: 0.8rem;
        color: var(--muted);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .chat-status span {
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
      }

      .chat-status .dot {
        width: 0.5rem;
        height: 0.5rem;
        border-radius: 50%;
        background: rgba(56, 189, 248, 0.6);
        animation: pulse 2s ease infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
          opacity: 0.6;
        }
        50% {
          transform: scale(1.3);
          opacity: 1;
        }
      }

      .img-container {
        text-align: center;
        margin: 1.5rem 0;
        position: relative;
      }

      .img-wrapper {
        position: relative;
        display: inline-block;
        max-width: 100%;
        border-radius: 12px;
        overflow: hidden;
        border: 1px solid var(--border);
        transition: var(--transition);
      }

      .img-wrapper.collapsed {
        max-height: 120px;
        overflow: hidden;
      }

      .img-wrapper.collapsed::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: linear-gradient(transparent, var(--bg-card));
        pointer-events: none;
      }

      .img-wrapper img {
        max-width: 100%;
        height: auto;
        display: block;
        cursor: zoom-in;
        transition: var(--transition);
      }

      .img-wrapper.collapsed img {
        cursor: pointer;
      }

      .img-controls {
        display: flex;
        gap: 0.5rem;
        justify-content: center;
        margin-top: 0.5rem;
      }

      .img-controls button {
        border: 1px solid var(--btn-border);
        border-radius: 8px;
        background: var(--btn-bg);
        color: var(--text-primary);
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
        cursor: pointer;
        transition: var(--transition);
      }

      .img-controls button:hover {
        border-color: var(--accent);
        background: rgba(56, 189, 248, 0.18);
      }

      .img-caption {
        font-size: 0.85rem;
        color: var(--muted);
        margin-top: 0.5rem;
      }

      .lightbox {
        position: fixed;
        inset: 0;
        background: rgba(15, 23, 42, 0.95);
        backdrop-filter: blur(8px);
        z-index: 2000;
        display: none;
        align-items: center;
        justify-content: center;
        padding: 2rem;
      }

      .lightbox.active {
        display: flex;
      }

      .lightbox-content {
        position: relative;
        max-width: 95vw;
        max-height: 95vh;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .lightbox img {
        max-width: 100%;
        max-height: 85vh;
        object-fit: contain;
        border-radius: 8px;
        box-shadow: 0 24px 48px rgba(0, 0, 0, 0.5);
      }

      .lightbox-close {
        position: absolute;
        top: -40px;
        right: 0;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: white;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: var(--transition);
      }

      .lightbox-close:hover {
        background: rgba(248, 113, 113, 0.3);
      }

      .lightbox-caption {
        color: white;
        margin-top: 1rem;
        font-size: 0.9rem;
      }

      @media (max-width: 720px) {
        .chatbot-panel {
          right: 16px;
          left: 16px;
          bottom: 100px;
          width: auto;
          max-height: clamp(450px, 65vh, 600px);
        }

        .lightbox {
          padding: 1rem;
        }

        .lightbox-close {
          top: -35px;
          width: 32px;
          height: 32px;
        }
      }

      body.sidebar-hidden .content {
        margin-left: 0;
      }

      body.sidebar-hidden .sidebar {
        transform: translateX(-150%);
        opacity: 0;
        pointer-events: none;
      }

      .callout {
        border-radius: 18px;
        padding: 1.2rem 1.4rem;
        border: 1px solid rgba(14, 165, 233, 0.35);
        background: rgba(14, 165, 233, 0.12);
        margin: 1.5rem 0;
        color: var(--text-primary);
        line-height: 1.7;
      }

      .callout strong {
        display: block;
        text-transform: uppercase;
        font-size: 0.88rem;
        letter-spacing: 0.1em;
        margin-bottom: 0.5rem;
        color: var(--accent-strong);
        font-weight: 600;
      }

      .callout p {
        margin-bottom: 0.8rem;
      }

      .callout p:last-child {
        margin-bottom: 0;
      }

      .callout ul {
        margin-bottom: 0;
      }

      .alert {
        border: 1px solid rgba(248, 113, 113, 0.3);
        background: rgba(248, 113, 113, 0.12);
      }

      .badge-stack {
        display: flex;
        flex-wrap: wrap;
        gap: 0.7rem;
        margin-top: 1.2rem;
      }

      @media (max-width: 1180px) {
        .grid {
          padding: 1.5rem clamp(1rem, 5vw, 2.5rem) 4rem;
        }

        .sidebar {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          max-width: 380px;
          height: 100vh;
          max-height: 100vh;
          border-radius: 0;
          transform: translateX(-100%);
          transition: transform 0.3s ease;
        }

        body:not(.sidebar-hidden) .sidebar {
          transform: translateX(0);
        }

        .content {
          margin-left: 0;
        }

        .nav {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 720px) {
        .grid {
          padding-bottom: 3.5rem;
        }

        section {
          border-radius: 22px;
        }

        .floating-nav {
          right: 20px;
          bottom: 20px;
        }
      }
    </style>
  </head>
  <body data-theme="light">
    <div class="progress-track" aria-hidden="true">
      <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="floating-nav">
      <button id="sidebarToggle" title="éšè—/æ˜¾ç¤ºå¯¼èˆª">â˜°</button>
      <button id="themeToggle" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ“</button>
      <button id="chatbotToggle" title="æ‰“å¼€æ™ºèƒ½åŠ©æ‰‹" aria-pressed="false">ğŸ¤–</button>
      <button id="scrollTop" title="è¿”å›é¡¶éƒ¨">â†‘</button>
    </div>

    <div class="grid" id="layout">
      <aside class="sidebar">
        <div class="toolbar">
          <h2>å®éªŒå¯¼èˆª</h2>
          <button class="toggle" id="tocToggle">æŠ˜å å¯¼èˆª</button>
        </div>
        <div class="sidebar-content">
          <ul class="nav" id="toc">
            <li><a href="#env-prepare">ç¯å¢ƒå‡†å¤‡</a></li>
            <li><a href="#deploy">éƒ¨ç½² Nexus-AI</a></li>
            <li><a href="#validation">ç¯å¢ƒéªŒè¯</a></li>
            <li><a href="#feature-check">åŠŸèƒ½éªŒè¯</a></li>
            <li><a href="#agent-lab">Agent æ„å»ºä¸æµ‹è¯•</a></li>
            <li><a href="#challenge">æŒ‘æˆ˜ï¼šå¤–éƒ¨èµ„æºé›†æˆ</a></li>
          </ul>
          <div class="note-box">
            <h3>è¯¾å ‚é€Ÿè®°</h3>
            <textarea
              id="noteInput"
              placeholder="åœ¨è¿™é‡Œç²˜è´´æˆ–è¾“å…¥ä¸´æ—¶å†…å®¹ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ä¿å­˜ä¸ºä¸€æ¡è®°å½•"
              rows="3"
            ></textarea>
            <div class="note-controls">
              <button class="cta note-add" id="noteAdd" type="button">æ·»åŠ è®°å½•</button>
              <span class="note-count" id="noteCount">0 æ¡</span>
            </div>
            <input 
              type="text" 
              class="note-search" 
              id="noteSearch" 
              placeholder="æœç´¢ç¬”è®°å†…å®¹..."
            />
            <div class="note-empty" id="noteEmpty">
              æš‚æ— è®°å½•ï¼Œå…ˆæŠŠä½ çš„æƒ³æ³•è®°ä¸‹æ¥å§ã€‚
            </div>
            <div class="note-entries" id="noteList"></div>
          </div>
        </div>
      </aside>

      <main class="content">
        <header class="hero" id="top">
          <div style="display: flex; align-items: center; gap: 2rem; margin-bottom: 1.5rem;">
            <img src="/assets/default_logo.png" alt="Nexus-AI Logo" style="width: 120px; height: 120px; object-fit: contain; filter: drop-shadow(0 8px 16px rgba(56, 189, 248, 0.3));">
            <div style="flex: 1;">
              <span class="badge">Nexus-AI Workshop</span>
              <h1 style="margin-top: 0.5rem; margin-bottom: 0;">Nexus-AI åŠ¨æ‰‹å®éªŒæ‰‹å†Œ</h1>
            </div>
          </div>
          <p>
            æŒ‰ç…§æœ¬æ‰‹å†Œï¼Œæ‚¨å°†ä»é›¶å¼€å§‹åœ¨ Amazon Linux ç¯å¢ƒä¸­éƒ¨ç½² Nexus-AIï¼Œ
            å®ŒæˆåŸºç¡€éªŒè¯ã€æ„å»ºå¹¶æ‰©å±•è‡ªå®šä¹‰ Agent
          </p>
          <div class="badge-stack">
            <span class="badge">æ—¶é•¿ Â· 2ï½3 å°æ—¶</span>
            <span class="badge">è§’è‰² Â· å·¥ç¨‹å¸ˆ / äº§å“</span>
            <span class="badge">æŠ€èƒ½ Â· Linux Â· Python Â· AWS</span>
          </div>
        </header>

        <section id="env-prepare" data-section="Stage 01">
          <div class="toolbar">
            <h2>ç¯å¢ƒå‡†å¤‡</h2>
            <button class="cta" data-collapse="[data-env]">æŠ˜å å†…å®¹</button>
          </div>

          <article data-env>
            <h3>ä¸€ã€AWS èµ„æºå‡†å¤‡</h3>
            <ul>
              <li>AMIï¼š<code>Amazon Linux 2023 (kernel 6.1)</code></li>
              <li>
                å®ä¾‹è§„æ ¼ï¼š<code>m7i.large</code> æˆ–
                <code>m6a.large</code>ï¼ˆâ‰¥2 vCPU / 4 GB RAMï¼‰
              </li>
              <li>å­˜å‚¨ï¼š50 GB gp3</li>
              <li>åŒºåŸŸï¼š<code>us-west-2</code>ï¼ˆå¯æ ¹æ®éœ€æ±‚è°ƒæ•´ï¼‰</li>
              <li>IAMï¼šç»‘å®šå…·å¤‡ Amazon Bedrockã€ECRã€CloudWatch è¯»å†™æƒé™çš„è§’è‰²</li>
              <li>å®‰å…¨ç»„ï¼šå¼€æ”¾ SSH 22 ç«¯å£ï¼›å¦‚éœ€è®¿é—® Jaeger UIï¼Œå¼€æ”¾ 16686</li>
            </ul>
            <blockquote>
              <strong>æ£€æŸ¥ç‚¹</strong> SSH ç™»å½•åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç¡®ä¿å‡­è¯æœ‰æ•ˆã€‚
              <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">aws configure set region us-west-2 
aws sts get-caller-identity
              </code></pre>
            </blockquote>

            <h3>äºŒã€åŸºç¡€å·¥å…·å®‰è£…</h3>
            <div class="timeline">
              <div class="timeline-item">
                <h4>1. å®‰è£…ç³»ç»Ÿä¾èµ–</h4>
                <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">sudo yum install -y git wget htop
sudo dnf install -y python3.11</code></pre>
                <p>éªŒè¯å‘½ä»¤ï¼š</p>
                <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">python3.11 --version
git --version</code></pre>
              </div>

              <div class="timeline-item">
                <h4>2. å®‰è£… uvï¼ˆPython åŒ…ç®¡ç†å™¨ï¼‰</h4>
                <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">curl -LsSf https://astral.sh/uv/install.sh | sh
echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc</code></pre>
                <p>éªŒè¯ï¼š<code>uv --version</code></p>
              </div>

              <div class="timeline-item">
                <h4>3. å®‰è£… Dockerï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰</h4>
                <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">sudo dnf update -y
sudo dnf install -y docker
sudo systemctl enable docker
sudo systemctl start docker
sudo usermod -aG docker $USER
newgrp docker

# éªŒè¯
docker run --rm hello-world
</code></pre>
              </div>

              <div class="timeline-item">
                <h4>4. è¿è¡Œ Jaegerï¼ˆè¯Šæ–­å·¥å…·ï¼Œå¯é€‰ï¼‰</h4>
                <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">docker run -d --name jaeger \
  -e COLLECTOR_ZIPKIN_HOST_PORT=:9411 \
  -e COLLECTOR_OTLP_ENABLED=true \
  -p 6831:6831/udp \
  -p 6832:6832/udp \
  -p 5778:5778 \
  -p 16686:16686 \
  -p 4317:4317 \
  -p 4318:4318 \
  -p 14250:14250 \
  -p 14268:14268 \
  -p 14269:14269 \
  -p 9411:9411 \
  jaegertracing/all-in-one:latest</code></pre>
              </div>
              <div class="callout">
                <strong>ç«¯å£è½¬å‘é…ç½®</strong>
                <p>åç»­å®éªŒéœ€è¦è®¿é—® Jaeger UI (16686) å’Œ Neo4j (7474, 7687)ï¼Œå»ºè®®é€šè¿‡ SSH éš§é“å°†è¿œç¨‹ç«¯å£è½¬å‘åˆ°æœ¬åœ°ï¼š</p>
                <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">ssh -i your-key.pem -L 16686:localhost:16686 -L 7474:localhost:7474 -L 7687:localhost:7687 ec2-user@your-ec2-ip</code></pre>
                <p>æˆ–ä½¿ç”¨æ”¯æŒç«¯å£è½¬å‘çš„ IDEï¼ˆå¦‚ VS Code Remote SSHï¼‰æˆ– Terminal å·¥å…·ã€‚</p>
                <p>é…ç½®åå¯é€šè¿‡ <code>http://localhost:16686</code> è®¿é—® Jaegerï¼Œ<code>http://localhost:7474</code> è®¿é—® Neo4j Browserã€‚</p>
              </div>
            </div>
          </article>
        </section>

        <section id="deploy" data-section="Stage 02">
          <div class="toolbar">
            <h2>éƒ¨ç½² Nexus-AI</h2>
            <span class="badge">æ ¸å¿ƒæ­¥éª¤</span>
          </div>
          <h3>ä¸€ã€æ‹‰å–ä»£ç ä¸ç›®å½•é…ç½®</h3>
          <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">git clone https://github.com/hy714335634/Nexus-AI.git
cd Nexus-AI</code></pre>

          <h3>äºŒã€åˆå§‹åŒ–è™šæ‹Ÿç¯å¢ƒ</h3>
          <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">python3.11 -m venv .nexus-ai
source .nexus-ai/bin/activate
echo 'source $HOME/Nexus-AI/.nexus-ai/bin/activate' >> ~/.bashrc
echo 'cd $HOME/Nexus-AI/' >> ~/.bashrc
source ~/.bashrc</code></pre>
          <p>éªŒè¯ï¼š<code>python --version</code> æ˜¾ç¤º 3.11.x</p>

          <h3>ä¸‰ã€å®‰è£… Python ä¾èµ–</h3>
          <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">uv pip install --upgrade pip
uv pip install -r requirements.txt</code></pre>
          <ul>
            <li>å›½å†…ç½‘ç»œå¯æ·»åŠ  <code>--index-url https://pypi.tuna.tsinghua.edu.cn/simple</code></li>
            <li>å®‰è£…å®Œæˆåæ‰§è¡Œ <code>uv pip list | head</code> ç¡®è®¤æˆåŠŸ</li>
          </ul>
        </section>

        <section id="validation" data-section="Stage 03">
          <div class="toolbar">
            <h2>ç¯å¢ƒéªŒè¯</h2>
            <span class="badge">Time to Run</span>
          </div>
          <p>æ³¨æ„ï¼šæ‰§è¡Œæ—¶é—´å¯èƒ½è¾ƒé•¿ï¼Œé¦–æ¬¡è¿è¡Œè¯·è€å¿ƒç­‰å¾…æ¨¡å‹å’Œä¾èµ–åŠ è½½ã€‚</p>
          <div class="callout">
            <strong>å»ºè®®</strong>
            åœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¹¶ä½¿ç”¨ <code>tail -f logs/temp.log</code> è§‚å¯Ÿå®æ—¶æ—¥å¿—ã€‚
          </div>
          
          <h3>ç¤ºä¾‹å‘½ä»¤</h3>
          <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">python agents/system_agents/magician.py -i "awsç¾ä¸œä¸€çš„m8g.xlargeä»€ä¹ˆä»·æ ¼"</code></pre>
          
          <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">python agents/system_agents/magician.py -i "æœ€è¿‘OpenAIæœ‰å“ªäº›æ–°é—»"</code></pre>
          
          <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">python agents/system_agents/magician.py -i "æˆ‘æƒ³çŸ¥é“æœ‰å“ªäº›å¤´éƒ¨çš„åŒ»ç–—ç§‘æŠ€å…¬å¸åœ¨å°è¯•ä½¿ç”¨GenAIç›¸å…³æŠ€æœ¯ï¼Œè¯¦ç»†æŸ¥è¯¢å¹¶æ±‡æ€»å‘Šè¯‰æˆ‘è¿™äº›å…¬å¸çš„ä¿¡æ¯ï¼Œå¦‚è¥æ”¶ã€ä¸»è¥ä¸šåŠ¡ã€ä½“é‡ç­‰ç­‰"</code></pre>

          <h3>ç›´æ¥è°ƒç”¨ç”Ÿæˆçš„ Agent</h3>
          <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">python agents/generated_agents/aws_pricing_agent/aws_pricing_agent.py -r "awsç¾ä¸œä¸€çš„m8g.xlargeä»€ä¹ˆä»·æ ¼"</code></pre>
        </section>

        <section id="feature-check" data-section="Stage 04">
          <div class="toolbar">
            <h2>åŠŸèƒ½éªŒè¯</h2>
            <span class="badge">Quality Gate</span>
          </div>
          <p>ç¡®ä¿éƒ¨ç½²å®Œæˆåï¼ŒåŸºç¡€åŠŸèƒ½æ­£å¸¸è¿è¡Œï¼Œä¸ºåç»­ Agent å®éªŒæ‰“ä¸‹ç¨³å®šåŸºç¡€ã€‚</p>
          <div class="timeline">
            <div class="timeline-item">
              <h4>åŸºç¡€å‘½ä»¤</h4>
              <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">source .nexus-ai/bin/activate</code></pre>
              <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">mkdir -p logs && export LOG_DIR=logs/$(date +%Y%m%d)</code></pre>
            </div>
            <div class="timeline-item">
              <h4>ç³»ç»Ÿ Agent ç¤ºä¾‹</h4>
              <p>
                é‡å¤æ‰§è¡Œä¸Šä¸€æ­¥ä¸­åˆ—å‡ºçš„ç³»ç»Ÿ Agent ç¤ºä¾‹å‘½ä»¤ï¼Œå¹¶æ£€æŸ¥è¾“å‡ºæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚
              </p>
            </div>
            <div class="timeline-item">
              <h4>ç›´æ¥è°ƒç”¨ç”Ÿæˆ Agent</h4>
              <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">python agents/generated_agents/aws_pricing_agent/aws_pricing_agent.py -r "awsç¾ä¸œä¸€çš„m8g.xlargeä»€ä¹ˆä»·æ ¼"</code></pre>
              <p>è§‚å¯Ÿè¾“å‡ºæ ¼å¼ï¼Œäº†è§£å·¥å…·è°ƒç”¨é“¾ä¸ç»“æœç»“æ„ã€‚</p>
            </div>
          </div>
        </section>

        <section id="agent-lab" data-section="Stage 05">
          <div class="toolbar">
            <h2>Agent æ„å»ºä¸æµ‹è¯•</h2>
            <button class="cta" data-collapse="[data-agent]">å±•å¼€ä»»åŠ¡</button>
          </div>

          <article data-agent>
            <h3>ä¸€ã€æ„å»ºå‚è€ƒç¤ºä¾‹</h3>
            <div class="timeline">
              <div class="timeline-item">
                <h4>ç¤ºä¾‹ 1 Â· æ–°é—»èšåˆ Agent</h4>
                <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">nohup python -u agents/system_agents/agent_build_workflow/agent_build_workflow.py -i 'è¯·åˆ›å»ºä¸€ä¸ªAgentèƒ½å¤Ÿæ ¹æ®æˆ‘å…³æ³¨è¯é¢˜ï¼Œæ£€ç´¢çƒ­åº¦æœ€é«˜çš„æ–°é—»ï¼Œæ–°é—»æ¥æºå¯ä»¥æ˜¯ç™¾åº¦ã€æ–°æµªã€æ¾æ¹ƒç­‰ä¸»æµåª’ä½“' &
tail -f nohup.out</code></pre>
              </div>
              <div class="timeline-item">
                <h4>ç¤ºä¾‹ 2 Â· è‚¡ç¥¨åˆ†æ Agent</h4>
                <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">nohup python -u agents/system_agents/agent_build_workflow/agent_build_workflow.py -i "
åˆ›å»ºä¸€ä¸ªè‚¡ç¥¨åˆ†æåŠ©æ‰‹ï¼Œå»ºè®®åç§°ä¸ºstock_analysis_agentï¼Œèƒ½å¤Ÿä¸ºå®¢æˆ·æä¾›è‚¡ç¥¨æŠ•èµ„å»ºè®®ï¼ŒåŸºæœ¬è¦æ±‚å¦‚ä¸‹ï¼š
1ã€	èƒ½å¤ŸåŸºäºå…¬ç½‘å®æ—¶æŠ“å–ç”¨æˆ·æŒ‡å®šæˆ–å…³å¿ƒçš„è‚¡ç¥¨ä»£ç è´¢æŠ¥æ•°æ®ï¼Œæ ¹æ®DCFä¼°å€¼æ³•è®¡ç®—å½“å‰è‚¡ç¥¨ä¼°å€¼ï¼Œå¹¶ä¸”å¸®åŠ©ç”¨æˆ·åˆ¤æ–­ç›®å‰å¸‚å€¼ä¸ä¼°å€¼ç›¸æ¯”æ˜¯é«˜ä¼°è¿˜æ˜¯ä½ä¼°
2ã€	ç»“åˆå½“å‰æ—¶é—´èŠ‚ç‚¹çš„å®è§‚ç»æµï¼ŒæµåŠ¨æ€§ä¸è¡Œä¸šè¶‹åŠ¿å‘å±•(å¯é€šè¿‡äº’è”ç½‘æ£€ç´¢å¯ä¿¡æ•°æ®æº)ï¼Œåˆ¤æ–­è¯¥è‚¡ç¥¨æœªæ¥1å¹´çš„ç›ˆåˆ©é¢„æµ‹ä¸epså¢é•¿é¢„æµ‹ï¼ˆæœªæ¥4ä¸ªå­£åº¦åˆ†åˆ«é¢„æµ‹ï¼‰
3ã€	æç¤ºè¯¥è‚¡ç¥¨æœªæ¥1å¹´å†…ï¼Œå¯èƒ½å­˜åœ¨çš„é£é™©
4ã€	ä¸è¯¥è¡Œä¸šå¯æ¯”å…¬å¸ï¼Œè¿›è¡Œä¼°å€¼ä¸ç›ˆåˆ©é¢„æœŸè¿›è¡Œæ¯”è¾ƒï¼Œå¸®ç”¨æˆ·æ‰¾å‡ºæ˜¯å¦è¯¥è¡Œä¸šæœ‰æ›´å€¼å¾—æŠ•èµ„çš„æ ‡çš„
5ã€	æŠŠä½ ç”Ÿæˆçš„æœªæ¥1å¹´çš„ç›ˆåˆ©é¢„æµ‹ä¸wall streetçš„åˆ¸å•†ç›ˆåˆ©é¢„æµ‹è¿›è¡Œå¯¹æ¯”ï¼Œä»¥è¡¨æ ¼çš„å½¢å¼å±•ç°ç»™ç”¨æˆ·
6ã€	é’ˆå¯¹ç”¨æˆ·æŒ‡å®šçš„è‚¡ç¥¨ï¼Œç”ŸæˆæŠ¥å‘Šï¼Œæ€»å­—æ•°åœ¨2000å­—ä»¥ä¸Š

**é‡è¦**
- agentæ‰€æœ‰è®¡ç®—ç»“æœå¿…é¡»åŸºäºå·¥å…·æˆ–è€…ä»£ç è®¡ç®—å¾—åˆ°ï¼Œä¸èƒ½çŒœæµ‹
- agentå¯¹äºåˆ†ææŠ¥è¡¨ç­‰æ•°æ®åº”ç¼“å­˜åœ¨æœ¬åœ°" &
tail -f nohup.out</code></pre>
              </div>
            </div>
            <div class="callout">
              <strong>èµ„æºæé†’</strong>
              é•¿æ—¶é—´è¿è¡Œå¯ä½¿ç”¨ <code>htop</code> ç›‘æ§ CPUã€å†…å­˜å ç”¨ï¼Œé¿å…èµ„æºè€—å°½ã€‚
              å½“è¿è¡Œç»“æŸåï¼Œåº”åœ¨æ§åˆ¶å°çœ‹åˆ°è¿‡ç¨‹ç»Ÿè®¡ï¼Œå¹¶åœ¨projectsç›®å½•ä¸‹ç”Ÿæˆå¯¹åº”çš„workflow_summary_report.mdæ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­åŒ…å«å·¥ä½œæµæ‰§è¡Œæ€»ç»“æŠ¥å‘Šã€‚
            </div>

          <div class="img-container">
            <img src="/assets/05.build_console_log.png" alt="æ§åˆ¶å°è¾“å‡º">
          </div>
          <div class="img-container">
            <img src="/assets/05.build_workflow_summary.png" alt="å·¥ä½œæµæ—¥å¿—">
          </div>

            <h3>äºŒã€æ„å»ºç»“æœå·¡æ£€</h3>
            <ul>
              <li><code>projects/&lt;project_name&gt;/agents/</code>ï¼šæ„å»ºè¿‡ç¨‹ä»£ç </li>
              <li><code>projects/&lt;project_name&gt;/project_config.json</code>ï¼šAgent æ”¯æŒå‚æ•°</li>
              <li><code>projects/&lt;project_name&gt;/workflow_summary_report.md</code>ï¼šæ€»ç»“æŠ¥å‘Š</li>
            </ul>

            <h3>ä¸‰ã€Agent è°ƒç”¨</h3>
            <ul>
              <li>
                é€šè¿‡ç³»ç»Ÿ Agentï¼š
                <code>python agents/system_agents/magician.py -i "æè¿°ä¸šåŠ¡éœ€æ±‚"</code>
              </li>
              <li>
                ç›´æ¥è¿è¡Œç”Ÿæˆ Agentï¼š
                <code>python agents/generated_agents/&lt;agent&gt;/&lt;agent&gt;.py --help</code>
              </li>
            </ul>

            <h3>å››ã€Agent æ›´æ–°ï¼ˆå¯é€‰ï¼‰</h3>
            <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">nohup python -u agents/system_agents/agent_update_workflow/agent_update_workflow.py -i "ä¸ºnews_retrieval_agentæ·»åŠ serpapiæ£€ç´¢èƒ½åŠ›ï¼Œæœç´¢åçš„ç»“æœèƒ½å¤Ÿä»¥excelæ ¼å¼è¾“å‡º" -j "news_retrieval_agent" &</code></pre>
          </article>
        </section>

        <footer class="hero" style="margin-top: 1rem;">
          <h2>å®Œæˆå®éªŒä¹‹å</h2>
          <p>
            ğŸ‰æ­å–œï¼Œæ‚¨å·²æŒæ¡ Nexus-AI åŸºç¡€ç¯å¢ƒæ­å»ºã€Agent æ„å»ºä¸å¢é‡æ›´æ–°çš„å…³é”®æµç¨‹ğŸ‰
          </p>
          <div class="badge-stack">
            <span class="badge">ä¸‹ä¸€æ­¥ Â· è‡ªå®šä¹‰å·¥å…·</span>
            <span class="badge">æŒ‘æˆ˜ Â· Observability é›†æˆ</span>
            <span class="badge">è¿›é˜¶ Â· å¤š Agent ç¼–æ’</span>
          </div>
        </footer>

        <section id="challenge" data-section="Challenge">
          <div class="toolbar">
            <h2>æŒ‘æˆ˜ï¼šæ„å»ºä¸å¤–éƒ¨èµ„æºé›†æˆAgentï¼ˆå¯é€‰ï¼‰</h2>
            <span class="badge">Advanced</span>
          </div>

          <div class="callout">
            <strong>å®éªŒç›®æ ‡</strong>
            <p>æœ¬å®éªŒå°†åˆ›å»ºä¸€ä¸ªç”¨äºAWSèµ„æºé‡‡é›†Agentï¼Œé‡‡é›†è¿‡ç¨‹ä¸­å®Œæˆèµ„æºå…³è”åˆ†æï¼Œå¹¶å°†ç›¸å…³èµ„æºå’Œå…³ç³»å†™å…¥neo4jæ•°æ®åº“ä¸­ï¼Œåç»­å¯åŸºäºçŸ¥è¯†å›¾è°±å†…å®¹ã€è·¯å¾„æ£€ç´¢å›ç­”å®¢æˆ·é—®é¢˜ã€‚</p>
          </div>

          <div class="img-container">
            <img src="/assets/06.neo4j.png" alt="AWSèµ„æºé‡‡é›†Agentæ¶æ„å›¾">
          </div>

          <h3>åˆ›å»º Neo4j æ•°æ®ç›®å½•</h3>
          <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">mkdir -p $HOME/Nexus-AI/tools/generated_tools/neo4j/neo4j_data
mkdir -p $HOME/Nexus-AI/tools/generated_tools/neo4j/neo4j_logs
mkdir -p $HOME/Nexus-AI/tools/generated_tools/neo4j/neo4j_import
mkdir -p $HOME/Nexus-AI/tools/generated_tools/neo4j/neo4j_plugins</code></pre>

          <h3>å¯åŠ¨ Neo4j å®¹å™¨</h3>
          <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">docker run -d  --name neo4j-container \
    -p 7474:7474 -p 7687:7687  \
    -e NEO4J_AUTH=neo4j/neo4jneo4j  \
    -e "NEO4J_dbms_security_procedures_unrestricted=apoc.*"   \
    -e "NEO4J_dbms_security_procedures_allowlist=apoc.*"  \
    -v $HOME/Nexus-AI/tools/generated_tools/neo4j/neo4j_data:/data   \
    -v $HOME/Nexus-AI/tools/generated_tools/neo4j/neo4j_logs:/logs   \
    -v $HOME/Nexus-AI/tools/generated_tools/neo4j/neo4j_import:/var/lib/neo4j/import  \
    -v $HOME/Nexus-AI/tools/generated_tools/neo4j/neo4j_plugins:/plugins  \
    neo4j:latest</code></pre>

          <h3>æäº¤ Agent æ„å»ºä»»åŠ¡</h3>
          <pre><button class="copy">å¤åˆ¶</button><code class="language-bash">nohup python -u agents/system_agents/agent_build_workflow/agent_build_workflow.py -i '
åˆ›å»ºä¸€ä¸ªAWSç½‘ç»œæ‹“æ‰‘åˆ†æAgentï¼Œå»ºè®®åç§°ä¸ºaws_architecture_topology_analyzerï¼Œè¿™ä¸ªAgentè¦èƒ½å¤Ÿå¸®åŠ©å®¢æˆ·å…¨é¢é‡‡é›†AWSè´¦å·ä¸­æ ¸å¿ƒèµ„æºå¹¶ç»“åˆNeo4jæ•°æ®åº“æ„å»ºç½‘ç»œæ‹“æ‰‘ã€‚
è¿™ä¸ªAgentéœ€è¦å…·å¤‡ä»¥ä¸‹èƒ½åŠ›ï¼Œéƒ¨åˆ†ç¯èŠ‚è¦æŒ‰ç…§ç»™å®šçš„è§„åˆ™å¤„ç†ç›¸å…³æ•°æ®ã€‚
åŸºæœ¬èƒ½åŠ›ï¼š
- èƒ½å¤Ÿé›†æˆAWS Boto3 SDKï¼ŒåŠ è½½ç”¨æˆ·æŒ‡å®šçš„profileåˆ›å»ºç›¸åº”æŸ¥è¯¢å®¢æˆ·ç«¯
- èƒ½å¤Ÿé€šè¿‡å·¥å…·å®ç°æŠ“å–æŒ‡å®šåŒºåŸŸçš„æ‰€æœ‰AWSç½‘ç»œç»„ä»¶èµ„æºä»¥åŠEC2ã€RDSèµ„æº
- ç½‘ç»œç»„ä»¶åŒ…æ‹¬ï¼šTransit Gatewayï¼ŒVPC Peeringï¼ŒPrivatelinkï¼ŒVPCï¼ŒDirect Connect Gatewayï¼ŒInternet Gatewayï¼ŒRoute Tableï¼ŒVGWç­‰ç­‰æ ¸å¿ƒç½‘ç»œç»„ä»¶ï¼Œå°½å¯èƒ½å…¨é¢
- æ¯æ¬¡æ‰§è¡Œæ—¶åº”æ£€æŸ¥æŒ‡å®šåŒºåŸŸæ‰€æœ‰èµ„æºï¼ŒæŒ‰é¡ºåºæ‰«æä¸è¦é—æ¼
- æ‰«æåˆ°çš„èµ„æºåº”åœ¨ç»™å®šçš„neo4jæ•°æ®åº“ä¸­ï¼Œåˆ›å»ºå¯¹åº”çš„nodeï¼Œå¹¶æ ¹æ®èµ„æºå±æ€§ï¼Œåˆ›å»ºå¯¹åº”çš„edge
- ä¸ºäº†ç¡®ä¿åˆ›å»ºedgeæ—¶ä¸¤ç«¯çš„nodeå‡å­˜åœ¨ï¼Œä½ åº”åˆç†è®¾è®¡æ‰«æé¡ºåºï¼Œé¿å…æ•°æ®æ’å…¥å¤±è´¥å¯¼è‡´ä¸å…¨é¢
- Agentèƒ½å¤ŸåŸºäºç”¨æˆ·è‡ªç„¶è¯­è¨€é—®é¢˜è¿›è¡Œå¯¹è¯å’Œé—®ç­”ï¼Œåœ¨å›ç­”é—®é¢˜æ—¶éœ€è¦é€šè¿‡å·¥å…·æŸ¥è¯¢neo4jæ•°æ®åº“ä¸­ç›¸å…³å†…å®¹è¿›è¡Œå›ç­”

æ ¸å¿ƒè§„åˆ™ï¼š
- neo4jä¸­çš„èµ„æºåº”è¯¥æŒ‰å¦‚ä¸‹å±‚çº§ï¼šAccount-> Region -> Network Service -> VPC -> Routetable -> Security Group -> EC2/RDS/etc....è¯·æŒ‰ç…§è¦æ±‚åˆç†è®¾è®¡ï¼Œé¿å…é—æ¼
- å½“Agentæ‰«æåˆ°èµ„æºæ—¶ï¼Œåº”ä½¿ç”¨å·¥å…·åœ¨neo4jæ•°æ®åº“ä¸­åˆ›å»ºnodeåŠedgeï¼Œnodeå’Œedgeå¿…é¡»æœ‰nameå±æ€§ï¼Œå¯¹åº”awsèµ„æºçš„nameæ ‡ç­¾å€¼
- å½“æ’å…¥neo4jæ•°æ®åº“å¤±è´¥æ—¶ï¼Œåº”æ€è€ƒåŸå› ï¼Œåˆç†è¿›è¡ŒäºŒæ¬¡æŸ¥è¯¢è¿›è¡Œè¡¥å…¨
- å½“æ’å…¥å­˜åœ¨å†²çªæ—¶ï¼Œåº”ç”Ÿæˆneo4jè¯­å¥è¿›è¡Œæ£€ç´¢æ’æŸ¥é—®é¢˜
- å’Œneo4jäº¤äº’çš„å·¥å…·è‡³å°‘åŒ…æ‹¬æ’å…¥èµ„æºï¼Œæ›´æ–°èµ„æºï¼ŒæŸ¥è¯¢ç‰¹å®šèµ„æºï¼ŒæŒ‰æŸ¥è¯¢è¯­å¥æŸ¥è¯¢èµ„æºï¼Œè·¯å¾„æ£€ç´¢ï¼Œæ‹“æ‰‘æ£€ç´¢ç­‰

**æ•°æ®åº“è¿æ¥ä¿¡æ¯**
- neo4jåœ°å€ï¼šneo4j://localhost:7687
- neo4jæ•°æ®åº“ï¼šneo4j
- neo4jç”¨æˆ·åï¼šneo4j
- neo4jå¯†ç ï¼šneo4jneo4j

**é‡è¦ä¿¡æ¯**
- è¯·å…ˆä»”ç»†æ€è€ƒï¼Œè®¾è®¡åˆç†çš„æ•°æ®åº“Schemaæ¥æ»¡è¶³æˆ‘ä¸Šè¿°çš„åˆ†æéœ€æ±‚ï¼Œè¯·ä»”ç»†æ€è€ƒå¦‚ä½•æ›´è´´åˆä¸šåŠ¡ä½¿ç”¨åœºæ™¯
- æŒä¹…åŒ–æ•°æ®å¿…é¡»å­˜å‚¨åœ¨neo4jæ•°æ®åº“ä¸­' &</code></pre>

          <div class="callout alert">
            <strong>æ³¨æ„</strong>
            <p>æ­¤æŒ‘æˆ˜ä»»åŠ¡éœ€è¦è¾ƒé•¿æ—¶é—´å®Œæˆï¼Œå»ºè®®åœ¨å®ŒæˆåŸºç¡€å®éªŒåå†å°è¯•ã€‚</p>
            <p>ç¡®ä¿ Docker å·²æ­£ç¡®å®‰è£…å¹¶è¿è¡Œï¼ŒNeo4j å®¹å™¨å¯åŠ¨æˆåŠŸåå†æäº¤æ„å»ºä»»åŠ¡ã€‚</p>
          </div>
        </section>
      </main>
    </div>

    <div class="chatbot-backdrop" id="chatbotBackdrop" aria-hidden="true"></div>
    <section
      class="chatbot-panel"
      id="chatbotPanel"
      aria-label="Nexus-AI æ™ºèƒ½åŠ©æ‰‹"
      aria-hidden="true"
    >
      <header class="chatbot-header">
        <h3>æ™ºèƒ½åŠ©æ‰‹</h3>
        <button
          class="chatbot-close"
          type="button"
          id="chatbotClose"
          title="å…³é—­åŠ©æ‰‹"
          aria-label="å…³é—­åŠ©æ‰‹"
        >
          âœ•
        </button>
      </header>
      <div class="chat-messages" id="chatMessages" role="log" aria-live="polite"></div>
      <form class="chat-form" id="chatForm">
        <div class="chat-status" id="chatStatus">
          <span><span class="dot" aria-hidden="true"></span>æœåŠ¡å·²å°±ç»ª</span>
          <button
            class="chat-advanced-toggle"
            type="button"
            id="chatAdvancedToggle"
            aria-expanded="false"
            aria-controls="chatAdvancedFields"
          >
            é«˜çº§é€‰é¡¹
          </button>
        </div>
        <div
          class="chat-advanced-fields"
          id="chatAdvancedFields"
          aria-hidden="true"
        >
          <label for="chatMode">
            æ¨¡å¼
            <select id="chatMode" name="mode">
              <option value="">é»˜è®¤ï¼ˆgeneralï¼‰</option>
              <option value="general">general</option>
              <option value="code">code</option>
              <option value="doc">doc</option>
            </select>
          </label>
          <label for="chatContext">
            ä¸Šä¸‹æ–‡é™å®š
            <input
              id="chatContext"
              name="context"
              type="text"
              placeholder="ä¾‹å¦‚ï¼šå…³æ³¨agents/generated_agentsç›®å½•"
            />
          </label>
          <label for="chatSections">
            åŒ…å«æ®µè½ï¼ˆé€—å·åˆ†éš”ï¼‰
            <input
              id="chatSections"
              name="include_sections"
              type="text"
              placeholder="ä¾‹å¦‚ï¼šAgentScript,TechSpec"
            />
          </label>
          <label for="chatSnippets">
            é¢å¤–æç¤º
            <textarea
              id="chatSnippets"
              name="extra_snippets"
              rows="2"
              placeholder="ä¾‹å¦‚ï¼šæé†’ï¼šéœ€è¦å¼ºè°ƒnocallbacké…ç½®çš„ä½œç”¨"
            ></textarea>
          </label>
        </div>
        <textarea
          id="chatInput"
          placeholder="è¯·è¾“å…¥é—®é¢˜ï¼Œæ”¯æŒ âŒ˜/Ctrl + Enter å‘é€"
          aria-label="é—®é¢˜å†…å®¹"
        ></textarea>
        <button type="submit" id="chatSubmit">å‘é€</button>
      </form>
    </section>

    <div class="lightbox" id="lightbox">
      <div class="lightbox-content">
        <button class="lightbox-close" id="lightboxClose">âœ•</button>
        <img id="lightboxImg" src="" alt="">
        <div class="lightbox-caption" id="lightboxCaption"></div>
      </div>
    </div>

    <script>
      const tocLinks = [...document.querySelectorAll(".nav a")];
      const sections = tocLinks.map((link) =>
        document.querySelector(link.getAttribute("href"))
      ).filter(Boolean);

      const setActiveLink = (id) => {
        tocLinks.forEach((link) => {
          const isActive = link.getAttribute("href") === `#${id}`;
          link.classList.toggle("active", isActive);
        });
      };

      // Handle click events
      tocLinks.forEach((link) => {
        link.addEventListener("click", (e) => {
          const id = link.getAttribute("href").substring(1);
          setActiveLink(id);
        });
      });

      // Handle scroll events
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting && entry.intersectionRatio > 0.3) {
              const id = entry.target.getAttribute("id");
              setActiveLink(id);
            }
          });
        },
        {
          rootMargin: "-15% 0px -70% 0px",
          threshold: [0, 0.3, 0.5, 1],
        }
      );

      sections.forEach((section) => {
        if (section) observer.observe(section);
      });

      const progressBar = document.getElementById("progressBar");
      const scrollTopBtn = document.getElementById("scrollTop");
      const themeToggle = document.getElementById("themeToggle");
      const tocToggle = document.getElementById("tocToggle");
      const sidebarToggle = document.getElementById("sidebarToggle");
      const chatbotToggle = document.getElementById("chatbotToggle");
      const chatbotPanel = document.getElementById("chatbotPanel");
      const chatbotBackdrop = document.getElementById("chatbotBackdrop");
      const chatbotClose = document.getElementById("chatbotClose");
      const chatMessages = document.getElementById("chatMessages");
      const chatForm = document.getElementById("chatForm");
      const chatInput = document.getElementById("chatInput");
      const chatSubmit = document.getElementById("chatSubmit");
      const chatAdvancedToggle = document.getElementById("chatAdvancedToggle");
      const chatAdvancedFields = document.getElementById("chatAdvancedFields");
      const chatMode = document.getElementById("chatMode");
      const chatContext = document.getElementById("chatContext");
      const chatSections = document.getElementById("chatSections");
      const chatSnippets = document.getElementById("chatSnippets");
      const chatStatus = document.getElementById("chatStatus");
      const chatStatusText = chatStatus ? chatStatus.querySelector("span") : null;
      // ä¿®æ”¹ä¸ºå®é™…çš„åç«¯æœåŠ¡å™¨åœ°å€
      const API_BASE_URL = window.location.origin;
      const API_ENDPOINT = `${API_BASE_URL}/ask`;
      const HEALTH_ENDPOINT = `${API_BASE_URL}/health`;
      const toc = document.getElementById("toc");
      const noteInput = document.getElementById("noteInput");
      const noteAdd = document.getElementById("noteAdd");
      const noteList = document.getElementById("noteList");
      const noteEmpty = document.getElementById("noteEmpty");
      const noteSearch = document.getElementById("noteSearch");
      const noteCount = document.getElementById("noteCount");
      const STORAGE_KEY = 'nexus-ai-notes';
      let notes = [];
      let filteredNotes = [];

      const isChatVisible = () =>
        chatbotPanel && chatbotPanel.classList.contains("visible");

      const ensureChatGreeting = () => {
        if (!chatMessages || chatMessages.dataset.initialized === "true") return;
        appendChatMessage(
          "assistant",
          "æ‚¨å¥½ï¼Œæˆ‘æ˜¯ Nexus-AI æ™ºèƒ½åŠ©æ‰‹ã€‚è¯·ç›´æ¥è¾“å…¥æ‚¨çš„é—®é¢˜ï¼Œæˆ‘ä¼šé€šè¿‡åç«¯çŸ¥è¯†åº“ä¸ºæ‚¨æä¾›è§£ç­”ã€‚"
        );
        chatMessages.dataset.initialized = "true";
      };

      const appendChatMessage = (role, text, meta = {}) => {
        if (!chatMessages) return;
        const wrapper = document.createElement("div");
        wrapper.className = `chat-message ${role}`;

        const bubble = document.createElement("div");
        bubble.className = "chat-bubble";
        
        if (role === "assistant" && text) {
          // æ¸²æŸ“ Markdown
          try {
            const rawHtml = marked.parse(text || "");
            const cleanHtml = DOMPurify.sanitize(rawHtml);
            bubble.innerHTML = cleanHtml;
          } catch (e) {
            bubble.textContent = text || "æš‚æ— å†…å®¹";
          }
        } else {
          bubble.textContent = text || (role === "assistant" ? "æš‚æ— å†…å®¹" : "");
        }
        
        wrapper.appendChild(bubble);

        if (meta.usedSections && Array.isArray(meta.usedSections) && meta.usedSections.length) {
          const metaDiv = document.createElement("div");
          metaDiv.className = "chat-meta";
          const strong = document.createElement("strong");
          strong.textContent = "used_sections";
          metaDiv.append(strong, document.createTextNode(`: ${meta.usedSections.join(", ")}`));
          wrapper.appendChild(metaDiv);
        }

        if (meta.promptTokensHint) {
          const hintDiv = document.createElement("div");
          hintDiv.className = "chat-meta";
          const strong = document.createElement("strong");
          strong.textContent = "output_prompt_tokens";
          hintDiv.append(strong, document.createTextNode(`: ${meta.promptTokensHint}`));
          wrapper.appendChild(hintDiv);
        }

        if (meta.errorDetails) {
          const errorDiv = document.createElement("div");
          errorDiv.className = "chat-meta";
          const strong = document.createElement("strong");
          strong.textContent = "error";
          errorDiv.append(strong, document.createTextNode(`: ${meta.errorDetails}`));
          wrapper.appendChild(errorDiv);
        }

        chatMessages.appendChild(wrapper);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      };

      const updateChatStatus = (message, busy = false) => {
        if (!chatStatusText) return;
        const dot = document.createElement("span");
        dot.className = "dot";
        dot.setAttribute("aria-hidden", "true");
        if (busy) {
          dot.style.background = "rgba(96, 165, 250, 0.75)";
        } else {
          dot.removeAttribute("style");
        }
        chatStatusText.innerHTML = "";
        chatStatusText.append(dot, document.createTextNode(message));
      };

      const openChatbot = () => {
        if (!chatbotPanel || !chatbotToggle) return;
        chatbotPanel.classList.add("visible");
        chatbotPanel.setAttribute("aria-hidden", "false");
        chatbotBackdrop?.classList.add("visible");
        chatbotBackdrop?.setAttribute("aria-hidden", "false");
        chatbotToggle.setAttribute("aria-pressed", "true");
        ensureChatGreeting();
        updateChatStatus("æœåŠ¡å·²å°±ç»ª");
        setTimeout(() => chatInput?.focus(), 160);
      };

      const closeChatbot = () => {
        if (!chatbotPanel || !chatbotToggle) return;
        chatbotPanel.classList.remove("visible");
        chatbotPanel.setAttribute("aria-hidden", "true");
        chatbotBackdrop?.classList.remove("visible");
        chatbotBackdrop?.setAttribute("aria-hidden", "true");
        chatbotToggle.setAttribute("aria-pressed", "false");
      };

      const setChatLoading = (loading) => {
        if (!chatInput || !chatSubmit) return;
        chatInput.disabled = loading;
        chatSubmit.disabled = loading;
        if (loading) {
          updateChatStatus("æ­£åœ¨è·å–å›ç­”...", true);
        } else {
          updateChatStatus("æœåŠ¡å·²å°±ç»ª");
        }
      };

      chatbotToggle?.addEventListener("click", () => {
        if (isChatVisible()) {
          closeChatbot();
        } else {
          openChatbot();
        }
      });

      chatbotClose?.addEventListener("click", () => {
        closeChatbot();
      });

      chatbotBackdrop?.addEventListener("click", () => {
        closeChatbot();
      });

      chatAdvancedToggle?.addEventListener("click", () => {
        if (!chatAdvancedFields) return;
        const expanded = chatAdvancedFields.classList.toggle("visible");
        chatAdvancedToggle.setAttribute("aria-expanded", expanded.toString());
        chatAdvancedFields.setAttribute("aria-hidden", (!expanded).toString());
      });

      chatInput?.addEventListener("keydown", (event) => {
        if ((event.metaKey || event.ctrlKey) && event.key === "Enter") {
          event.preventDefault();
          chatForm?.requestSubmit();
        }
      });

      chatForm?.addEventListener("submit", async (event) => {
        event.preventDefault();
        const trimmedQuestion = chatInput?.value.trim();
        if (!trimmedQuestion) {
          chatInput?.focus();
          return;
        }

        appendChatMessage("user", trimmedQuestion);
        if (chatInput) chatInput.value = "";

        const payload = { question: trimmedQuestion };
        const selectedMode = chatMode?.value.trim();
        payload.mode = selectedMode || "general";

        const contextValue = chatContext?.value.trim();
        if (contextValue) {
          payload.context = contextValue;
        }

        const sectionValue = chatSections?.value.trim();
        if (sectionValue) {
          const sections = sectionValue
            .split(/[,ï¼Œ\n]/)
            .map((item) => item.trim())
            .filter(Boolean);
          if (sections.length) {
            payload.include_sections = sections;
          }
        }

        const snippetsValue = chatSnippets?.value.trim();
        if (snippetsValue) {
          const snippets = snippetsValue
            .split(/\n+/)
            .map((item) => item.trim())
            .filter(Boolean);
          if (snippets.length) {
            payload.extra_snippets = snippets;
          }
        }

        setChatLoading(true);

        try {
          const response = await fetch(API_ENDPOINT, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload),
          });

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
          }

          const data = await response.json();
          appendChatMessage("assistant", data.answer || "åç«¯æœªè¿”å›ç­”æ¡ˆ", {
            usedSections: Array.isArray(data.used_sections)
              ? data.used_sections
              : undefined,
            promptTokensHint: data.prompt_tokens_hint,
          });
        } catch (error) {
          appendChatMessage(
            "error",
            `è¯·æ±‚å¤±è´¥ï¼š${error?.message || "æœªçŸ¥é”™è¯¯"}`,
            {
              errorDetails:
                error?.response?.statusText ||
                (error?.stack ? error.stack.split("\n")[0] : undefined),
            }
          );
        } finally {
          setChatLoading(false);
          chatInput?.focus();
        }
      });

      const loadNotes = () => {
        try {
          const stored = localStorage.getItem(STORAGE_KEY);
          notes = stored ? JSON.parse(stored) : [];
          filteredNotes = [...notes];
        } catch (e) {
          notes = [];
          filteredNotes = [];
        }
      };

      const saveNotes = () => {
        try {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(notes));
        } catch (e) {
          console.error('Failed to save notes:', e);
        }
      };

      const updateCount = () => {
        noteCount.textContent = `${filteredNotes.length}/${notes.length} æ¡`;
      };

      const renderNotes = () => {
        noteList.innerHTML = "";
        if (!filteredNotes.length) {
          noteEmpty.style.display = "block";
          noteList.style.display = "none";
          updateCount();
          return;
        }

        noteEmpty.style.display = "none";
        noteList.style.display = "flex";
        
        filteredNotes.forEach((text, displayIndex) => {
          const actualIndex = notes.indexOf(text);
          const entry = document.createElement("div");
          entry.className = "note-entry";

          const content = document.createElement("div");
          content.className = "note-entry-text";
          const isTruncated = text.length > 100;
          content.textContent = text;
          if (isTruncated) {
            content.classList.add('truncated');
          }

          const actions = document.createElement("div");
          actions.className = "note-actions";

          if (isTruncated) {
            const expandBtn = document.createElement("button");
            expandBtn.type = "button";
            expandBtn.textContent = "å±•å¼€";
            expandBtn.addEventListener("click", () => {
              const isExpanded = content.classList.toggle('expanded');
              content.classList.toggle('truncated');
              expandBtn.textContent = isExpanded ? "æ”¶èµ·" : "å±•å¼€";
            });
            actions.appendChild(expandBtn);
          }

          const copyBtn = document.createElement("button");
          copyBtn.type = "button";
          copyBtn.dataset.index = actualIndex;
          copyBtn.textContent = "å¤åˆ¶";
          
          const deleteBtn = document.createElement("button");
          deleteBtn.type = "button";
          deleteBtn.className = "delete";
          deleteBtn.dataset.index = actualIndex;
          deleteBtn.textContent = "åˆ é™¤";

          actions.append(copyBtn, deleteBtn);
          entry.append(content, actions);
          noteList.appendChild(entry);
        });
        
        updateCount();
      };

      const addNote = () => {
        const value = noteInput.value.trim();
        if (!value) {
          noteInput.focus();
          return;
        }

        notes.unshift(value);
        saveNotes();
        noteInput.value = "";
        noteSearch.value = "";
        filteredNotes = [...notes];
        renderNotes();
        noteInput.focus();
      };

      const filterNotes = (query) => {
        if (!query.trim()) {
          filteredNotes = [...notes];
        } else {
          const lowerQuery = query.toLowerCase();
          filteredNotes = notes.filter(note => 
            note.toLowerCase().includes(lowerQuery)
          );
        }
        renderNotes();
      };

      loadNotes();
      renderNotes();

      noteAdd.addEventListener("click", addNote);

      noteInput.addEventListener("keydown", (event) => {
        if ((event.metaKey || event.ctrlKey) && event.key === "Enter") {
          event.preventDefault();
          addNote();
        }
      });

      noteSearch.addEventListener("input", (event) => {
        filterNotes(event.target.value);
      });

      noteList.addEventListener("click", async (event) => {
        const btn = event.target;
        if (btn.tagName !== "BUTTON") return;

        const idx = Number(btn.dataset.index);
        
        if (btn.classList.contains('delete')) {
          notes.splice(idx, 1);
          saveNotes();
          noteSearch.value = "";
          filteredNotes = [...notes];
          renderNotes();
        } else if (btn.textContent === "å¤åˆ¶" || btn.textContent === "å·²å¤åˆ¶" || btn.textContent === "å¤±è´¥") {
          const text = notes[idx];
          if (typeof text === "string") {
            const original = btn.textContent;
            try {
              await navigator.clipboard.writeText(text);
              btn.textContent = "å·²å¤åˆ¶";
              setTimeout(() => (btn.textContent = original), 1400);
            } catch (error) {
              btn.textContent = "å¤±è´¥";
              setTimeout(() => (btn.textContent = original), 1400);
            }
          }
        }
      });

      tocToggle.setAttribute("aria-expanded", "true");
      sidebarToggle.textContent = "âœ•";
      sidebarToggle.setAttribute("title", "éšè—å¯¼èˆª");

      document.addEventListener("scroll", () => {
        const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
        const progress = (scrollTop / (scrollHeight - clientHeight)) * 100;
        progressBar.style.width = `${progress}%`;
        scrollTopBtn.style.opacity = scrollTop > 360 ? "1" : "0";
      });

      scrollTopBtn.addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });

      themeToggle.addEventListener("click", () => {
        const prefersLight = document.body.getAttribute("data-theme") === "light";
        document.body.setAttribute("data-theme", prefersLight ? "dark" : "light");
      });

      tocToggle.addEventListener("click", () => {
        const isCollapsed = toc.classList.toggle("collapsed");
        tocToggle.textContent = isCollapsed ? "å±•å¼€å¯¼èˆª" : "æŠ˜å å¯¼èˆª";
        tocToggle.setAttribute("aria-expanded", (!isCollapsed).toString());
      });

      sidebarToggle.addEventListener("click", () => {
        const hidden = document.body.classList.toggle("sidebar-hidden");
        sidebarToggle.textContent = hidden ? "â‰¡" : "âœ•";
        sidebarToggle.setAttribute(
          "title",
          hidden ? "æ˜¾ç¤ºå¯¼èˆª" : "éšè—å¯¼èˆª"
        );
      });

      document.addEventListener("keydown", (event) => {
        if (event.key === "Escape") {
          if (isChatVisible()) {
            closeChatbot();
            return;
          }
          if (!document.body.classList.contains("sidebar-hidden")) {
            document.body.classList.add("sidebar-hidden");
            sidebarToggle.textContent = "â‰¡";
            sidebarToggle.setAttribute("title", "æ˜¾ç¤ºå¯¼èˆª");
          }
        }
      });

      document.querySelectorAll("[data-collapse]").forEach((btn) => {
        const targetSelector = btn.getAttribute("data-collapse");
        const targets = document.querySelectorAll(targetSelector);
        let collapsed = false;
        btn.addEventListener("click", () => {
          collapsed = !collapsed;
          btn.textContent = collapsed ? "å±•å¼€å†…å®¹" : "æŠ˜å å†…å®¹";
          targets.forEach((el) => {
            const height = el.scrollHeight;
            if (collapsed) {
              el.style.maxHeight = `${height}px`;
              requestAnimationFrame(() => {
                el.style.maxHeight = "0";
                el.style.opacity = "0";
              });
            } else {
              el.style.maxHeight = `${height}px`;
              el.style.opacity = "1";
              setTimeout(() => {
                el.style.maxHeight = "none";
              }, 480);
            }
            el.style.transition = "max-height 0.5s ease, opacity 0.4s ease";
          });
        });
        targets.forEach((el) => {
          el.style.overflow = "hidden";
          el.style.maxHeight = "none";
        });
      });

      const copyButtons = document.querySelectorAll("pre button.copy");
      copyButtons.forEach((btn) => {
        btn.addEventListener("click", async () => {
          const codeElement = btn.nextElementSibling;
          const code = codeElement.textContent.replace(/\n\s+/g, ' ').trim();
          try {
            await navigator.clipboard.writeText(code);
            btn.textContent = "å·²å¤åˆ¶";
            setTimeout(() => (btn.textContent = "å¤åˆ¶"), 1400);
          } catch (error) {
            btn.textContent = "å¤±è´¥";
            setTimeout(() => (btn.textContent = "å¤åˆ¶"), 1400);
          }
        });
      });

      // Image viewer functionality
      const lightbox = document.getElementById('lightbox');
      const lightboxImg = document.getElementById('lightboxImg');
      const lightboxCaption = document.getElementById('lightboxCaption');
      const lightboxClose = document.getElementById('lightboxClose');

      const initImageViewer = () => {
        document.querySelectorAll('.img-container img').forEach(img => {
          const container = img.closest('.img-container');
          if (container.querySelector('.img-wrapper')) return;

          const wrapper = document.createElement('div');
          wrapper.className = 'img-wrapper collapsed';
          const controls = document.createElement('div');
          controls.className = 'img-controls';
          
          const toggleCollapse = () => {
            const isCollapsed = wrapper.classList.toggle('collapsed');
            expandBtn.textContent = isCollapsed ? 'å±•å¼€' : 'æ”¶èµ·';
          };

          const expandBtn = document.createElement('button');
          expandBtn.textContent = 'å±•å¼€';
          expandBtn.onclick = toggleCollapse;

          img.addEventListener('click', () => {
            if (!wrapper.classList.contains('collapsed')) {
              toggleCollapse();
            }
          });

          const zoomBtn = document.createElement('button');
          zoomBtn.textContent = 'ğŸ” æ”¾å¤§';
          zoomBtn.onclick = () => {
            lightboxImg.src = img.src;
            lightboxCaption.textContent = img.alt || '';
            lightbox.classList.add('active');
          };

          controls.append(expandBtn, zoomBtn);
          
          img.parentNode.insertBefore(wrapper, img);
          wrapper.appendChild(img);
          container.appendChild(controls);

          if (img.alt) {
            const caption = document.createElement('div');
            caption.className = 'img-caption';
            caption.textContent = img.alt;
            container.appendChild(caption);
          }
        });
      };

      const closeLightbox = () => {
        lightbox.classList.remove('active');
      };

      lightboxClose?.addEventListener('click', closeLightbox);
      lightbox?.addEventListener('click', (e) => {
        if (e.target === lightbox) closeLightbox();
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && lightbox?.classList.contains('active')) {
          closeLightbox();
        }
      });

      initImageViewer();
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
  </body>
</html>

