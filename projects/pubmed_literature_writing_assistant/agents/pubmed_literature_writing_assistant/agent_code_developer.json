{
  "agent_code_development": {
    "development_overview": {
      "project_name": "pubmed_literature_writing_assistant",
      "version": "1.0",
      "date": "2025-10-26",
      "development_scope": "开发一个专业的科研文献编写智能体，能够根据用户提供的研究ID和需求，自动处理PubMed文献并生成高质量的文献综述",
      "design_principles": [
        "模块化设计，确保功能组件可独立维护",
        "缓存优先，避免重复处理大量文献",
        "进度管理，支持断点续传",
        "科研严谨性，确保生成内容准确可靠",
        "资源效率，优化大量文献处理时的性能"
      ],
      "key_decisions": [
        "基于PubMed文献搜索专家模板进行定制开发",
        "实现本地缓存机制，解决token限制问题",
        "使用版本控制管理文献综述迭代过程",
        "设计专用工具处理文献元数据和进度管理",
        "支持多语言输出和会话缓存功能"
      ]
    },
    "agent_implementation": {
      "agent_name": "pubmed_literature_writing_assistant",
      "file_path": "agents/generated_agents/pubmed_literature_writing_assistant/pubmed_literature_writing_assistant.py",
      "main_class": "PubmedLiteratureWritingAssistant",
      "entry_point": "create_pubmed_literature_writing_assistant",
      "dependencies": [
        "nexus_utils.agent_factory",
        "strands.telemetry",
        "pathlib",
        "uuid",
        "json",
        "os",
        "logging",
        "datetime"
      ],
      "imports": [
        "from nexus_utils.agent_factory import create_agent_from_prompt_template",
        "from strands.telemetry import StrandsTelemetry",
        "from pathlib import Path",
        "from typing import Dict, List, Any, Optional, Union",
        "from datetime import datetime"
      ]
    },
    "core_functions": [
      {
        "function_name": "generate_literature_review",
        "purpose": "根据研究ID和用户需求生成文献综述",
        "parameters": [
          {
            "name": "research_id",
            "type": "str",
            "description": "研究ID，对应.cache/pmc_literature下的目录名",
            "required": true
          },
          {
            "name": "requirement",
            "type": "str",
            "description": "用户额外研究需求",
            "required": false
          },
          {
            "name": "language",
            "type": "str",
            "description": "输出语言",
            "required": false
          },
          {
            "name": "session_id",
            "type": "str",
            "description": "会话ID，用于缓存会话数据",
            "required": false
          }
        ],
        "return_type": "str",
        "return_description": "文献综述生成结果",
        "implementation_notes": [
          "自动生成session_id（如果未提供）",
          "构建结构化的文献综述请求",
          "调用智能体执行文献综述生成流程",
          "包含完整的错误处理机制"
        ]
      },
      {
        "function_name": "continue_literature_review",
        "purpose": "继续生成之前中断的文献综述",
        "parameters": [
          {
            "name": "research_id",
            "type": "str",
            "description": "研究ID，对应.cache/pmc_literature下的目录名",
            "required": true
          },
          {
            "name": "session_id",
            "type": "str",
            "description": "会话ID，用于恢复之前的处理状态",
            "required": true
          },
          {
            "name": "language",
            "type": "str",
            "description": "输出语言",
            "required": false
          }
        ],
        "return_type": "str",
        "return_description": "文献综述生成结果",
        "implementation_notes": [
          "使用session_id恢复之前的处理状态",
          "从上次中断的地方继续处理",
          "确保不重复处理已处理的文献",
          "包含完整的错误处理机制"
        ]
      },
      {
        "function_name": "get_review_status",
        "purpose": "获取文献综述处理状态",
        "parameters": [
          {
            "name": "research_id",
            "type": "str",
            "description": "研究ID，对应.cache/pmc_literature下的目录名",
            "required": true
          },
          {
            "name": "session_id",
            "type": "str",
            "description": "会话ID",
            "required": true
          }
        ],
        "return_type": "str",
        "return_description": "处理状态信息",
        "implementation_notes": [
          "调用get_processing_status工具获取当前处理状态",
          "提供结构化的状态信息",
          "包含完整的错误处理机制"
        ]
      },
      {
        "function_name": "translate_review",
        "purpose": "将指定版本的文献综述翻译为目标语言",
        "parameters": [
          {
            "name": "research_id",
            "type": "str",
            "description": "研究ID，对应.cache/pmc_literature下的目录名",
            "required": true
          },
          {
            "name": "target_language",
            "type": "str",
            "description": "目标语言",
            "required": true
          },
          {
            "name": "version",
            "type": "str",
            "description": "要翻译的综述版本，默认为'final'",
            "required": false
          }
        ],
        "return_type": "str",
        "return_description": "翻译结果",
        "implementation_notes": [
          "读取指定版本的文献综述内容",
          "翻译为目标语言，保持原始格式和结构",
          "保存翻译后的内容，版本标记为特定格式",
          "包含完整的错误处理机制"
        ]
      }
    ],
    "tool_integration": {
      "custom_tools": [
        "load_literature_metadata",
        "save_review_version",
        "get_processing_status",
        "update_processing_status"
      ],
      "system_tools": [
        "file_read",
        "file_write",
        "current_time",
        "calculator"
      ],
      "strands_tools": [
        "StrandsTelemetry"
      ],
      "integration_notes": [
        "使用load_literature_metadata工具读取文献元数据",
        "使用save_review_version工具保存文献综述版本",
        "使用get_processing_status和update_processing_status工具管理处理进度",
        "使用file_read和file_write工具进行文件操作",
        "使用StrandsTelemetry进行遥测数据收集"
      ]
    },
    "configuration": {
      "environment_variables": [
        "BYPASS_TOOL_CONSENT",
        "OTEL_EXPORTER_OTLP_ENDPOINT"
      ],
      "model_configuration": {
        "model_name": "Anthropic Claude 3 Opus",
        "max_tokens": 60000,
        "temperature": 0.3,
        "top_p": 0.8
      },
      "streaming_config": {
        "enabled": true,
        "chunk_size": 1024
      }
    },
    "error_handling": {
      "exception_types": [
        "文件不存在异常",
        "JSON解析错误",
        "网络连接错误",
        "文件写入错误",
        "智能体调用错误"
      ],
      "error_responses": [
        "文献元数据读取失败时提供明确错误信息",
        "文献内容处理失败时记录错误并继续处理其他文献",
        "处理中断时能够从断点恢复",
        "缓存写入失败时实现备份机制"
      ],
      "recovery_strategies": [
        "使用session_id恢复处理状态",
        "实现断点续传机制",
        "文件操作前检查目录和文件是否存在",
        "使用try-except捕获和处理异常"
      ]
    },
    "testing": {
      "test_cases": [
        "测试基本文献综述生成功能",
        "测试断点续传功能",
        "测试处理状态查询功能",
        "测试翻译功能",
        "测试错误处理机制"
      ],
      "test_scenarios": [
        "小型文献集合（<10篇）处理",
        "中型文献集合（10-50篇）处理",
        "大型文献集合（>50篇）处理",
        "处理中断后恢复",
        "多语言输出测试"
      ],
      "validation_criteria": [
        "文献综述内容的全面性和准确性",
        "处理大量文献时的稳定性和效率",
        "断点续传功能的可靠性",
        "多语言输出的质量",
        "错误处理的有效性"
      ]
    },
    "deployment": {
      "deployment_requirements": [
        "Python 3.8+",
        "Strands SDK",
        "AWS Bedrock访问权限",
        "文件系统读写权限"
      ],
      "runtime_dependencies": [
        "nexus_utils",
        "strands",
        "json",
        "uuid",
        "pathlib",
        "logging",
        "datetime"
      ],
      "performance_considerations": [
        "大量文献处理时的内存使用",
        "文件读写操作的效率",
        "智能体调用的token使用量",
        "并发处理时的锁机制"
      ]
    },
    "development_notes": "智能体代码开发过程中，我们基于PubMed文献搜索专家模板进行了定制化开发，重点关注了文献综述生成流程的实现和断点续传功能。为了支持大量文献处理，我们实现了本地缓存机制和进度管理功能，确保在处理中断后能够从断点恢复。同时，我们也添加了多语言输出支持，使智能体能够满足不同用户的语言需求。在错误处理方面，我们实现了全面的异常捕获和处理机制，确保系统在各种异常情况下都能稳定运行。智能体的命令行接口设计考虑了不同使用场景，支持生成、继续、状态查询和翻译等多种操作模式，为用户提供了灵活的使用方式。"
  }
}