{
  "agent_code_development": {
    "development_overview": {
      "project_name": "meeting_minutes_generator",
      "version": "1.0",
      "date": "2025-09-22",
      "development_scope": "开发一个能够处理视频会议文件，提取音频，转换为文本，并生成标准会议纪要的智能体",
      "design_principles": [
        "模块化设计，将视频处理、音频提取、语音转文本和纪要生成功能解耦",
        "用户友好的命令行界面，支持交互模式和批处理模式",
        "有效集成自定义工具和系统工具",
        "健壮的错误处理机制",
        "清晰的进度反馈和状态报告"
      ],
      "key_decisions": [
        "基于document_processor_agent模板进行开发，并添加视频处理和音频转文本功能",
        "使用utils.agent_factory.create_agent_from_prompt_template创建Agent",
        "集成自定义开发的视频处理工具",
        "提供命令行界面和API接口两种使用方式",
        "使用JSON格式进行结果输出，便于后续处理"
      ]
    },
    "agent_implementation": {
      "agent_name": "meeting_minutes_generator",
      "file_path": "agents/generated_agents/meeting_minutes_generator/meeting_minutes_generator.py",
      "main_class": "N/A（使用函数式设计）",
      "entry_point": "main()",
      "dependencies": [
        "utils.agent_factory",
        "strands.telemetry",
        "json",
        "os",
        "argparse"
      ],
      "imports": [
        "from utils.agent_factory import create_agent_from_prompt_template",
        "from strands.telemetry import StrandsTelemetry",
        "import os",
        "import json",
        "import argparse",
        "from typing import Dict, List, Optional, Any, Union"
      ]
    },
    "core_functions": [
      {
        "function_name": "process_video",
        "purpose": "处理视频会议文件并生成会议纪要",
        "parameters": [
          {
            "name": "video_path",
            "type": "str",
            "description": "视频文件路径",
            "required": true
          },
          {
            "name": "meeting_title",
            "type": "Optional[str]",
            "description": "会议标题",
            "required": false
          },
          {
            "name": "meeting_date",
            "type": "Optional[str]",
            "description": "会议日期",
            "required": false
          },
          {
            "name": "participants",
            "type": "Optional[List[str]]",
            "description": "参会人员列表",
            "required": false
          },
          {
            "name": "language_code",
            "type": "str",
            "description": "语言代码，默认为中文",
            "required": false
          },
          {
            "name": "format_type",
            "type": "str",
            "description": "会议纪要格式类型（standard, detailed, summary）",
            "required": false
          },
          {
            "name": "output_dir",
            "type": "Optional[str]",
            "description": "输出目录路径",
            "required": false
          }
        ],
        "return_type": "Dict[str, Any]",
        "return_description": "包含处理结果的字典",
        "implementation_notes": [
          "构建结构化的用户输入，包含所有必要参数",
          "调用Agent处理请求",
          "尝试从响应中提取JSON结果",
          "处理可能的错误情况"
        ]
      },
      {
        "function_name": "main",
        "purpose": "命令行界面入口点",
        "parameters": [],
        "return_type": "None",
        "return_description": "无返回值",
        "implementation_notes": [
          "解析命令行参数",
          "支持交互模式和批处理模式",
          "调用process_video函数处理视频",
          "格式化输出处理结果"
        ]
      }
    ],
    "tool_integration": {
      "custom_tools": [
        "extract_audio_from_video - 从视频中提取音频",
        "transcribe_audio - 将音频转换为文本",
        "generate_meeting_minutes - 根据转录文本生成会议纪要",
        "process_video_to_minutes - 一站式处理从视频到会议纪要的全流程",
        "validate_video_file - 验证视频文件有效性和格式"
      ],
      "system_tools": [
        "file_read - 读取文件内容",
        "current_time - 获取当前时间"
      ],
      "strands_tools": [],
      "integration_notes": [
        "通过提示词模板中的tools_dependencies配置集成工具",
        "工具调用通过Agent的LLM能力自动处理",
        "所有工具都通过JSON格式进行数据交换"
      ]
    },
    "configuration": {
      "environment_variables": [
        "BYPASS_TOOL_CONSENT=true - 绕过工具使用确认",
        "OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318 - 遥测数据导出端点"
      ],
      "model_configuration": {
        "model_name": "us.anthropic.claude-3-7-sonnet-20250219-v1:0",
        "max_tokens": 60000,
        "temperature": 0.3,
        "top_p": 0.8
      },
      "streaming_config": {
        "enabled": true,
        "chunk_size": 1024
      }
    },
    "error_handling": {
      "exception_types": [
        "json.JSONDecodeError - JSON解析错误",
        "Exception - 通用异常捕获"
      ],
      "error_responses": [
        "返回包含错误信息和错误类型的JSON结构",
        "命令行界面中提供友好的错误提示"
      ],
      "recovery_strategies": [
        "尝试多种方式解析Agent响应",
        "在处理失败时保留已完成步骤的结果"
      ]
    },
    "testing": {
      "test_cases": [
        "处理有效视频文件并生成会议纪要",
        "处理不支持的视频格式",
        "处理无音频的视频文件",
        "处理超大视频文件",
        "测试不同语言和格式类型"
      ],
      "test_scenarios": [
        "命令行批处理模式",
        "命令行交互模式",
        "通过API调用"
      ],
      "validation_criteria": [
        "成功提取音频",
        "准确的语音转文本",
        "生成符合格式要求的会议纪要",
        "正确处理错误情况"
      ]
    },
    "deployment": {
      "deployment_requirements": [
        "Python 3.13+",
        "FFmpeg库",
        "AWS账户配置（用于Transcribe和Bedrock服务）",
        "Strands SDK"
      ],
      "runtime_dependencies": [
        "boto3",
        "ffmpeg-python",
        "strands"
      ],
      "performance_considerations": [
        "视频文件大小对处理时间的影响",
        "AWS服务的响应时间",
        "临时文件的磁盘空间使用"
      ]
    },
    "development_notes": "在开发过程中，我们基于document_processor_agent模板构建了会议纪要生成智能体，并添加了视频处理和音频转文本功能。我们通过提示词模板集成了自定义开发的视频处理工具，这些工具负责视频验证、音频提取、语音转文本和会议纪要生成。智能体提供了命令行界面，支持交互模式和批处理模式，方便用户根据不同需求使用。为了提高用户体验，我们实现了详细的进度反馈和错误处理机制，确保用户能够清晰地了解处理状态和可能的问题。我们还优化了JSON格式的结果输出，便于后续处理和集成。在错误处理方面，我们实现了多层次的异常捕获和恢复策略，确保即使在某些步骤失败的情况下，也能保留已完成步骤的结果。"
  }
}