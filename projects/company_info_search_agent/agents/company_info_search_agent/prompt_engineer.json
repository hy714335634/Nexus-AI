{
  "prompt_design": {
    "project_name": "company_info_search_agent",
    "agent_name": "company_info_search_agent",
    "version": "1.0",
    "date": "2025-09-30",
    "design_overview": "为company_info_search_agent设计提示词模板，使其能够读取Excel表格中的公司信息，通过多种搜索引擎查询公司详细信息，并将结果输出为Excel表格",
    "design_goals": [
      "明确定义Agent角色为公司信息搜索与分析专家",
      "提供清晰的工作流程指导",
      "定义详细的输入输出格式",
      "包含完整的错误处理策略",
      "整合项目工具依赖"
    ],
    "prompt_structure": {
      "role_definition": "定义Agent为公司信息搜索与分析专家，具备专注、细致、高效、适应性强和客观的特质",
      "core_responsibilities": [
        "Excel文件读取与解析",
        "多搜索引擎集成与查询",
        "深度网页内容检索",
        "公司信息提取与汇总",
        "缓存机制与任务进度跟踪",
        "分批处理与Excel输出"
      ],
      "professional_capabilities": [
        "多搜索引擎协调与切换",
        "公司信息结构化提取",
        "中英文公司信息处理",
        "大规模数据处理与优化",
        "网页内容深度解析"
      ],
      "workflow": [
        "初始化阶段：接收用户输入、验证文件、检查缓存、创建任务",
        "公司信息查询阶段：批次处理、搜索查询、深度检索、信息提取、缓存结果",
        "结果输出阶段：批次输出、检查完成状态、合并结果、生成报告",
        "错误处理阶段：检测错误、切换引擎、记录失败、恢复处理"
      ],
      "input_requirements": [
        "Excel文件路径：包含公司名称字段的Excel文件",
        "任务ID（可选）：用于断点续传",
        "搜索引擎优先级（可选）：指定搜索引擎顺序",
        "API密钥（可选）：用于商业搜索引擎",
        "批处理大小（可选）：控制批处理数量"
      ],
      "output_format": [
        "中间CSV文件：分批处理结果",
        "最终Excel文件：包含完整查询结果的表格",
        "进度报告：处理状态统计",
        "错误日志：查询失败记录"
      ],
      "capability_boundaries": [
        "只能获取公开可访问的信息",
        "遵循搜索引擎使用政策和速率限制",
        "处理大量数据时受token限制",
        "深度检索受网站反爬虫措施限制",
        "依赖外部搜索引擎API",
        "无法获取非公开信息",
        "不进行实时数据更新"
      ],
      "error_handling": [
        "搜索引擎错误处理：自动切换备用引擎",
        "网络连接错误：重试机制与错误信息",
        "文件格式错误：错误位置和修复建议",
        "API限制错误：限制信息和恢复建议",
        "处理失败记录：记录失败信息供后续处理"
      ],
      "tool_usage_guide": [
        "excel_reader工具：读取Excel表格",
        "search_engine_client工具：多引擎搜索",
        "company_search工具：公司信息查询",
        "cache_manager工具：管理缓存和任务进度",
        "excel_writer工具：生成Excel输出"
      ],
      "quality_standards": [
        "信息准确性：确保信息准确可靠",
        "信息全面性：获取所需全部信息字段",
        "处理效率：优化速度和资源利用",
        "容错能力：在错误时能够恢复",
        "输出质量：格式规范、内容完整"
      ]
    },
    "template_customization": {
      "base_template": "自定义开发",
      "customization_rationale": "基于项目需求和系统架构文档，开发了专门针对公司信息搜索与分析的提示词模板，确保与项目工具和工作流程完全匹配",
      "key_modifications": [
        "定义了专门的公司信息搜索与分析专家角色",
        "设计了四阶段工作流程：初始化、查询、输出、错误处理",
        "定义了详细的Excel输入输出格式",
        "整合了项目特定的工具依赖",
        "添加了缓存机制和分批处理的指导"
      ]
    },
    "prompt_metadata": {
      "tags": ["data_analysis", "web_search", "company_research", "excel_processing"],
      "supported_models": ["us.anthropic.claude-3-7-sonnet-20250219-v1:0"],
      "tools_dependencies": [
        "strands_tools/file_read",
        "strands_tools/file_write",
        "strands_tools/current_time",
        "strands_tools/http_request",
        "generated_tools/company_info_search_agent/excel_reader/excel_reader",
        "generated_tools/company_info_search_agent/excel_reader/excel_reader_batch",
        "generated_tools/company_info_search_agent/excel_reader/excel_get_structure",
        "generated_tools/company_info_search_agent/search_engine_client/multi_engine_search",
        "generated_tools/company_info_search_agent/search_engine_client/serpapi_search",
        "generated_tools/company_info_search_agent/search_engine_client/aws_bedrock_search",
        "generated_tools/company_info_search_agent/search_engine_client/web_page_extractor",
        "generated_tools/company_info_search_agent/company_search/company_search",
        "generated_tools/company_info_search_agent/company_search/multi_engine_company_search",
        "generated_tools/company_info_search_agent/company_search/company_info_extractor",
        "generated_tools/company_info_search_agent/cache_manager/cache_company_info",
        "generated_tools/company_info_search_agent/cache_manager/cache_task_progress",
        "generated_tools/company_info_search_agent/cache_manager/get_company_info",
        "generated_tools/company_info_search_agent/cache_manager/get_task_progress",
        "generated_tools/company_info_search_agent/cache_manager/list_cached_companies",
        "generated_tools/company_info_search_agent/cache_manager/export_results_to_csv",
        "generated_tools/company_info_search_agent/cache_manager/generate_task_report",
        "generated_tools/company_info_search_agent/excel_writer/excel_writer",
        "generated_tools/company_info_search_agent/excel_writer/excel_append_sheet",
        "generated_tools/company_info_search_agent/excel_writer/merge_csv_to_excel",
        "generated_tools/company_info_search_agent/excel_writer/create_company_report"
      ]
    },
    "testing_scenarios": [
      {
        "scenario": "基本功能测试",
        "description": "测试基本的Excel读取、公司信息查询和Excel输出功能",
        "input": "提供包含5家公司信息的Excel文件",
        "expected_output": "包含5家公司详细信息的Excel文件",
        "evaluation_criteria": "信息完整性、准确性和格式规范性"
      },
      {
        "scenario": "多搜索引擎切换测试",
        "description": "测试在一个搜索引擎失败时自动切换到另一个搜索引擎",
        "input": "提供包含公司信息的Excel文件，并故意使第一个搜索引擎失败",
        "expected_output": "成功切换到备用搜索引擎并完成查询",
        "evaluation_criteria": "错误处理能力和查询可靠性"
      },
      {
        "scenario": "缓存和断点续传测试",
        "description": "测试任务中断后能否从断点继续",
        "input": "提供包含多家公司信息的Excel文件，中途中断任务，然后使用相同任务ID继续",
        "expected_output": "从上次中断点继续处理并完成任务",
        "evaluation_criteria": "缓存机制有效性和任务恢复能力"
      },
      {
        "scenario": "大规模数据测试",
        "description": "测试处理大量公司信息的能力",
        "input": "提供包含100家公司信息的Excel文件",
        "expected_output": "成功分批处理并输出完整结果",
        "evaluation_criteria": "分批处理能力、内存管理和处理效率"
      },
      {
        "scenario": "错误处理测试",
        "description": "测试各种错误情况的处理能力",
        "input": "提供格式错误的Excel文件或无效的公司名称",
        "expected_output": "提供明确的错误信息和处理建议",
        "evaluation_criteria": "错误检测能力和用户指导质量"
      }
    ],
    "prompt_artifacts": [
      {
        "artifact_name": "company_info_search_agent.yaml",
        "artifact_type": "prompt_template",
        "artifact_path": "prompts/generated_agents_prompts/company_info_search_agent/company_info_search_agent.yaml",
        "description": "公司信息搜索与分析专家的提示词模板",
        "status": "completed"
      }
    ]
  },
  "design_rationale": "本提示词设计基于公司信息搜索与分析专家的角色定位，明确定义了Agent的职责、能力、工作流程和输入输出规范。设计重点关注四个核心方面：1) 多搜索引擎集成与切换机制，确保查询可靠性；2) 深度内容检索，获取更全面的公司信息；3) 缓存机制和任务进度跟踪，支持大规模数据处理和断点续传；4) 分批处理和输出策略，避免token限制和内存问题。提示词结构清晰，包含角色定义、核心职责、专业能力、工作流程、输入要求、输出格式、能力边界、错误处理策略、工具使用指南和质量标准等关键部分，为Agent提供了全面的工作指导。同时，提示词整合了项目中开发的所有工具，确保Agent能够充分利用这些工具完成任务。提示词设计遵循了专业性、清晰性、结构化、可维护性和可测试性的原则，为Agent提供了明确的执行框架和质量标准。"
}