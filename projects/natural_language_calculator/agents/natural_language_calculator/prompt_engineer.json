{
  "prompt_engineering": {
    "project_name": "natural_language_calculator",
    "agent_name": "natural_language_calculator",
    "version": "1.0",
    "date": "2025-11-27",
    "overview": "为自然语言计算器Agent设计专业的提示词模板，使其能够理解中文自然语言数学表达式，执行基本四则运算，并返回准确结果",
    "design_principles": [
      "明确角色定位 - 将Agent定位为专业的自然语言数学计算器",
      "功能聚焦 - 专注于中文自然语言数学表达式解析和计算",
      "用户友好 - 提供清晰的输出格式和错误处理",
      "工具集成 - 充分利用nl_calculator_tool工具集",
      "行为规范 - 明确定义计算器的行为边界和响应方式"
    ],
    "prompt_template": {
      "name": "natural_language_calculator",
      "description": "自然语言数学计算器，能够理解中文数学表达式并执行基本四则运算",
      "category": "calculator",
      "file_path": "prompts/generated_agents_prompts/natural_language_calculator/natural_language_calculator.yaml",
      "system_prompt_components": [
        {
          "component": "角色定义",
          "content": "专业的自然语言数学计算器，能够理解并解析中文自然语言数学表达式，执行基本四则运算",
          "rationale": "明确Agent的专业身份，强调其核心功能是理解中文表达式和执行数学计算"
        },
        {
          "component": "核心能力",
          "content": "列举6项核心能力，包括理解中文表达式、转换中文数字、识别运算符、执行计算等",
          "rationale": "详细定义Agent的具体能力范围，让模型清楚自己能做什么"
        },
        {
          "component": "工作流程",
          "content": "5步工作流程，从分析表达式到返回结果的完整过程",
          "rationale": "提供清晰的步骤化流程指导，确保模型按照正确的顺序执行任务"
        },
        {
          "component": "输出规范",
          "content": "定义成功和失败情况的输出格式要求",
          "rationale": "确保Agent的输出一致、清晰，易于用户理解"
        },
        {
          "component": "行为准则",
          "content": "5项行为准则，强调准确性、友好性、简洁性、专注性和安全性",
          "rationale": "规范Agent的行为方式，确保其符合专业计算器的定位"
        },
        {
          "component": "限制条件",
          "content": "明确5项功能限制，避免超出能力范围",
          "rationale": "明确边界条件，防止用户期望过高或使用不当"
        },
        {
          "component": "工具使用指导",
          "content": "指导使用natural_language_calculator工具进行计算",
          "rationale": "确保Agent知道如何使用正确的工具完成计算任务"
        }
      ],
      "environment_configurations": {
        "development": {
          "max_tokens": 4096,
          "temperature": 0.3,
          "streaming": false,
          "rationale": "开发环境配置适中的token限制，低温度保证计算准确性"
        },
        "production": {
          "max_tokens": 60000,
          "temperature": 0.3,
          "streaming": false,
          "rationale": "生产环境提供更大的token限制以处理复杂表达式，保持低温度确保准确性"
        },
        "testing": {
          "max_tokens": 2048,
          "temperature": 0.3,
          "streaming": false,
          "rationale": "测试环境使用较小的token限制，保持低温度以便于验证计算准确性"
        }
      },
      "tools_dependencies": [
        {
          "tool": "strands_tools/calculator",
          "usage": "基础计算功能支持",
          "required": true
        },
        {
          "tool": "strands_tools/current_time",
          "usage": "获取当前时间",
          "required": true
        },
        {
          "tool": "generated_tools/natural_language_calculator/nl_calculator_tool/natural_language_calculator",
          "usage": "一站式自然语言数学表达式解析和计算",
          "required": true
        },
        {
          "tool": "generated_tools/natural_language_calculator/nl_calculator_tool/parse_natural_language_math",
          "usage": "仅解析自然语言数学表达式",
          "required": false
        },
        {
          "tool": "generated_tools/natural_language_calculator/nl_calculator_tool/calculate_math_expression",
          "usage": "执行数学运算",
          "required": false
        },
        {
          "tool": "generated_tools/natural_language_calculator/nl_calculator_tool/convert_chinese_number",
          "usage": "中文数字转换",
          "required": false
        },
        {
          "tool": "generated_tools/natural_language_calculator/nl_calculator_tool/validate_math_expression",
          "usage": "验证表达式有效性",
          "required": false
        },
        {
          "tool": "generated_tools/natural_language_calculator/nl_calculator_tool/get_supported_operators",
          "usage": "获取支持的运算符列表",
          "required": false
        },
        {
          "tool": "generated_tools/natural_language_calculator/nl_calculator_tool/batch_calculate",
          "usage": "批量计算多个表达式",
          "required": false
        },
        {
          "tool": "generated_tools/natural_language_calculator/nl_calculator_tool/get_calculator_help",
          "usage": "获取计算器帮助信息",
          "required": false
        }
      ],
      "model_requirements": {
        "model_id": "global.anthropic.claude-sonnet-4-5-20250929-v1:0",
        "rationale": "选择Claude Sonnet 4.5模型，具备优秀的中文理解能力和数学计算能力，适合处理自然语言数学表达式"
      }
    },
    "testing_and_validation": [
      {
        "test_case": "简单加法",
        "input": "一加一等于几",
        "expected_output": "答案是：2",
        "rationale": "测试基本中文数字加法"
      },
      {
        "test_case": "混合减法",
        "input": "10减去5",
        "expected_output": "答案是：5",
        "rationale": "测试阿拉伯数字与中文运算符混合"
      },
      {
        "test_case": "中文乘法",
        "input": "三乘以四",
        "expected_output": "答案是：12",
        "rationale": "测试中文数字乘法"
      },
      {
        "test_case": "除法运算",
        "input": "二十除以四",
        "expected_output": "答案是：5",
        "rationale": "测试中文复合数字除法"
      },
      {
        "test_case": "错误输入",
        "input": "三加",
        "expected_behavior": "友好提示错误，指出表达式不完整",
        "rationale": "测试错误处理能力"
      },
      {
        "test_case": "除零错误",
        "input": "10除以0",
        "expected_behavior": "提示除数不能为0",
        "rationale": "测试特殊错误处理"
      }
    ],
    "iterations": [
      {
        "version": "1.0",
        "date": "2025-11-27",
        "changes": "初始版本",
        "rationale": "基于项目需求和系统架构设计创建初始提示词模板"
      }
    ],
    "design_notes": "提示词设计遵循了需求分析和系统架构设计的指导原则，重点强调了Agent作为自然语言数学计算器的专业角色定位，明确了其核心能力和工作流程。系统提示词包含了详细的行为准则和限制条件，确保Agent专注于数学计算任务。工具依赖部分集成了nl_calculator_tool的全部功能，特别是natural_language_calculator作为主要计算工具。环境配置考虑了不同场景的需求，保持低温度以确保计算准确性。Claude Sonnet 4.5模型的选择基于其优秀的中文理解能力和数学计算能力，适合处理自然语言数学表达式。测试用例覆盖了常见的四则运算场景和错误处理情况，确保Agent能够正确理解和执行用户的计算需求。"
  }
}