{"tool_development":{"development_overview":{"project_name":"pubmed_literature_review_agent","version":"1.0","date":"2025-10-29","development_scope":"开发PMC文献检索工具、文献分析工具和评估格式化工具，用于验证科研文献内容的准确性，支持高级搜索选项和缓存机制，以及对科研文献进行多维度分析和评估，并生成标准化的JSON格式评估报告","design_principles":["功能完整性：实现所有需求的搜索、检索、分析和格式化功能","缓存机制：通过research_id参数支持缓存和上下文管理","错误处理：健壮的异常处理和恢复机制","性能优化：合理使用缓存和API限速","安全性：防止路径遍历和其他安全问题","多维度评估：提供全面的文献质量评估框架","标准化输出：提供结构化的JSON评估报告"],"key_decisions":["使用NCBI E-utilities API作为数据源","实现基于research_id的缓存目录结构","添加缓存过期和清理机制","提供完整的错误处理和日志记录","支持高级搜索选项和相关性评分","设计多维度文献评估框架，包括结构完整性、科学准确性等","设计标准化的JSON评估报告格式，支持验证和美化"]},"tools":[{"tool_name":"pmc_literature_search","description":"搜索PubMed Central (PMC)数据库以验证科研文献内容的准确性，支持缓存和上下文管理","function_signature":"pmc_literature_search(query: str, research_id: Optional[str] = None, author: Optional[str] = None, journal: Optional[str] = None, year: Optional[str] = None, max_results: int = 10, full_text: bool = False) -> str","parameters":[{"name":"query","type":"str","description":"搜索查询字符串","required":true},{"name":"research_id","type":"Optional[str]","description":"研究ID，用于指定缓存目录","required":false},{"name":"author","type":"Optional[str]","description":"作者筛选","required":false},{"name":"journal","type":"Optional[str]","description":"期刊筛选","required":false},{"name":"year","type":"Optional[str]","description":"发表年份筛选","required":false},{"name":"max_results","type":"int","description":"最大结果数，默认10","required":false},{"name":"full_text","type":"bool","description":"是否获取全文，默认False","required":false}],"return_type":"str","return_description":"包含搜索结果的JSON字符串，包括文章标题、作者、摘要、DOI、相关性评分等信息","dependencies":["requests","xml.etree.ElementTree","json","os","time","logging","hashlib","shutil","pathlib","datetime"],"implementation_notes":["使用NCBI E-utilities API进行搜索和数据获取","实现基于research_id的缓存机制","支持高级搜索选项（作者、期刊、年份）","提供相关性评分","处理API错误和限制"],"error_handling":["捕获并处理API请求异常","处理XML解析错误","处理缓存读写错误","提供详细的错误信息和日志"],"usage_examples":["pmc_literature_search(query=\"covid-19 vaccine efficacy\")","pmc_literature_search(query=\"cancer treatment\", author=\"Smith J\", max_results=20)","pmc_literature_search(query=\"diabetes\", journal=\"Nature\", year=\"2023\", research_id=\"diabetes_study\")"]}
,{"tool_name":"pmc_get_article_details","description":"获取PMC文章的详细信息，包括完整的元数据和摘要","function_signature":"pmc_get_article_details(pmcid: str, research_id: Optional[str] = None) -> str","parameters":[{"name":"pmcid","type":"str","description":"PMC文章ID，格式为PMC后跟数字（如PMC123456）","required":true},{"name":"research_id","type":"Optional[str]","description":"研究ID，用于指定缓存目录","required":false}],"return_type":"str","return_description":"包含文章详细信息的JSON字符串","dependencies":["requests","xml.etree.ElementTree","json","os","time","logging","hashlib","datetime"],"implementation_notes":["使用NCBI E-utilities API获取文章详情","支持缓存机制","提取完整的元数据和摘要"],"error_handling":["捕获并处理API请求异常","处理XML解析错误","处理缓存读写错误"],"usage_examples":["pmc_get_article_details(pmcid=\"PMC7745045\")","pmc_get_article_details(pmcid=\"7745045\", research_id=\"covid_research\")"]}
,{"tool_name":"pmc_clear_cache","description":"清理PMC文献搜索缓存","function_signature":"pmc_clear_cache(research_id: Optional[str] = None, force_all: bool = False) -> str","parameters":[{"name":"research_id","type":"Optional[str]","description":"研究ID，指定要清理的缓存目录","required":false},{"name":"force_all","type":"bool","description":"是否强制清理所有缓存，默认False","required":false}],"return_type":"str","return_description":"操作结果的JSON字符串","dependencies":["json","shutil","logging","pathlib"],"implementation_notes":["支持清理特定research_id的缓存","支持清理所有缓存","支持清理默认缓存"],"error_handling":["捕获并处理文件系统操作异常","提供详细的错误信息和日志"],"usage_examples":["pmc_clear_cache(research_id=\"covid_research\")","pmc_clear_cache(force_all=True)"]}
,{"tool_name":"literature_analyzer","description":"对科研文献进行多维度分析和评估，包括结构完整性、科学准确性、方法论合理性、引用分析等","function_signature":"literature_analyzer(content: str, research_id: Optional[str] = None, dimensions: Optional[List[str]] = None, detailed_analysis: bool = True) -> str","parameters":[{"name":"content","type":"str","description":"文献内容（必需）","required":true},{"name":"research_id","type":"Optional[str]","description":"研究ID，用于指定缓存目录（可选）","required":false},{"name":"dimensions","type":"Optional[List[str]]","description":"要评估的维度列表（可选，默认全部维度）","required":false},{"name":"detailed_analysis","type":"bool","description":"是否生成详细分析（可选，默认True）","required":false}],"return_type":"str","return_description":"包含多维度评估结果的JSON对象，包括各维度的评分、详细分析和问题清单","dependencies":["json","os","re","hashlib","pathlib","datetime","logging"],"implementation_notes":["支持多维度评估框架，包括结构完整性、科学准确性、方法论合理性、引用质量、结论有效性和信息完整性","实现基于research_id的缓存机制","使用正则表达式分析文献结构和内容","提供详细的问题分析和建议","生成总体评分和评级"],"error_handling":["捕获并处理文本解析异常","处理缓存读写错误","提供详细的错误信息和日志"],"usage_examples":["literature_analyzer(content=\"完整的文献内容\")","literature_analyzer(content=\"文献内容\", research_id=\"covid_research\")","literature_analyzer(content=\"文献内容\", dimensions=[\"structure_completeness\", \"scientific_accuracy\"])","literature_analyzer(content=\"文献内容\", detailed_analysis=False)"]}
,{"tool_name":"assessment_formatter","description":"将文献评估结果转换为标准化的JSON格式，支持多维度评估结果的结构化展示和存储","function_signature":"assessment_formatter(assessment_data: Union[Dict[str, Any], str], research_id: Optional[str] = None, metadata: Optional[Dict[str, Any]] = None, format_output: bool = True, validate_schema: bool = True) -> str","parameters":[{"name":"assessment_data","type":"Union[Dict[str, Any], str]","description":"评估数据（必需），可以是字典或JSON字符串","required":true},{"name":"research_id","type":"Optional[str]","description":"研究ID，用于指定缓存目录（可选）","required":false},{"name":"metadata","type":"Optional[Dict[str, Any]]","description":"元数据对象（可选）","required":false},{"name":"format_output","type":"bool","description":"是否美化输出（可选，默认True）","required":false},{"name":"validate_schema","type":"bool","description":"是否验证JSON结构（可选，默认True）","required":false}],"return_type":"str","return_description":"标准化的JSON格式评估报告，包含总体评分、各维度评分、问题列表和修正建议","dependencies":["json","os","hashlib","pathlib","datetime","logging","jsonschema"],"implementation_notes":["设计标准化的JSON评估报告结构","实现基于research_id的缓存机制","支持JSON格式验证","提供美化输出选项","从评估数据中提取问题和建议","生成唯一的评估ID","添加元数据支持"],"error_handling":["捕获并处理JSON解析异常","处理缓存读写错误","处理模式验证错误","提供详细的错误信息和日志","防止路径遍历攻击"],"usage_examples":["assessment_formatter(assessment_data=literature_analyzer_result)","assessment_formatter(assessment_data=json_string, research_id=\"covid_research\")","assessment_formatter(assessment_data=result, metadata={\"literature_title\": \"COVID-19 Study\"})","assessment_formatter(assessment_data=result, format_output=False, validate_schema=False)"]}],"code_quality":{"code_standards":["遵循PEP 8编码规范","使用类型注解提高代码可读性","详细的文档字符串","合理的函数和变量命名","适当的代码注释"],"testing_strategy":["单元测试覆盖主要功能","异常处理测试","缓存机制测试","API响应模拟测试","文本解析和评估准确性测试","JSON格式验证测试"],"performance_considerations":["实现缓存机制减少API调用","批量处理API请求减少网络开销","定期清理过期缓存","API请求限速遵守NCBI使用政策","优化文本解析算法提高性能","优化JSON处理性能"],"security_measures":["防止路径遍历攻击","安全的缓存文件操作","API密钥保护","错误信息安全处理","输入验证和清理","JSON模式验证"]},"integration_details":{"aws_services":[],"external_libraries":["requests","urllib3","jsonschema"],"api_endpoints":["NCBI E-utilities API"],"data_formats":["JSON","XML"]},"development_notes":"开发过程中特别关注了缓存机制的实现，确保在多次交互中保持上下文连贯性。同时，为了提高性能和减少API调用，实现了基于文件系统的缓存，并添加了缓存过期和清理机制。在错误处理方面，采用了全面的异常捕获和日志记录，确保系统在各种异常情况下都能提供有用的反馈。此外，为了遵守NCBI API使用政策，实现了请求限速和批量处理机制。文献分析工具采用了多维度评估框架，通过正则表达式和文本分析技术，对文献的结构完整性、科学准确性、方法论合理性等方面进行全面评估，并提供详细的问题分析和改进建议。新增的评估格式化工具实现了标准化的JSON输出，支持多维度评估结果的结构化展示，包括总体评分、各维度评分、问题列表和修正建议，同时支持元数据添加、JSON格式验证和美化输出，为用户提供清晰易读的评估报告。"}}