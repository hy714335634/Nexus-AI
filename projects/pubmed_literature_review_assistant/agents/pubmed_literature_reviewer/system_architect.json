{
  "system_design": {
    "design_overview": {
      "project_name": "pubmed_literature_review_agent",
      "version": "1.0",
      "date": "2025-10-29",
      "design_scope": "设计专业的科研文献/报告审核Agent，能够对用户提供的文献进行多维度评估，结合PMC文献检索工具验证内容准确性，识别信息不全和幻觉问题，提供JSON结构化输出和修正建议，支持research_id参数指定缓存目录",
      "design_principles": [
        "专业性：从审稿人角度提供专业、犀利但有建设性的评价",
        "多维度评估：从多个专业维度全面评估文献质量",
        "准确性验证：利用PMC文献检索工具验证内容准确性",
        "结构化输出：提供JSON格式的结构化评估结果",
        "可操作性：提供具体的修正建议而非笼统评价",
        "上下文连贯性：通过research_id支持多次交互中保持上下文"
      ],
      "key_decisions": [
        "采用单Agent架构设计，所有功能围绕文献审核这一核心任务",
        "基于PubMed文献搜索专家模板进行定制开发",
        "设计支持research_id参数的缓存机制",
        "定义多维度评估框架，包括科学准确性、方法论合理性等维度",
        "设计JSON输出结构，确保评估结果清晰易懂",
        "实现与PMC文献检索工具的集成接口"
      ],
      "workflow_type": "single_agent",
      "recommended_templates": ["pubmed_literature_agent"]
    },
    "architecture": {
      "system_context": "该Agent运行在Nexus-AI平台上，作为一个独立的文献审核服务，接收用户提供的科研文献，结合PMC文献检索工具进行分析和评估，输出结构化的评估结果和修正建议。系统支持通过research_id参数指定缓存和上下文工作目录，实现多次交互的连贯性。",
      "agent_topology": "单Agent架构，内部集成多个功能模块，包括文献解析模块、多维度评估模块、PMC文献检索集成模块、幻觉检测模块、结果生成模块和缓存管理模块。",
      "interaction_model": "用户提供文献内容和可选的research_id参数，Agent接收并解析文献，进行多维度评估，利用PMC文献检索工具验证内容准确性，识别潜在问题，最后生成JSON格式的评估结果和修正建议。用户可以使用相同的research_id进行多次交互，系统将保持上下文连贯性。",
      "technology_stack": {
        "sdk": "Strands SDK",
        "runtime": "Local",
        "integrations": ["PMC文献检索工具"]
      }
    },
    "agents": [
      {
        "name": "pubmed_literature_reviewer",
        "purpose": "专业的科研文献/报告审核Agent，能够对用户提供的文献进行多维度评估，结合PMC文献检索工具验证内容准确性，识别信息不全和幻觉问题，提供JSON结构化输出和修正建议",
        "responsibilities": [
          "接收和解析用户提供的文献内容",
          "从多个维度评估文献质量",
          "利用PMC文献检索工具验证文献内容的准确性",
          "识别文献中的信息不全、幻觉等问题",
          "生成JSON格式的评估结果和修正建议",
          "管理缓存和上下文工作目录"
        ],
        "interfaces": {
          "inputs": [
            "文献内容（文本格式）",
            "research_id参数（可选，用于指定缓存和上下文工作目录）"
          ],
          "outputs": [
            "JSON格式的评估结果，包括总体评分、各维度评分、问题列表和修正建议"
          ]
        },
        "dependencies": ["PMC文献检索工具"],
        "implementation_notes": [
          "基于PubMed文献搜索专家模板进行定制开发",
          "需要实现与PMC文献检索工具的集成接口",
          "需要设计多维度评估框架和评分标准",
          "需要实现缓存机制，支持research_id参数",
          "评估结果应包含具体的问题位置、问题描述和改进建议"
        ],
        "recommended_template": "pubmed_literature_agent"
      }
    ],
    "data_models": [
      {
        "name": "LiteratureInput",
        "schema": "包含用户提供的文献内容和可选的research_id参数",
        "validation_rules": [
          "文献内容不能为空",
          "research_id如果提供，必须是有效的字符串"
        ],
        "relationships": []
      },
      {
        "name": "AssessmentResult",
        "schema": "包含评估结果的JSON结构，包括总体评分、各维度评分、问题列表和修正建议",
        "validation_rules": [
          "总体评分范围为0-100",
          "各维度评分范围为0-100",
          "问题列表不能为空",
          "每个问题必须包含位置、描述和建议"
        ],
        "relationships": ["基于LiteratureInput生成"]
      },
      {
        "name": "CacheData",
        "schema": "缓存数据结构，包含research_id、文献内容、评估结果和时间戳",
        "validation_rules": [
          "research_id必须唯一",
          "缓存数据必须包含时间戳"
        ],
        "relationships": ["关联LiteratureInput和AssessmentResult"]
      }
    ],
    "interaction_flows": [
      {
        "name": "文献评估流程",
        "description": "用户提供文献内容和可选的research_id参数，Agent进行评估并返回结果",
        "steps": [
          {
            "step": "接收用户输入",
            "agent": "pubmed_literature_reviewer",
            "action": "解析用户提供的文献内容和research_id参数",
            "data": "LiteratureInput"
          },
          {
            "step": "检查缓存",
            "agent": "pubmed_literature_reviewer",
            "action": "如果提供了research_id，检查是否存在相关缓存",
            "data": "research_id"
          },
          {
            "step": "文献解析",
            "agent": "pubmed_literature_reviewer",
            "action": "解析文献内容，提取关键信息",
            "data": "文献内容"
          },
          {
            "step": "多维度评估",
            "agent": "pubmed_literature_reviewer",
            "action": "从科学准确性、方法论合理性、结论有效性、创新性、完整性等维度评估文献",
            "data": "解析后的文献内容"
          },
          {
            "step": "PMC文献检索",
            "agent": "pubmed_literature_reviewer",
            "action": "调用PMC文献检索工具验证文献中的关键声明和数据",
            "data": "需要验证的声明和数据"
          },
          {
            "step": "幻觉检测",
            "agent": "pubmed_literature_reviewer",
            "action": "识别文献中可能存在的幻觉或未经验证的声明",
            "data": "文献内容和PMC检索结果"
          },
          {
            "step": "生成评估结果",
            "agent": "pubmed_literature_reviewer",
            "action": "生成JSON格式的评估结果，包括总体评分、各维度评分、问题列表和修正建议",
            "data": "评估数据和检测结果"
          },
          {
            "step": "更新缓存",
            "agent": "pubmed_literature_reviewer",
            "action": "如果提供了research_id，将评估结果存入缓存",
            "data": "AssessmentResult和research_id"
          },
          {
            "step": "返回结果",
            "agent": "pubmed_literature_reviewer",
            "action": "将评估结果返回给用户",
            "data": "AssessmentResult"
          }
        ]
      }
    ],
    "security_considerations": [
      "用户提交的文献内容应仅用于评估目的，不应被永久存储",
      "research_id相关的缓存数据应有合理的过期策略",
      "应确保缓存目录的访问权限控制",
      "应防止通过research_id参数进行路径遍历攻击"
    ],
    "error_handling": [
      "当文献内容格式不正确或不完整时，应提供明确的错误提示",
      "当文献内容超过模型处理限制时，应建议用户分段提交或提供摘要版本",
      "当PMC检索工具暂时不可用时，应能完成基本的文献评估",
      "应处理各种异常情况，确保系统不会因单点故障而完全失效",
      "当research_id不存在时，应创建新的工作目录"
    ],
    "performance_considerations": [
      "评估过程应在用户可接受的时间内完成，对于标准长度的文献（不超过10000字），评估时间不应超过2分钟",
      "PMC检索应有合理的超时机制，避免因检索延迟导致整体评估失败",
      "缓存机制应能有效提高重复评估的性能",
      "应考虑大型文献的分段处理策略"
    ],
    "monitoring_strategy": [
      "记录评估请求和响应时间，监控系统性能",
      "跟踪PMC检索工具的可用性和响应时间",
      "监控缓存使用情况和命中率",
      "记录评估过程中的异常和错误",
      "收集用户反馈，持续改进评估质量"
    ]
  },
  "design_rationale": "本设计基于需求分析文档，采用单Agent架构，因为所有功能都围绕文献审核这一核心任务，且各功能间有紧密的逻辑关联。选择PubMed文献搜索专家模板作为基础，因为它已经具备了与PubMed相关的功能和工具集成，可以更好地支持文献审核需求。设计中特别关注多维度评估框架，确保能从科学准确性、方法论合理性、结论有效性、创新性、完整性等多个维度全面评估文献质量。同时，设计了支持research_id参数的缓存机制，使系统能在多次交互中保持上下文连贯性，提升用户体验。JSON格式的结构化输出设计确保评估结果清晰易懂，便于用户理解和处理。整体设计遵循专业性、多维度评估、准确性验证、结构化输出、可操作性和上下文连贯性等原则，旨在提供高质量的文献审核服务。"
}