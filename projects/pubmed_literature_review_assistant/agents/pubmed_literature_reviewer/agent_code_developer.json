{
  "agent_code_development": {
    "development_overview": {
      "project_name": "pubmed_literature_review_agent",
      "version": "1.0",
      "date": "2025-10-29",
      "development_scope": "开发专业的科研文献/报告审核Agent，能够根据用户提供的文献，结合PMC文献检索工具，进行犀利的评价与反馈",
      "design_principles": [
        "模块化设计，便于维护和扩展",
        "健壮的错误处理机制",
        "清晰的日志记录",
        "支持缓存机制，提高重复评估的性能",
        "合理的超时机制，避免因检索延迟导致整体评估失败"
      ],
      "key_decisions": [
        "基于PubMed文献搜索专家模板进行定制开发",
        "使用类封装设计，提供多种文献评审功能",
        "实现research_id参数支持，用于指定缓存和上下文工作目录",
        "集成三个核心工具：literature_analyzer、pmc_literature_search和assessment_formatter",
        "提供命令行界面，支持多种操作模式"
      ]
    },
    "agent_implementation": {
      "agent_name": "pubmed_literature_reviewer",
      "file_path": "agents/generated_agents/pubmed_literature_review_agent/pubmed_literature_reviewer.py",
      "main_class": "PubmedLiteratureReviewer",
      "entry_point": "review_literature",
      "dependencies": [
        "nexus_utils.agent_factory",
        "strands.telemetry",
        "strands.session.file_session_manager"
      ],
      "imports": [
        "os", "json", "logging", "uuid", "time", "typing", "pathlib",
        "nexus_utils.agent_factory", "strands.telemetry", "strands.session.file_session_manager"
      ]
    },
    "core_functions": [
      {
        "function_name": "review_literature",
        "purpose": "评审科研文献并提供反馈",
        "parameters": [
          {
            "name": "content",
            "type": "str",
            "description": "文献内容",
            "required": true
          },
          {
            "name": "research_id",
            "type": "Optional[str]",
            "description": "研究ID，用于指定缓存和上下文工作目录",
            "required": false
          }
        ],
        "return_type": "str",
        "return_description": "智能体响应，包含评审结果和修正建议",
        "implementation_notes": [
          "记录开始时间和日志",
          "如果提供了research_id，创建对应的缓存目录",
          "在输入中添加research_id信息",
          "调用智能体处理文献评审",
          "记录完成时间和日志",
          "捕获和处理异常"
        ]
      },
      {
        "function_name": "verify_specific_claims",
        "purpose": "验证文献中的特定声明",
        "parameters": [
          {
            "name": "content",
            "type": "str",
            "description": "文献内容",
            "required": true
          },
          {
            "name": "claims",
            "type": "List[str]",
            "description": "需要验证的声明列表",
            "required": true
          },
          {
            "name": "research_id",
            "type": "Optional[str]",
            "description": "研究ID，用于指定缓存和上下文工作目录",
            "required": false
          }
        ],
        "return_type": "str",
        "return_description": "智能体响应，包含声明验证结果",
        "implementation_notes": [
          "记录日志",
          "格式化声明列表",
          "准备输入，添加research_id信息",
          "调用智能体处理声明验证",
          "捕获和处理异常"
        ]
      },
      {
        "function_name": "compare_literature",
        "purpose": "比较两篇文献的内容和质量",
        "parameters": [
          {
            "name": "content1",
            "type": "str",
            "description": "第一篇文献内容",
            "required": true
          },
          {
            "name": "content2",
            "type": "str",
            "description": "第二篇文献内容",
            "required": true
          },
          {
            "name": "research_id",
            "type": "Optional[str]",
            "description": "研究ID，用于指定缓存和上下文工作目录",
            "required": false
          }
        ],
        "return_type": "str",
        "return_description": "智能体响应，包含文献比较结果",
        "implementation_notes": [
          "记录日志",
          "格式化两篇文献内容",
          "准备输入，添加research_id信息",
          "调用智能体处理文献比较",
          "捕获和处理异常"
        ]
      },
      {
        "function_name": "get_assessment_history",
        "purpose": "获取指定research_id的评估历史",
        "parameters": [
          {
            "name": "research_id",
            "type": "str",
            "description": "研究ID",
            "required": true
          }
        ],
        "return_type": "str",
        "return_description": "评估历史信息",
        "implementation_notes": [
          "记录日志",
          "检查research_id目录是否存在",
          "查找所有assessment文件",
          "读取评估文件内容",
          "提取关键信息并格式化输出",
          "捕获和处理异常"
        ]
      }
    ],
    "tool_integration": {
      "custom_tools": [
        "literature_analyzer",
        "pmc_literature_search",
        "assessment_formatter"
      ],
      "system_tools": [
        "file_read",
        "file_write",
        "current_time"
      ],
      "strands_tools": [],
      "integration_notes": [
        "literature_analyzer工具用于多维度评估文献质量",
        "pmc_literature_search工具用于验证文献中的关键声明和数据",
        "assessment_formatter工具用于生成JSON格式的评估结果",
        "file_read和file_write工具用于读写文件",
        "current_time工具用于获取当前时间"
      ]
    },
    "configuration": {
      "environment_variables": [
        "BYPASS_TOOL_CONSENT",
        "OTEL_EXPORTER_OTLP_ENDPOINT"
      ],
      "model_configuration": {
        "model_name": "us.anthropic.claude-opus-4-20250514-v1:0",
        "max_tokens": 60000,
        "temperature": 0.3,
        "top_p": 0.8
      },
      "streaming_config": {
        "enabled": true,
        "chunk_size": 1024
      }
    },
    "error_handling": {
      "exception_types": [
        "FileNotFoundError",
        "PermissionError",
        "JSONDecodeError",
        "TimeoutError",
        "Exception"
      ],
      "error_responses": [
        "文献评审过程中发生错误",
        "声明验证过程中发生错误",
        "文献比较过程中发生错误",
        "获取评估历史过程中发生错误",
        "读取文件失败"
      ],
      "recovery_strategies": [
        "捕获并记录所有异常",
        "返回友好的错误信息",
        "即使PMC检索工具暂时不可用，也能完成基本的文献评估",
        "对文件操作进行异常处理"
      ]
    },
    "testing": {
      "test_cases": [
        "评审单篇文献",
        "验证特定声明",
        "比较两篇文献",
        "获取评估历史",
        "使用research_id参数"
      ],
      "test_scenarios": [
        "命令行参数测试",
        "文件输入测试",
        "标准输入测试",
        "错误处理测试"
      ],
      "validation_criteria": [
        "评审结果包含总体评估、各维度评分、主要问题、次要问题、优势、验证结果和改进建议",
        "声明验证结果包含支持和反对的证据",
        "文献比较结果包含各维度的比较分析",
        "评估历史信息格式正确",
        "错误信息友好且有用"
      ]
    },
    "deployment": {
      "deployment_requirements": [
        "Python 3.13+",
        "Strands SDK",
        "nexus_utils",
        "文件系统权限"
      ],
      "runtime_dependencies": [
        "nexus_utils.agent_factory",
        "strands.telemetry",
        "strands.session.file_session_manager"
      ],
      "performance_considerations": [
        "缓存机制提高重复评估的性能",
        "合理的超时机制避免因检索延迟导致整体评估失败",
        "对于超长文献，优先评估关键部分"
      ]
    },
    "development_notes": "开发过程中特别关注了多维度评估框架的实现，确保能从科学准确性、方法论合理性、结论有效性、创新性、完整性等多个维度全面评估文献质量。同时，实现了支持research_id参数的缓存机制，使系统能在多次交互中保持上下文连贯性，提升用户体验。为了提高系统的健壮性，添加了完善的错误处理机制，确保即使在部分组件失效的情况下也能提供基本功能。命令行界面设计支持多种操作模式，包括评审文献、验证声明、比较文献和查看评估历史，增强了系统的灵活性和实用性。"
  }
}