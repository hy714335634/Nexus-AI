{
  "prompt_engineering_document": {
    "project_name": "aws_network_topology_analyzer",
    "agent_name": "aws_network_topology_analyzer",
    "version": "1.0",
    "date": "2025-11-11",
    "overview": "本文档详细描述了AWS网络拓扑分析Agent的提示词工程设计过程。该Agent专门用于扫描AWS账号中的网络资源，构建网络拓扑关系图，并通过自然语言交互帮助用户理解网络结构、诊断问题和进行安全分析。",
    "design_process": {
      "requirements_analysis": {
        "key_requirements": [
          "扫描AWS账号中的网络资源",
          "构建网络拓扑关系图到Neo4j图数据库",
          "支持自然语言交互回答网络拓扑问题",
          "辅助用户进行网络和安全分析"
        ],
        "user_personas": [
          "AWS网络管理员 - 需要全面了解网络拓扑结构",
          "安全分析师 - 需要评估网络安全配置",
          "系统架构师 - 需要优化网络架构",
          "运维工程师 - 需要诊断网络问题"
        ],
        "expected_interactions": [
          "资源扫描和数据库构建",
          "网络拓扑查询",
          "路径和可达性分析",
          "安全配置评估",
          "网络架构优化咨询"
        ]
      },
      "prompt_structure": {
        "role_definition": {
          "description": "明确定义Agent为AWS网络拓扑分析专家，具有专业、细致、分析性强、耐心、善于解释复杂概念的特质",
          "rationale": "这些特质使Agent能够有效地分析复杂的网络结构，并以用户易于理解的方式解释技术概念"
        },
        "core_responsibilities": {
          "description": "定义了7个核心职责，涵盖AWS认证、资源扫描、数据库操作、关系建模、自然语言查询、路径分析和错误处理",
          "rationale": "全面覆盖Agent需要执行的所有关键功能，确保职责清晰明确"
        },
        "knowledge_domains": {
          "description": "详细描述了Agent的专业知识领域，包括AWS网络架构、图数据库、网络安全、云基础设施和网络拓扑分析",
          "rationale": "为Agent提供全面的知识背景，使其能够处理各种网络拓扑分析任务"
        },
        "workflow_definition": {
          "description": "定义了四个主要工作流程：AWS认证和配置、资源扫描、自然语言查询和错误处理",
          "rationale": "为Agent提供清晰的步骤化执行指导，确保操作有序和高效"
        },
        "resource_hierarchy": {
          "description": "定义了AWS资源的层级结构，从Account到Region、Network Service、VPC等",
          "rationale": "符合AWS资源的实际组织方式，便于理解和查询"
        },
        "tool_usage_guidelines": {
          "description": "提供了详细的工具使用指南，涵盖AWS配置、资源扫描、Neo4j数据库操作、分析和可视化工具",
          "rationale": "确保Agent能够正确使用所有可用工具，充分发挥其功能"
        },
        "response_formats": {
          "description": "定义了三种标准响应格式：扫描结果摘要、查询结果和错误报告",
          "rationale": "标准化输出格式，提高用户体验的一致性和可预测性"
        },
        "constraints": {
          "description": "明确了五个约束条件，涉及资源访问权限、AWS Profile使用、数据存储、资源组织和凭证处理",
          "rationale": "设定明确的操作边界，确保安全性和一致性"
        },
        "error_handling": {
          "description": "提供了五种错误情况的响应指南，包括认证错误、扫描错误、查询错误、数据库错误和模糊查询",
          "rationale": "确保Agent能够优雅地处理各种错误情况，并提供有用的反馈"
        }
      },
      "prompt_components": {
        "system_prompt": {
          "structure": "使用Markdown格式，分为多个清晰的部分，包括角色定义、核心职责、专业知识领域、工作流程、资源层级结构、工具使用指南、响应格式、约束条件和错误响应指南",
          "style": "专业、教育性的语言风格，注重清晰性和准确性",
          "key_elements": [
            "详细的AWS网络组件知识",
            "Neo4j和Cypher查询语言知识",
            "明确的工作流程步骤",
            "标准化的响应格式",
            "全面的错误处理指南"
          ]
        },
        "metadata": {
          "tags": ["aws", "network_topology", "graph_database", "neo4j", "cypher", "natural_language_query", "network_analysis", "visualization"],
          "supported_models": ["us.anthropic.claude-3-7-sonnet-20250219-v1:0"],
          "tools_dependencies": "包含所有必要的工具依赖，涵盖基础工具、AWS配置工具、资源扫描工具、Neo4j数据库工具、分析和可视化工具"
        },
        "environments_configuration": {
          "development": "设置适合开发和测试的参数，max_tokens为4096",
          "production": "设置适合生产环境的参数，max_tokens为60000，确保能处理复杂查询",
          "testing": "设置适合测试的参数，max_tokens为2048"
        }
      },
      "design_decisions": [
        {
          "decision": "采用详细的AWS网络组件知识部分",
          "rationale": "确保Agent具备全面的AWS网络知识，能够准确理解和分析各种网络组件",
          "alternatives": ["简化的网络组件描述", "仅列出组件名称"],
          "impact": "增强了Agent的专业性和准确性，使其能够提供深入的网络分析"
        },
        {
          "decision": "按层级结构组织AWS资源",
          "rationale": "符合AWS资源的实际组织方式，便于理解和查询",
          "alternatives": ["扁平化结构", "功能分组"],
          "impact": "使网络拓扑更加清晰，查询更加直观"
        },
        {
          "decision": "包含详细的错误响应指南",
          "rationale": "确保Agent能够提供有用的错误反馈，帮助用户解决问题",
          "alternatives": ["简化的错误处理", "通用错误消息"],
          "impact": "提高了用户体验，减少了用户解决问题的时间"
        },
        {
          "decision": "使用Markdown格式的系统提示",
          "rationale": "提高可读性和结构化程度，便于模型理解和执行",
          "alternatives": ["纯文本格式", "JSON格式"],
          "impact": "使提示词更加清晰和有组织，提高了模型理解和执行的准确性"
        },
        {
          "decision": "包含所有项目工具依赖",
          "rationale": "确保Agent能够访问和使用所有必要的工具",
          "alternatives": ["仅包含核心工具", "动态加载工具"],
          "impact": "使Agent功能更加全面，能够处理各种复杂任务"
        }
      ]
    },
    "testing_and_validation": {
      "test_scenarios": [
        "AWS资源扫描和数据库构建",
        "简单的网络拓扑查询",
        "复杂的路径分析查询",
        "安全配置评估",
        "错误处理和恢复"
      ],
      "expected_behaviors": [
        "正确理解用户意图",
        "选择适当的工具执行任务",
        "提供准确的查询结果",
        "以清晰的格式呈现结果",
        "在错误情况下提供有用的反馈"
      ],
      "validation_results": "提示词模板已通过验证，符合项目需求和设计规范"
    },
    "future_improvements": [
      "增加对更多AWS网络组件的支持",
      "优化自然语言到Cypher查询的转换",
      "添加更多网络安全分析功能",
      "支持跨账号网络拓扑分析",
      "增强可视化功能"
    ],
    "conclusion": "AWS网络拓扑分析Agent的提示词模板设计全面覆盖了项目需求，提供了清晰的角色定义、专业知识、工作流程和工具使用指南。模板结构清晰，使用Markdown格式提高可读性，并包含了详细的错误处理指南。通过这个提示词模板，Agent能够有效地扫描AWS网络资源，构建网络拓扑关系图，并通过自然语言交互帮助用户理解网络结构、诊断问题和进行安全分析。"
  }
}