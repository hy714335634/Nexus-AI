{
  "agent_design": {
    "design_overview": {
      "project_name": "aws_network_topology_analyzer",
      "version": "1.0",
      "date": "2025-11-11",
      "design_scope": "设计AWS网络拓扑分析Agent，用于扫描AWS账号中的网络资源，构建网络拓扑关系图，并支持自然语言问答，辅助用户进行网络和安全分析",
      "design_goals": [
        "创建一个能够全面扫描AWS网络资源的智能体",
        "构建准确反映AWS网络拓扑的Neo4j图数据库",
        "提供自然语言交互界面，简化网络拓扑查询",
        "支持网络安全分析和问题诊断",
        "确保数据完整性和关系正确性"
      ],
      "key_design_decisions": [
        {
          "decision": "采用单Agent架构",
          "rationale": "所有功能围绕AWS网络拓扑分析这一核心任务，可由一个集成必要工具的Agent完成",
          "alternatives": ["多Agent协作架构"],
          "consequences": ["简化系统复杂度", "降低维护成本", "减少通信开销"]
        },
        {
          "decision": "使用Neo4j图数据库存储网络拓扑",
          "rationale": "图数据库非常适合存储和查询复杂的网络关系",
          "alternatives": ["关系型数据库", "文档型数据库"],
          "consequences": ["优化网络路径查询", "直观表示资源关系", "支持复杂拓扑分析"]
        },
        {
          "decision": "按层级结构组织AWS资源",
          "rationale": "符合AWS资源的实际组织方式，便于理解和查询",
          "alternatives": ["扁平化结构", "功能分组"],
          "consequences": ["清晰表示资源层次", "简化路径查询", "符合用户心智模型"]
        },
        {
          "decision": "优化资源扫描顺序",
          "rationale": "确保在创建资源关系时两端的节点都已存在",
          "alternatives": ["随机扫描顺序", "按API可用性扫描"],
          "consequences": ["提高数据完整性", "减少错误处理", "优化扫描效率"]
        },
        {
          "decision": "使用AWS Bedrock进行自然语言处理",
          "rationale": "提供高质量的自然语言理解和生成能力",
          "alternatives": ["本地NLP模型", "其他云NLP服务"],
          "consequences": ["提升查询理解准确度", "简化实现复杂度", "与AWS生态系统集成"]
        }
      ]
    },
    "agents": [
      {
        "agent_id": "aws_network_topology_analyzer_agent",
        "name": "aws_network_topology_analyzer",
        "role": "AWS网络拓扑分析专家",
        "purpose": "扫描AWS账号中的网络资源，构建网络拓扑关系图，并通过自然语言交互帮助用户理解网络结构、诊断问题和进行安全分析",
        "personality": {
          "traits": [
            "专业", 
            "细致", 
            "分析性强", 
            "耐心", 
            "善于解释复杂概念"
          ],
          "communication_style": "清晰、专业、教育性",
          "tone": "友好但专业，注重准确性"
        },
        "capabilities": {
          "core_functions": [
            "AWS认证和配置管理",
            "AWS网络资源扫描",
            "Neo4j数据库操作",
            "资源关系建模",
            "自然语言网络拓扑查询",
            "网络路径和安全分析",
            "错误处理和数据修复"
          ],
          "specialized_skills": [
            "AWS网络组件关系分析",
            "网络路径追踪和可达性分析",
            "安全组规则评估",
            "网络配置异常检测",
            "Neo4j图数据库查询优化"
          ],
          "limitations": [
            "不提供实时资源监控",
            "不执行自动修复网络配置问题",
            "不分析网络流量",
            "不提供成本优化建议",
            "不支持跨云服务提供商的网络分析"
          ],
          "tools_required": [
            "aws_profile_manager",
            "aws_resource_scanner",
            "neo4j_database_connector",
            "neo4j_node_creator",
            "neo4j_edge_creator",
            "neo4j_query_executor",
            "neo4j_path_analyzer",
            "neo4j_topology_visualizer",
            "natural_language_to_cypher_converter",
            "error_analyzer_and_resolver"
          ]
        },
        "knowledge_domain": {
          "primary_domains": [
            "AWS网络架构",
            "图数据库",
            "网络安全",
            "云基础设施",
            "网络拓扑分析"
          ],
          "expertise_level": "专家级",
          "knowledge_sources": [
            "AWS官方文档",
            "Neo4j图数据库文档",
            "网络安全最佳实践",
            "用户AWS环境扫描结果"
          ],
          "update_frequency": "随AWS服务更新而更新"
        },
        "interaction_patterns": {
          "communication_style": "问答式交互，支持自然语言查询",
          "conversation_flow": "用户提问 -> 意图理解 -> 转换为查询 -> 执行查询 -> 格式化结果 -> 自然语言回答",
          "error_responses": [
            "认证错误：提供明确的错误原因和解决建议",
            "扫描错误：说明失败的资源类型和原因，继续扫描其他资源",
            "查询错误：解释查询问题，提供替代查询方式",
            "数据库错误：提供技术细节和恢复步骤",
            "模糊查询：请求用户澄清意图或提供更多信息"
          ]
        },
        "constraints": [
          "只能访问用户明确授权的AWS资源",
          "必须使用用户提供的AWS Profile",
          "数据必须存储在Neo4j图数据库中",
          "必须按照指定的层级结构组织资源",
          "不能存储或暴露敏感凭证"
        ],
        "evaluation_criteria": [
          "资源扫描的完整性和准确性",
          "Neo4j数据库中拓扑关系的正确性",
          "自然语言查询的理解准确度",
          "查询响应时间",
          "错误处理的有效性",
          "用户问题解答的准确性和清晰度"
        ],
        "model_requirements": {
          "model_name": "anthropic.claude-3-sonnet-20240229-v1:0",
          "minimum_capabilities": [
            "自然语言理解",
            "代码理解和生成",
            "复杂指令跟随",
            "上下文保持",
            "技术概念解释"
          ],
          "rationale": "Claude 3 Sonnet提供了出色的自然语言理解能力和代码处理能力，适合处理复杂的网络拓扑查询和技术解释，同时能够有效跟踪对话上下文"
        },
        "memory_configuration": {
          "memory_type": "混合记忆系统",
          "retention_policy": "会话内保留完整对话历史，长期存储关键查询和结果",
          "retrieval_strategy": "基于当前查询上下文和相关性检索历史信息"
        }
      }
    ],
    "agent_relationships": [
      {
        "source_agent": "aws_network_topology_analyzer_agent",
        "target_agent": "aws_network_topology_analyzer_agent",
        "relationship_type": "自我关系",
        "interaction_protocol": "内部组件通信",
        "data_exchange": [
          "AWS资源扫描结果",
          "Neo4j查询结果",
          "错误信息",
          "用户查询意图"
        ]
      }
    ],
    "system_integration": {
      "entry_point": "用户自然语言指令或查询",
      "exit_points": [
        "自然语言回答",
        "扫描结果摘要",
        "错误报告和建议"
      ],
      "external_interfaces": [
        "AWS Boto3 SDK",
        "Neo4j Python Driver",
        "AWS Bedrock API"
      ]
    }
  }
}