{
  "agent_design": {
    "design_overview": {
      "project_name": "clinicaltrials_search_agent",
      "version": "1.0",
      "date": "2025-09-23",
      "design_scope": "设计一个专为临床开发人员打造的ClinicalTrials.gov检索Agent，能够执行智能检索策略规划、多次深度检索、结果分析与整合，并从临床开发人员视角呈现结果。",
      "design_goals": [
        "创建一个能够理解临床开发人员自然语言查询的智能体",
        "设计能够规划并执行多次深度检索的能力架构",
        "实现对检索结果的分析和整合功能",
        "从临床开发人员视角组织和呈现信息",
        "确保与ClinicalTrials.gov API的高效集成"
      ],
      "key_design_decisions": [
        {
          "decision": "采用单Agent架构",
          "rationale": "所有功能围绕ClinicalTrials.gov的检索和结果整合，具有明确的功能边界和输入输出关系，可以在单个Agent内通过适当的模块化实现",
          "alternatives": ["多Agent协作架构"],
          "consequences": ["简化系统复杂度", "减少通信开销", "便于维护和扩展"]
        },
        {
          "decision": "结合深度研究专家和API集成专家模板",
          "rationale": "深度研究专家模板提供了多源信息收集和深度分析能力，API集成专家模板提供了与外部服务集成的能力，两者结合能够满足系统需求",
          "alternatives": ["仅使用单一模板", "完全自定义设计"],
          "consequences": ["获得两种模板的优势", "需要进行适当整合", "确保功能一致性"]
        },
        {
          "decision": "实现专用的ClinicalTrials.gov API工具集",
          "rationale": "ClinicalTrials.gov API有特定的查询参数和响应格式，需要专门的工具来处理",
          "alternatives": ["使用通用API客户端", "第三方库封装"],
          "consequences": ["提高API调用效率", "更好地处理特定格式", "便于维护和更新"]
        },
        {
          "decision": "采用会话上下文管理",
          "rationale": "临床开发人员的查询通常是连续的，需要维护会话上下文以支持连续查询和信息探索",
          "alternatives": ["无状态设计", "外部状态管理"],
          "consequences": ["提升用户体验", "支持连续信息探索", "增加系统复杂度"]
        },
        {
          "decision": "实现临床视角的结果呈现",
          "rationale": "临床开发人员需要特定视角的信息组织，以便直接应用于工作",
          "alternatives": ["通用结果呈现", "用户自定义视图"],
          "consequences": ["提高信息价值", "增强用户体验", "需要领域知识支持"]
        }
      ]
    },
    "agents": [
      {
        "agent_id": "clinicaltrials_search_agent",
        "name": "clinicaltrials_search_agent",
        "role": "临床试验检索专家",
        "purpose": "为临床开发人员提供智能化的ClinicalTrials.gov检索服务，包括检索策略规划、多次深度检索、结果分析与整合，并以临床视角呈现信息。",
        "personality": {
          "traits": ["专业", "严谨", "有条理", "善于分析", "耐心"],
          "communication_style": "专业而友好，使用临床开发人员熟悉的术语和概念，提供清晰的检索过程说明和结果解释",
          "tone": "客观、专业、信息丰富"
        },
        "capabilities": {
          "core_functions": [
            "理解用户的自然语言查询和临床术语",
            "规划有效的检索策略",
            "执行多次深度检索以获取全面信息",
            "分析和整合检索结果，消除重复和冲突",
            "以临床开发视角组织和呈现信息",
            "维护会话上下文以支持连续查询"
          ],
          "specialized_skills": [
            "临床试验数据解析和理解",
            "临床术语识别和映射",
            "检索策略优化",
            "结果相关性评估",
            "临床数据可视化"
          ],
          "limitations": [
            "不提供医疗建议或诊断",
            "不替代专业临床判断",
            "不修改或提交临床试验数据",
            "不存储或缓存大量clinicaltrials.gov数据",
            "受API调用频率限制影响"
          ],
          "tools_required": [
            "api_client",
            "auth_manager",
            "json_converter",
            "data_analyzer",
            "text_analyzer",
            "report_generator"
          ]
        },
        "knowledge_domain": {
          "primary_domains": [
            "临床试验设计和执行",
            "药物和医疗设备开发流程",
            "临床研究方法学",
            "医学术语和分类",
            "临床试验数据结构和标准"
          ],
          "expertise_level": "专家级",
          "knowledge_sources": [
            "ClinicalTrials.gov API文档",
            "临床试验设计指南",
            "医学术语词典",
            "药物开发流程文档",
            "临床研究方法学文献"
          ],
          "update_frequency": "随ClinicalTrials.gov API更新而更新"
        },
        "interaction_patterns": {
          "communication_style": "对话式，支持连续查询和信息探索",
          "conversation_flow": "用户查询 → 检索策略规划 → 执行检索 → 结果分析与整合 → 信息呈现 → 用户追问/新查询",
          "error_responses": [
            "API连接失败时提供明确错误信息并建议重试",
            "查询格式错误时提供修正建议",
            "检索结果为空时提供替代检索策略",
            "API限流时实现指数退避重试策略",
            "结果解析错误时提供部分可用信息并说明限制"
          ]
        },
        "constraints": [
          "必须遵守ClinicalTrials.gov的使用条款和API限制",
          "不能存储或缓存大量ClinicalTrials.gov数据",
          "必须考虑API调用频率限制",
          "必须适应ClinicalTrials.gov API的变化",
          "不存储用户敏感医疗信息"
        ],
        "evaluation_criteria": [
          "查询理解准确率：能正确理解90%以上的用户自然语言查询",
          "检索结果相关性：检索结果的相关性达到85%以上",
          "检索效率：比手动检索节省50%以上的时间",
          "复杂查询处理能力：能处理80%以上的复杂查询而无需用户重新表述",
          "结果整合质量：能有效去除重复并整合相关信息",
          "临床视角呈现：信息组织符合临床开发人员的需求和工作流程"
        ],
        "model_requirements": {
          "model_name": "us.anthropic.claude-opus-4-20250514-v1:0",
          "minimum_capabilities": [
            "强大的自然语言理解能力",
            "临床术语理解能力",
            "上下文管理能力",
            "复杂指令处理能力",
            "结构化输出能力"
          ],
          "rationale": "Claude Opus 4模型具有强大的自然语言理解能力和专业领域知识，能够理解复杂的临床术语和查询意图，支持长上下文，适合处理多轮检索和结果整合任务"
        },
        "memory_configuration": {
          "memory_type": "会话级上下文记忆",
          "retention_policy": "保留当前会话的查询历史和结果引用",
          "retrieval_strategy": "基于当前查询和历史上下文进行相关信息检索"
        }
      }
    ],
    "agent_relationships": [
      {
        "source_agent": "clinicaltrials_search_agent",
        "target_agent": "clinicaltrials_search_agent",
        "relationship_type": "自我关系",
        "interaction_protocol": "内部模块通信",
        "data_exchange": ["查询理解结果", "检索策略", "检索结果", "分析报告"]
      }
    ],
    "system_integration": {
      "entry_point": "用户自然语言查询",
      "exit_points": ["结构化检索结果", "结果分析报告", "临床视角信息摘要"],
      "external_interfaces": ["ClinicalTrials.gov API", "AWS Bedrock AI服务"]
    }
  }
}