{
  "prompt_engineering": {
    "design_overview": {
      "project_name": "stock_information_collector",
      "version": "1.0",
      "date": "2025-11-28",
      "design_scope": "为股票信息收集与评价Agent设计提示词模板，确保Agent能够准确识别用户查询的股票，收集多维度信息，并生成专业的分析报告"
    },
    "prompt_design_decisions": [
      {
        "decision": "基于deep_research_agent模板进行定制",
        "rationale": "该模板提供了完整的研究框架和多源信息收集能力，与股票分析需求高度匹配",
        "alternatives": ["data_analyzer_agent模板", "api_integration_agent模板", "自定义开发"],
        "consequences": ["减少定制开发工作量", "利用现有的研究框架", "确保信息收集的全面性和准确性"]
      },
      {
        "decision": "设计专业的金融分析角色定位",
        "rationale": "专业的角色定位能够确保生成的内容符合金融行业标准，提供准确的股票分析和评价",
        "alternatives": ["通用研究角色", "投资顾问角色"],
        "consequences": ["增强专业性和可信度", "提供更精准的行业分析", "符合用户对金融专家的期望"]
      },
      {
        "decision": "明确定义六大分析维度",
        "rationale": "多维度分析框架确保评价全面且深入，涵盖估值、成长性、财务健康度、行业地位、市场情绪和风险评估",
        "alternatives": ["简化分析维度", "完全自由分析"],
        "consequences": ["结构化的分析框架", "全面的股票评价", "便于用户理解和比较"]
      },
      {
        "decision": "集成专用工具调用流程",
        "rationale": "明确的工具调用流程和数据收集步骤，确保Agent能够高效地获取和分析股票数据",
        "alternatives": ["通用工具组合", "无工具纯LLM分析"],
        "consequences": ["提高数据收集效率", "确保数据准确性", "支持实时市场数据获取"]
      },
      {
        "decision": "添加免责声明要求",
        "rationale": "金融投资建议涉及法律风险，必须明确声明系统提供的是信息收集和参考分析，不构成投资建议",
        "alternatives": ["简化免责声明", "不添加免责声明"],
        "consequences": ["降低法律风险", "提高用户信任", "符合金融行业规范"]
      }
    ],
    "system_prompt_components": {
      "role_definition": {
        "description": "专业的股票信息收集与评价专家",
        "rationale": "明确Agent的专业领域和核心能力，建立专业可信的角色定位",
        "key_elements": ["专业性", "客观性", "全面性", "谨慎性"]
      },
      "core_responsibilities": {
        "description": "定义7项核心职责：股票识别与查询、基本信息收集、实时行情获取、财务数据分析、新闻资讯整合、综合评价生成、投资建议提供",
        "rationale": "明确Agent的工作范围和主要任务，确保功能全面且聚焦",
        "key_elements": ["功能全面", "任务明确", "职责边界清晰"]
      },
      "workflow_definition": {
        "description": "详细定义7步工作流程：输入解析、基本信息收集、并行数据收集、数据验证与清洗、缓存管理、综合评价生成、结果输出",
        "rationale": "为Agent提供清晰的执行路径，确保数据收集和分析的完整性和一致性",
        "key_elements": ["步骤清晰", "流程完整", "执行路径明确"]
      },
      "analysis_framework": {
        "description": "建立6维分析框架：估值分析、成长性分析、财务健康度、行业地位、市场情绪、风险评估",
        "rationale": "提供结构化的分析框架，确保评价全面且有深度",
        "key_elements": ["结构化", "多维度", "全面性", "深度"]
      },
      "output_format": {
        "description": "定义Markdown格式的输出结构，包括基本信息、行情数据、财务指标、新闻摘要、综合评价、投资建议等部分",
        "rationale": "统一输出格式，提高信息的可读性和一致性",
        "key_elements": ["结构清晰", "格式统一", "信息完整"]
      },
      "tool_integration": {
        "description": "明确5个核心工具的使用：stock_query_tool、market_data_tool、financial_data_tool、news_collection_tool、cache_manager_tool",
        "rationale": "指导Agent正确使用工具，确保数据收集的准确性和效率",
        "key_elements": ["工具明确", "用途清晰", "集成路径定义"]
      },
      "special_handling": {
        "description": "定义4种特殊情况的处理：数据源不可用、数据缺失、股票不存在、多市场同名股票",
        "rationale": "提供异常情况的处理指导，确保系统的健壮性和用户体验",
        "key_elements": ["容错性", "健壮性", "用户体验"]
      },
      "guidelines": {
        "description": "提供6项注意事项，强调数据准确性、分析客观性、充分支撑、免责声明、市场特殊性、数据局限性",
        "rationale": "设定质量标准和操作原则，确保输出的专业性和可靠性",
        "key_elements": ["质量标准", "操作原则", "专业要求"]
      },
      "disclaimer": {
        "description": "添加强制性免责声明，明确系统提供的是信息收集和参考分析，不构成投资建议",
        "rationale": "降低法律风险，符合金融行业规范",
        "key_elements": ["法律保护", "风险提示", "责任界定"]
      }
    },
    "user_prompt_template": {
      "structure": "简洁的用户提示模板，包含股票查询输入和6步处理要求",
      "variables": ["user_input - 用户输入的股票名称或代码"],
      "rationale": "简化用户输入，同时提供足够的引导，确保用户知道系统的功能范围"
    },
    "metadata_configuration": {
      "tags": ["finance", "stock_analysis", "investment", "market_data", "financial_analysis", "news_analysis"],
      "supported_models": ["global.anthropic.claude-sonnet-4-5-20250929-v1:0"],
      "tools_dependencies": [
        "strands_tools/current_time",
        "strands_tools/calculator",
        "generated_tools/stock_information_collector/stock_tools/cache_manager_tool",
        "generated_tools/stock_information_collector/stock_tools/financial_data_tool",
        "generated_tools/stock_information_collector/stock_tools/market_data_tool",
        "generated_tools/stock_information_collector/stock_tools/news_collection_tool",
        "generated_tools/stock_information_collector/stock_tools/stock_query_tool"
      ],
      "rationale": "配置适当的元数据，确保系统能够正确识别和使用提示词模板"
    },
    "environment_settings": {
      "development": {
        "max_tokens": 4096,
        "temperature": 0.3,
        "streaming": false,
        "rationale": "开发环境配置适中的参数，便于测试和调试"
      },
      "production": {
        "max_tokens": 60000,
        "temperature": 0.3,
        "streaming": false,
        "rationale": "生产环境配置较高的token限制，确保能够处理复杂的股票分析任务"
      },
      "testing": {
        "max_tokens": 2048,
        "temperature": 0.3,
        "streaming": false,
        "rationale": "测试环境配置较低的token限制，加快测试速度"
      }
    },
    "testing_scenarios": [
      {
        "scenario": "基本股票查询",
        "input": "AAPL",
        "expected_behavior": "识别为苹果公司，返回完整的股票信息和评价报告"
      },
      {
        "scenario": "模糊名称查询",
        "input": "苹果",
        "expected_behavior": "识别为苹果公司，返回完整的股票信息和评价报告"
      },
      {
        "scenario": "A股代码查询",
        "input": "000001",
        "expected_behavior": "识别为平安银行，返回完整的股票信息和评价报告"
      },
      {
        "scenario": "不存在的股票",
        "input": "XYZABC",
        "expected_behavior": "提示股票不存在，并提供可能的相似股票建议"
      },
      {
        "scenario": "多市场同名股票",
        "input": "腾讯",
        "expected_behavior": "识别出可能是港股腾讯控股或美股腾讯音乐，询问用户具体市场"
      },
      {
        "scenario": "数据源不可用",
        "input": "GOOG（模拟某数据源不可用）",
        "expected_behavior": "使用可用数据源或缓存数据，明确标注数据来源和局限性"
      }
    ],
    "prompt_evaluation": {
      "evaluation_criteria": [
        "股票识别准确性：能否准确识别不同市场的股票",
        "数据收集完整性：是否收集了所有需要的数据维度",
        "分析深度：评价是否全面且有深度",
        "输出结构：是否按照定义的格式输出",
        "异常处理：是否能妥善处理各种异常情况",
        "专业性：分析是否符合金融行业标准",
        "客观性：评价是否基于数据而非主观判断",
        "合规性：是否包含必要的免责声明"
      ],
      "expected_improvements": [
        "进一步优化模糊股票名称的匹配能力",
        "增强不同市场股票的估值对比能力",
        "提升新闻资讯的情感分析能力",
        "增加技术指标分析维度",
        "优化数据可视化展示"
      ]
    }
  },
  "implementation_notes": "提示词模板设计完成，基于deep_research_agent模板进行了专业化定制，打造了一个专业的股票信息收集与评价Agent。模板包含完整的角色定义、职责列表、工作流程、分析框架、输出格式、工具集成、异常处理和注意事项，确保Agent能够准确识别股票，收集多维度信息，并生成专业的分析报告。\n\n特别注意了金融行业的专业性和合规性，添加了强制性免责声明，明确系统提供的是信息收集和参考分析，不构成投资建议。设计了6大分析维度和7步工作流程，确保评价全面且深入。\n\n提示词模板已保存为YAML格式，符合Nexus-AI平台的标准规范，包含了所有必要的元数据配置和环境设置。工具依赖已正确配置，包括5个核心工具：stock_query_tool、market_data_tool、financial_data_tool、news_collection_tool和cache_manager_tool。\n\n下一步可以进行Agent代码开发，实现提示词模板中定义的功能和工作流程。"
}