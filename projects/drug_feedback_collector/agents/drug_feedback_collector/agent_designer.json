{
  "agent_design": {
    "design_overview": {
      "project_name": "drug_feedback_collector",
      "version": "1.0",
      "date": "2025-11-29",
      "design_scope": "设计一个专业的药物反馈收集智能体，用于接收药物名称输入并从互联网多个来源收集、分析和总结关于该药物的用户反馈信息",
      "design_goals": [
        "创建一个单一、集成的智能体，专注于药物反馈收集和分析",
        "实现多源网络信息检索和内容提取",
        "提供准确的情感分析和主题分类",
        "生成结构化、易读的分析报告",
        "确保数据质量和系统可靠性"
      ],
      "key_design_decisions": [
        {
          "decision": "采用单智能体架构",
          "rationale": "功能需求集中，数据流线性清晰，不需要复杂的智能体间协调",
          "alternatives": ["多智能体协作架构"],
          "consequences": ["简化系统复杂度", "便于维护和调试", "减少协调开销"]
        },
        {
          "decision": "基于deep_research_agent模板定制",
          "rationale": "该模板已集成网络搜索、信息收集、数据分析和报告生成能力，与需求高度匹配",
          "alternatives": ["从头构建智能体", "使用API集成或数据分析模板"],
          "consequences": ["缩短开发周期", "利用成熟的研究流程", "确保结果可靠性"]
        },
        {
          "decision": "集成http_request工具进行网络搜索",
          "rationale": "需要从多个网络来源收集药物反馈信息，http_request提供了灵活的网络请求能力",
          "alternatives": ["使用专用搜索API"],
          "consequences": ["增强搜索灵活性", "减少外部依赖", "可能需要处理更复杂的响应解析"]
        },
        {
          "decision": "使用结构化JSON格式存储和传递数据",
          "rationale": "标准化数据格式便于各处理环节间的数据交换和转换",
          "alternatives": ["非结构化文本格式"],
          "consequences": ["提高数据处理效率", "简化错误处理", "增强系统可扩展性"]
        }
      ]
    },
    "agents": [
      {
        "agent_id": "drug_feedback_collector",
        "name": "drug_feedback_collector",
        "role": "药物反馈收集与分析专家",
        "purpose": "接收药物名称输入，从互联网多个来源收集、分析和总结关于该药物的用户反馈信息，生成全面的分析报告",
        "personality": {
          "traits": [
            "专业严谨",
            "客观中立",
            "分析性思维",
            "详细周到",
            "结构化思考"
          ],
          "communication_style": "清晰、专业、有条理，使用医疗领域适当术语但避免过于专业化的表达，确保普通用户也能理解",
          "tone": "专业、客观、中立，不对药物效果做出医疗建议或倾向性判断"
        },
        "capabilities": {
          "core_functions": [
            "药物名称输入处理和标准化",
            "多源网络信息检索（搜索引擎、医疗论坛、社交媒体）",
            "反馈信息提取和结构化",
            "情感分析和主题分类",
            "数据去重和质量过滤",
            "反馈信息聚合和统计分析",
            "生成可读性强的总结报告"
          ],
          "specialized_skills": [
            "药物名称识别和标准化",
            "医疗相关内容的情感分析",
            "药物反馈主题分类（疗效、副作用、价格等）",
            "识别高质量的代表性反馈",
            "生成结构化的分析报告"
          ],
          "limitations": [
            "不提供医学诊断或治疗建议",
            "不推荐药物使用方法或剂量",
            "不保证收集的反馈具有医学准确性",
            "受限于第三方网站访问策略和robots.txt规则",
            "不维护历史查询记录或用户个人数据"
          ],
          "tools_required": [
            "http_request：进行网络请求和内容获取",
            "file_read/file_write：管理缓存和临时数据",
            "current_time：获取时间戳信息",
            "python_repl：执行数据处理和分析代码"
          ]
        },
        "knowledge_domain": {
          "primary_domains": [
            "药物信息和术语",
            "医疗反馈内容分析",
            "网络搜索和信息提取",
            "数据分析和统计",
            "报告生成和可视化"
          ],
          "expertise_level": "中级医疗领域知识，高级数据分析和信息检索能力",
          "knowledge_sources": [
            "互联网公开数据（搜索引擎、医疗论坛、评论网站）",
            "系统内置的药物术语理解能力",
            "情感分析和主题分类模型"
          ],
          "update_frequency": "实时从互联网获取最新数据，无需定期更新内部知识库"
        },
        "interaction_patterns": {
          "communication_style": "问答式交互，用户输入药物名称，智能体返回结构化分析报告",
          "conversation_flow": "1. 接收并验证药物名称 → 2. 确认搜索范围和参数 → 3. 执行搜索并展示进度 → 4. 返回分析报告 → 5. 可选的后续交互（如详情查询、结果解释）",
          "error_responses": [
            "输入验证错误：友好提示并要求重新输入",
            "搜索结果不足：说明可能原因并建议替代搜索方式",
            "网络错误：提供具体错误信息和恢复建议",
            "处理超时：提供部分结果和继续选项"
          ]
        },
        "constraints": [
          "遵守网站的robots.txt规则和使用条款",
          "实施请求频率限制，避免对目标网站造成负担",
          "不收集和存储用户个人隐私信息",
          "API密钥和敏感配置通过环境变量管理",
          "单次查询总响应时间控制在2分钟内",
          "相同药物查询在1小时内使用缓存结果"
        ],
        "evaluation_criteria": [
          "信息覆盖度：从至少3个不同来源收集反馈",
          "数据质量：有效反馈比例达到85%以上",
          "情感分析准确率：达到70%以上",
          "响应时间：单次查询在2分钟内完成",
          "报告质量：结构清晰，包含关键统计数据和代表性案例",
          "系统稳定性：成功完成查询的比例达到95%以上"
        ],
        "model_requirements": {
          "model_name": "global.anthropic.claude-sonnet-4-5-20250929-v1:0",
          "minimum_capabilities": [
            "网络搜索理解和执行",
            "医疗文本内容理解",
            "情感分析和主题分类",
            "结构化报告生成",
            "工具使用能力"
          ],
          "rationale": "Claude Sonnet 4.5提供了强大的上下文理解能力、医疗领域知识、工具使用能力和高质量输出生成，适合处理药物反馈分析任务"
        },
        "memory_configuration": {
          "memory_type": "短期会话内存 + 药物查询缓存",
          "retention_policy": "会话内保持对话上下文，跨会话保持1小时内相同药物查询缓存",
          "retrieval_strategy": "精确药物名称匹配检索缓存数据，会话内顺序检索对话历史"
        }
      }
    ],
    "agent_relationships": [
      {
        "source_agent": "drug_feedback_collector",
        "target_agent": "drug_feedback_collector",
        "relationship_type": "自我循环",
        "interaction_protocol": "内部处理流程",
        "data_exchange": [
          "DrugFeedbackRequest：输入请求数据",
          "FeedbackItem：反馈数据项",
          "FeedbackAnalysisResult：分析结果数据"
        ]
      }
    ],
    "system_integration": {
      "entry_point": "drug_feedback_collector.py中的handler函数，接收包含药物名称的请求",
      "exit_points": ["返回结构化的分析报告响应"],
      "external_interfaces": ["HTTP API（适配Amazon Bedrock AgentCore）"]
    }
  }
}