{"tool_development": {"development_overview": {"project_name": "pubmed_literature_editor_assistant","version": "1.0","date": "2025-10-30","development_scope": "开发专业科研期刊主编Agent所需的工具集，包括PMC文献检索、元数据解析、内容提取、文件系统操作和JSON处理工具","design_principles": ["模块化设计，每个工具专注于单一功能","支持research_id参数，用于指定缓存和工作目录","实现完整的错误处理和日志记录","提供JSON格式的结构化输出","缓存机制减少重复API调用"],"key_decisions": ["基于现有PubMed文献搜索工具模板进行定制开发","实现PMC文献检索和内容提取的核心功能","设计统一的文件路径和缓存管理机制","开发专用的JSON处理工具支持编辑反馈生成","实现实时处理状态更新和监控"]},"tools": [{"tool_name": "search_pmc_literature","description": "搜索PMC文献库，获取与查询相关的文献列表","function_signature": "search_pmc_literature(query: str, research_id: str, max_results: int = 50, version: str = \"v1\") -> str","parameters": [{"name": "query","type": "str","description": "搜索查询字符串","required": true},{"name": "research_id","type": "str","description": "研究ID，用于指定缓存和工作目录","required": true},{"name": "max_results","type": "int","description": "最大返回结果数，默认50","required": false},{"name": "version","type": "str","description": "版本号，默认v1","required": false}],"return_type": "str","return_description": "JSON格式的搜索结果，包含文献ID列表和元数据","dependencies": ["NCBI E-utilities API","文件系统访问"],"implementation_notes": ["使用NCBI E-utilities API的ESearch和EFetch功能","实现缓存机制避免重复API调用","支持研究ID和版本参数","提供实时状态更新"],"error_handling": ["API请求失败的重试机制","缓存文件读写异常处理","JSON解析错误处理"],"usage_examples": ["搜索与癌症相关的最新研究: search_pmc_literature(\"cancer therapy\", \"research123\", 20, \"v1\")"]}
,{"tool_name": "extract_pmc_metadata","description": "从PMC ID提取文献元数据","function_signature": "extract_pmc_metadata(pmcid: str, research_id: str, version: str = \"v1\") -> str","parameters": [{"name": "pmcid","type": "str","description": "PMC ID，格式为PMC加数字（例如PMC1234567）","required": true},{"name": "research_id","type": "str","description": "研究ID，用于指定缓存和工作目录","required": true},{"name": "version","type": "str","description": "版本号，默认v1","required": false}],"return_type": "str","return_description": "JSON格式的文献元数据","dependencies": ["NCBI E-utilities API","XML解析"],"implementation_notes": ["使用EFetch API获取XML格式的文献数据","解析XML提取元数据","实现缓存机制"],"error_handling": ["API请求失败处理","XML解析错误处理","无效PMCID处理"],"usage_examples": ["提取特定文献的元数据: extract_pmc_metadata(\"PMC1234567\", \"research123\", \"v1\")"]}
,{"tool_name": "extract_pmc_content","description": "从PMC提取文献内容","function_signature": "extract_pmc_content(pmcid: str, research_id: str, section: str = \"full\", version: str = \"v1\") -> str","parameters": [{"name": "pmcid","type": "str","description": "PMC ID，格式为PMC加数字（例如PMC1234567）","required": true},{"name": "research_id","type": "str","description": "研究ID，用于指定缓存和工作目录","required": true},{"name": "section","type": "str","description": "要提取的部分，可选值：full（全文）、abstract（摘要）、introduction（引言）、methods（方法）、results（结果）、discussion（讨论）、conclusion（结论）","required": false},{"name": "version","type": "str","description": "版本号，默认v1","required": false}],"return_type": "str","return_description": "JSON格式的文献内容","dependencies": ["NCBI E-utilities API","XML解析","正则表达式"],"implementation_notes": ["使用EFetch API获取XML格式的文献全文","根据section参数提取特定部分","使用正则表达式识别文章结构"],"error_handling": ["API请求失败处理","XML解析错误处理","无效section参数处理"],"usage_examples": ["提取文献的方法部分: extract_pmc_content(\"PMC1234567\", \"research123\", \"methods\", \"v1\")"]}
,{"tool_name": "manage_literature_files","description": "管理文献相关文件（创建、读取、写入、删除）","function_signature": "manage_literature_files(action: str, research_id: str, file_path: str = \"\", content: str = \"\", version: str = \"v1\") -> str","parameters": [{"name": "action","type": "str","description": "操作类型，可选值：read（读取）、write（写入）、delete（删除）、list（列出文件）","required": true},{"name": "research_id","type": "str","description": "研究ID，用于指定工作目录","required": true},{"name": "file_path","type": "str","description": "文件路径（相对于工作目录）","required": false},{"name": "content","type": "str","description": "要写入的内容（仅在action为write时使用）","required": false},{"name": "version","type": "str","description": "版本号，默认v1","required": false}],"return_type": "str","return_description": "JSON格式的操作结果","dependencies": ["文件系统访问"],"implementation_notes": ["统一的文件路径管理","支持缓存和验证目录","文件操作错误处理"],"error_handling": ["文件不存在处理","权限错误处理","无效操作类型处理"],"usage_examples": ["列出工作目录中的文件: manage_literature_files(\"list\", \"research123\", \"\", \"\", \"v1\")"]}
,{"tool_name": "generate_editor_feedback","description": "生成编辑反馈JSON文件","function_signature": "generate_editor_feedback(research_id: str, feedback_data: Dict[str, Any], version: str = \"v1\") -> str","parameters": [{"name": "research_id","type": "str","description": "研究ID，用于指定工作目录","required": true},{"name": "feedback_data","type": "Dict[str, Any]","description": "编辑反馈数据","required": true},{"name": "version","type": "str","description": "版本号，默认v1","required": false}],"return_type": "str","return_description": "JSON格式的操作结果，包含生成的文件路径","dependencies": ["JSON处理","文件系统访问"],"implementation_notes": ["添加元数据到反馈数据","生成时间戳作为文件名一部分","更新处理状态"],"error_handling": ["JSON序列化错误处理","文件写入错误处理"],"usage_examples": ["生成编辑反馈: generate_editor_feedback(\"research123\", feedback_data, \"v1\")"]}
,{"tool_name": "create_directory","description": "创建目录","function_signature": "create_directory(research_id: str, directory_path: str, version: str = \"v1\") -> str","parameters": [{"name": "research_id","type": "str","description": "研究ID，用于指定工作目录","required": true},{"name": "directory_path","type": "str","description": "要创建的目录路径（相对于工作目录）","required": true},{"name": "version","type": "str","description": "版本号，默认v1","required": false}],"return_type": "str","return_description": "JSON格式的操作结果","dependencies": ["文件系统访问"],"implementation_notes": ["路径规范化处理","递归创建目录"],"error_handling": ["权限错误处理","路径无效处理"],"usage_examples": ["创建验证目录: create_directory(\"research123\", \"verification/results\", \"v1\")"]}
,{"tool_name": "read_json_file","description": "读取JSON文件","function_signature": "read_json_file(research_id: str, file_path: str) -> str","parameters": [{"name": "research_id","type": "str","description": "研究ID，用于指定工作目录","required": true},{"name": "file_path","type": "str","description": "要读取的JSON文件路径（相对于工作目录）","required": true}],"return_type": "str","return_description": "JSON格式的文件内容","dependencies": ["JSON处理","文件系统访问"],"implementation_notes": ["路径规范化处理","JSON解析"],"error_handling": ["文件不存在处理","JSON解析错误处理"],"usage_examples": ["读取状态文件: read_json_file(\"research123\", \"step6.status\")"]}
,{"tool_name": "write_json_file","description": "写入JSON文件","function_signature": "write_json_file(research_id: str, file_path: str, data: Dict[str, Any]) -> str","parameters": [{"name": "research_id","type": "str","description": "研究ID，用于指定工作目录","required": true},{"name": "file_path","type": "str","description": "要写入的JSON文件路径（相对于工作目录）","required": true},{"name": "data","type": "Dict[str, Any]","description": "要写入的JSON数据","required": true}],"return_type": "str","return_description": "JSON格式的操作结果","dependencies": ["JSON处理","文件系统访问"],"implementation_notes": ["路径规范化处理","JSON序列化","目录自动创建"],"error_handling": ["JSON序列化错误处理","文件写入错误处理"],"usage_examples": ["写入评审结果: write_json_file(\"research123\", \"results/evaluation.json\", evaluation_data)"]}
,{"tool_name": "update_status_file","description": "更新处理状态文件","function_signature": "update_status_file(research_id: str, status: str, progress: int, current_step: str, result_path: str = \"\") -> str","parameters": [{"name": "research_id","type": "str","description": "研究ID","required": true},{"name": "status","type": "str","description": "处理状态（started, in_progress, completed, failed）","required": true},{"name": "progress","type": "int","description": "处理进度（0-100）","required": true},{"name": "current_step","type": "str","description": "当前步骤","required": true},{"name": "result_path","type": "str","description": "结果文件路径（可选）","required": false}],"return_type": "str","return_description": "JSON格式的操作结果","dependencies": ["JSON处理","文件系统访问"],"implementation_notes": ["进度范围验证","添加时间戳"],"error_handling": ["文件写入错误处理"],"usage_examples": ["更新处理状态: update_status_file(\"research123\", \"in_progress\", 50, \"正在分析文献\")"]}
,{"tool_name": "validate_json","description": "验证JSON数据格式是否有效","function_signature": "validate_json(json_data: str) -> str","parameters": [{"name": "json_data","type": "str","description": "要验证的JSON字符串","required": true}],"return_type": "str","return_description": "JSON格式的验证结果","dependencies": ["JSON处理"],"implementation_notes": ["详细的错误位置报告"],"error_handling": ["JSON解析错误处理"],"usage_examples": ["验证JSON数据: validate_json(json_string)"]}
,{"tool_name": "validate_editor_feedback","description": "验证编辑反馈数据是否符合要求","function_signature": "validate_editor_feedback(feedback_data: Dict[str, Any]) -> str","parameters": [{"name": "feedback_data","type": "Dict[str, Any]","description": "编辑反馈数据","required": true}],"return_type": "str","return_description": "JSON格式的验证结果","dependencies": ["JSON处理"],"implementation_notes": ["检查必需字段","验证评分范围","验证决策建议"],"error_handling": ["数据结构错误处理"],"usage_examples": ["验证编辑反馈: validate_editor_feedback(feedback_data)"]}]
,"code_quality": {"code_standards": ["遵循PEP 8编码规范","使用类型注解提高代码可读性和安全性","详细的文档字符串","一致的错误处理模式","模块化设计"],"testing_strategy": ["单元测试验证每个工具的核心功能","边界条件测试","错误处理测试","集成测试验证工具间协作"],"performance_considerations": ["实现缓存机制减少API调用","批量处理大量数据","优化XML解析逻辑","合理的重试和超时策略"],"security_measures": ["输入验证防止注入攻击","安全的文件路径处理","敏感数据保护","API密钥安全管理"]},"integration_details": {"aws_services": [],"external_libraries": ["requests","xml.etree.ElementTree","json","os","datetime","pathlib","logging","hashlib","re","shutil"],"api_endpoints": ["NCBI E-utilities API (ESearch, ESummary, EFetch, ELink)"],"data_formats": ["JSON","XML","文本"]},"development_notes": "工具开发过程中，我们优先参考了现有的PubMed文献搜索工具模板，并针对期刊主编评审场景进行了定制化开发。为了支持研究ID参数和工作目录管理，我们设计了统一的文件路径和缓存管理机制，确保所有工具能够一致地访问和管理文件。考虑到API调用的限制和性能优化，我们实现了完善的缓存机制，避免重复的API调用。为了支持结构化的编辑反馈输出，我们开发了专用的JSON处理工具，包括模板创建、数据验证和格式化输出等功能。所有工具都实现了详细的错误处理和日志记录，确保系统在各种异常情况下都能够优雅降级并提供有用的错误信息。工具之间的接口设计保持一致，使它们能够无缝协作，共同支持期刊主编评审的完整工作流程。"}}