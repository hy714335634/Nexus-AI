{
  "agent_code_development": {
    "development_overview": {
      "project_name": "pubmed_literature_editor_assistant",
      "version": "1.0",
      "date": "2025-10-30",
      "development_scope": "开发专业的科研期刊主编Agent，能根据用户提供完整文献，结合在线检索PMC文献的工具，完成杂志主编对文章的评审工作",
      "design_principles": [
        "专业性：模拟顶级期刊主编的专业视角和标准",
        "全面性：从多个维度评估文献质量",
        "实用性：提供具体可操作的修改建议",
        "结构化：使用JSON格式输出评审结果",
        "可扩展性：支持未来功能扩展"
      ],
      "key_decisions": [
        "基于PubMed文献搜索专家模板进行定制开发",
        "实现文件路径和缓存管理",
        "集成PMC文献检索工具",
        "实现多维度评审标准和评分系统",
        "支持research_id参数管理工作目录"
      ]
    },
    "agent_implementation": {
      "agent_name": "pubmed_literature_editor_assistant",
      "file_path": "agents/generated_agents/pubmed_literature_editor_assistant/pubmed_literature_editor_assistant.py",
      "main_class": "PubMedLiteratureEditorAssistant",
      "entry_point": "review_literature",
      "dependencies": [
        "nexus_utils.agent_factory",
        "strands.telemetry",
        "strands.session.file_session_manager"
      ],
      "imports": [
        "os",
        "json",
        "logging",
        "uuid",
        "datetime",
        "typing"
      ]
    },
    "core_functions": [
      {
        "function_name": "review_literature",
        "purpose": "执行文献评审并返回结果",
        "parameters": [
          {
            "name": "literature_content",
            "type": "str",
            "description": "文献内容",
            "required": true
          },
          {
            "name": "research_id",
            "type": "str",
            "description": "研究ID，用于指定工作目录",
            "required": true
          },
          {
            "name": "version",
            "type": "str",
            "description": "版本号，默认v1",
            "required": false
          }
        ],
        "return_type": "str",
        "return_description": "智能体响应",
        "implementation_notes": [
          "构建评审请求",
          "调用智能体处理评审请求",
          "异常处理"
        ]
      },
      {
        "function_name": "get_review_status",
        "purpose": "获取评审处理状态",
        "parameters": [
          {
            "name": "research_id",
            "type": "str",
            "description": "研究ID",
            "required": true
          }
        ],
        "return_type": "str",
        "return_description": "处理状态信息",
        "implementation_notes": [
          "构建状态查询请求",
          "调用智能体获取状态",
          "异常处理"
        ]
      },
      {
        "function_name": "get_review_result",
        "purpose": "获取评审结果",
        "parameters": [
          {
            "name": "research_id",
            "type": "str",
            "description": "研究ID",
            "required": true
          },
          {
            "name": "version",
            "type": "str",
            "description": "版本号，默认v1",
            "required": false
          },
          {
            "name": "result_file",
            "type": "str",
            "description": "结果文件名，如果不提供则获取最新的结果",
            "required": false
          }
        ],
        "return_type": "str",
        "return_description": "评审结果",
        "implementation_notes": [
          "构建结果查询请求",
          "调用智能体获取结果",
          "异常处理"
        ]
      },
      {
        "function_name": "compare_versions",
        "purpose": "比较两个版本的评审结果",
        "parameters": [
          {
            "name": "research_id",
            "type": "str",
            "description": "研究ID",
            "required": true
          },
          {
            "name": "version1",
            "type": "str",
            "description": "第一个版本号",
            "required": true
          },
          {
            "name": "version2",
            "type": "str",
            "description": "第二个版本号",
            "required": true
          }
        ],
        "return_type": "str",
        "return_description": "比较结果",
        "implementation_notes": [
          "构建版本比较请求",
          "调用智能体比较版本",
          "异常处理"
        ]
      },
      {
        "function_name": "get_pubmed_literature_editor_assistant",
        "purpose": "获取PubMed文献主编评审智能体实例",
        "parameters": [
          {
            "name": "env",
            "type": "str",
            "description": "环境配置 (development, production, testing)",
            "required": false
          },
          {
            "name": "version",
            "type": "str",
            "description": "智能体版本",
            "required": false
          },
          {
            "name": "model_id",
            "type": "str",
            "description": "使用的模型ID",
            "required": false
          }
        ],
        "return_type": "PubMedLiteratureEditorAssistant",
        "return_description": "智能体实例",
        "implementation_notes": [
          "创建并返回智能体实例"
        ]
      },
      {
        "function_name": "create_pubmed_literature_editor_assistant",
        "purpose": "创建PubMed文献主编评审智能体",
        "parameters": [
          {
            "name": "env",
            "type": "str",
            "description": "环境配置 (development, production, testing)",
            "required": false
          },
          {
            "name": "version",
            "type": "str",
            "description": "智能体版本",
            "required": false
          },
          {
            "name": "model_id",
            "type": "str",
            "description": "使用的模型ID",
            "required": false
          }
        ],
        "return_type": "Agent",
        "return_description": "Strands智能体实例",
        "implementation_notes": [
          "设置智能体参数",
          "使用agent_factory创建智能体"
        ]
      }
    ],
    "tool_integration": {
      "custom_tools": [
        "pmc_literature_tools/search_pmc_literature",
        "pmc_literature_tools/extract_pmc_metadata",
        "pmc_literature_tools/extract_pmc_content",
        "pmc_literature_tools/generate_editor_feedback",
        "pmc_literature_tools/get_processing_status",
        "pmc_literature_tools/manage_literature_files",
        "file_system_tools/create_directory",
        "file_system_tools/read_json_file",
        "file_system_tools/write_json_file",
        "file_system_tools/update_status_file",
        "file_system_tools/get_status_file",
        "json_processor/validate_json",
        "json_processor/validate_editor_feedback",
        "json_processor/generate_editor_feedback",
        "json_processor/create_editor_feedback_template"
      ],
      "system_tools": [
        "strands_tools/current_time",
        "strands_tools/file_read",
        "strands_tools/file_write",
        "strands_tools/json_validator"
      ],
      "strands_tools": [
        "StrandsTelemetry",
        "FileSessionManager"
      ],
      "integration_notes": [
        "使用nexus_utils.agent_factory.create_agent_from_prompt_template创建Agent",
        "通过提示词模板集成所有工具",
        "使用FileSessionManager管理会话状态",
        "使用StrandsTelemetry进行遥测"
      ]
    },
    "configuration": {
      "environment_variables": [
        "BYPASS_TOOL_CONSENT",
        "OTEL_EXPORTER_OTLP_ENDPOINT",
        "NCBI_API_KEY (可选)"
      ],
      "model_configuration": {
        "model_name": "Anthropic Claude 3 Opus",
        "max_tokens": 60000,
        "temperature": 0.3,
        "top_p": 0.8
      },
      "streaming_config": {
        "enabled": true,
        "chunk_size": 1024
      }
    },
    "error_handling": {
      "exception_types": [
        "文献格式错误",
        "PMC检索失败",
        "工作目录访问权限问题",
        "处理超时",
        "JSON生成错误"
      ],
      "error_responses": [
        "提供明确错误信息，尽可能继续处理",
        "优雅降级，使用已有信息继续评审",
        "提供明确错误信息，建议解决方案"
      ],
      "recovery_strategies": [
        "记录当前状态，支持恢复处理",
        "确保核心评审内容仍能输出",
        "使用try-except块捕获异常并提供友好错误信息"
      ]
    },
    "testing": {
      "test_cases": [
        "完整文献评审测试",
        "不完整文献处理测试",
        "PMC检索失败测试",
        "获取评审状态测试",
        "获取评审结果测试",
        "版本比较测试"
      ],
      "test_scenarios": [
        "命令行参数测试",
        "文件路径处理测试",
        "异常处理测试",
        "会话管理测试"
      ],
      "validation_criteria": [
        "评审覆盖所有维度",
        "提供具体修改建议",
        "错误处理机制正常工作",
        "提供有用反馈"
      ]
    },
    "deployment": {
      "deployment_requirements": [
        "Python 3.13+",
        "Strands SDK",
        "AWS Bedrock",
        "boto3 SDK",
        "文件系统访问权限"
      ],
      "runtime_dependencies": [
        "nexus_utils",
        "strands",
        "requests",
        "xml.etree.ElementTree"
      ],
      "performance_considerations": [
        "优化PMC检索过程，避免不必要的API调用",
        "对大型文献实施分段处理，避免内存溢出",
        "实现缓存机制，避免重复处理相同内容",
        "优化JSON生成过程，确保大型评审结果的高效处理",
        "合理设置超时和重试机制，确保系统稳定性"
      ]
    },
    "development_notes": "在开发过程中，我们基于PubMed文献搜索专家模板进行了定制化开发，专注于实现期刊主编评审功能。主要工作包括：1）设计智能体类结构，提供文献评审、状态查询、结果获取和版本比较等核心功能；2）实现文件路径和缓存管理，确保评审结果和状态信息能够正确存储和检索；3）集成PMC文献检索工具，用于获取相关参考资料；4）实现多维度评审标准和评分系统，包括研究新颖性、方法学严谨性、结果可靠性等维度；5）支持research_id参数管理工作目录，确保不同研究项目的评审过程和结果能够独立管理。此外，我们还实现了命令行接口，支持多种操作模式，包括文献评审、状态查询、结果获取和版本比较，使智能体能够灵活应对不同的使用场景。"
  }
}