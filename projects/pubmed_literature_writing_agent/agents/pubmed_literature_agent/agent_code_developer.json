{
  "agent_code_development": {
    "development_overview": {
      "project_name": "pubmed_literature_search_agent",
      "version": "1.0",
      "date": "2025-10-20",
      "development_scope": "开发基于PubMed Central的学术文献智能检索、筛选和汇总智能体，通过AWS S3访问PMC开放数据",
      "design_principles": [
        "模块化设计，清晰的职责分离",
        "全面的错误处理和恢复机制",
        "灵活的查询和过滤选项",
        "结构化输出格式",
        "高效的缓存机制优化性能",
        "兼容Python 3.13+和Strands SDK"
      ],
      "key_decisions": [
        "采用基于deep_research_agent模板的单智能体架构",
        "使用AWS S3 no-sign-request方式访问PMC数据",
        "实现多维度相关性排序算法",
        "支持批量文献处理和缓存机制",
        "提供多种操作模式：检索、综述、引用、信息提取"
      ]
    },
    "agent_implementation": {
      "agent_name": "pubmed_literature_agent",
      "file_path": "agents/generated_agents/pubmed_literature_search_agent/pubmed_literature_agent.py",
      "main_class": "PubMedLiteratureAgent",
      "entry_point": "create_pubmed_literature_agent",
      "dependencies": [
        "nexus_utils.agent_factory",
        "strands.telemetry",
        "logging",
        "os",
        "json",
        "datetime",
        "typing"
      ],
      "imports": [
        "from nexus_utils.agent_factory import create_agent_from_prompt_template",
        "from strands.telemetry import StrandsTelemetry"
      ]
    },
    "core_functions": [
      {
        "function_name": "__init__",
        "purpose": "初始化PubMed文献检索和汇总智能体",
        "parameters": [
          {
            "name": "env",
            "type": "str",
            "description": "环境配置 (development, production, testing)",
            "required": false
          },
          {
            "name": "version",
            "type": "str",
            "description": "智能体版本",
            "required": false
          },
          {
            "name": "model_id",
            "type": "str",
            "description": "使用的模型ID",
            "required": false
          }
        ],
        "return_type": "None",
        "return_description": "无返回值",
        "implementation_notes": [
          "设置智能体参数",
          "配置智能体路径",
          "使用create_agent_from_prompt_template创建智能体实例"
        ]
      },
      {
        "function_name": "search_literature",
        "purpose": "执行文献检索并返回结果",
        "parameters": [
          {
            "name": "query",
            "type": "str",
            "description": "用户查询文本",
            "required": true
          }
        ],
        "return_type": "str",
        "return_description": "智能体响应",
        "implementation_notes": [
          "调用智能体处理查询",
          "包含错误处理机制"
        ]
      },
      {
        "function_name": "process_batch_query",
        "purpose": "批量处理多个查询",
        "parameters": [
          {
            "name": "queries",
            "type": "List[str]",
            "description": "查询列表",
            "required": true
          },
          {
            "name": "max_results_per_query",
            "type": "int",
            "description": "每个查询的最大结果数",
            "required": false
          }
        ],
        "return_type": "str",
        "return_description": "批量处理结果",
        "implementation_notes": [
          "构建批量查询输入",
          "调用智能体处理批量查询",
          "包含错误处理机制"
        ]
      },
      {
        "function_name": "generate_literature_review",
        "purpose": "生成文献综述报告",
        "parameters": [
          {
            "name": "topic",
            "type": "str",
            "description": "研究主题",
            "required": true
          },
          {
            "name": "time_range",
            "type": "str",
            "description": "时间范围",
            "required": false
          },
          {
            "name": "journal_filter",
            "type": "str",
            "description": "期刊类型过滤条件",
            "required": false
          },
          {
            "name": "impact_factor_min",
            "type": "float",
            "description": "最小影响因子",
            "required": false
          }
        ],
        "return_type": "str",
        "return_description": "文献综述报告",
        "implementation_notes": [
          "构建文献综述请求",
          "调用智能体生成文献综述",
          "包含错误处理机制"
        ]
      },
      {
        "function_name": "generate_citations",
        "purpose": "生成指定文献的引用信息",
        "parameters": [
          {
            "name": "pmcids",
            "type": "List[str]",
            "description": "PMC ID列表",
            "required": true
          },
          {
            "name": "citation_style",
            "type": "str",
            "description": "引用样式 (APA, MLA, Chicago, Harvard, Vancouver)",
            "required": false
          }
        ],
        "return_type": "str",
        "return_description": "引用信息列表",
        "implementation_notes": [
          "构建引用生成请求",
          "调用智能体生成引用",
          "包含错误处理机制"
        ]
      },
      {
        "function_name": "extract_key_information",
        "purpose": "从指定文献中提取关键信息",
        "parameters": [
          {
            "name": "pmcid",
            "type": "str",
            "description": "PMC ID",
            "required": true
          }
        ],
        "return_type": "str",
        "return_description": "提取的关键信息",
        "implementation_notes": [
          "构建信息提取请求",
          "调用智能体提取信息",
          "包含错误处理机制"
        ]
      },
      {
        "function_name": "get_pubmed_literature_agent",
        "purpose": "获取PubMed文献检索和汇总智能体实例",
        "parameters": [
          {
            "name": "env",
            "type": "str",
            "description": "环境配置 (development, production, testing)",
            "required": false
          },
          {
            "name": "version",
            "type": "str",
            "description": "智能体版本",
            "required": false
          },
          {
            "name": "model_id",
            "type": "str",
            "description": "使用的模型ID",
            "required": false
          }
        ],
        "return_type": "PubMedLiteratureAgent",
        "return_description": "智能体实例",
        "implementation_notes": [
          "创建并返回PubMedLiteratureAgent实例"
        ]
      },
      {
        "function_name": "create_pubmed_literature_agent",
        "purpose": "创建PubMed文献检索和汇总智能体",
        "parameters": [
          {
            "name": "env",
            "type": "str",
            "description": "环境配置 (development, production, testing)",
            "required": false
          },
          {
            "name": "version",
            "type": "str",
            "description": "智能体版本",
            "required": false
          },
          {
            "name": "model_id",
            "type": "str",
            "description": "使用的模型ID",
            "required": false
          }
        ],
        "return_type": "Agent",
        "return_description": "Strands智能体实例",
        "implementation_notes": [
          "设置智能体参数",
          "使用agent_factory创建智能体"
        ]
      }
    ],
    "tool_integration": {
      "custom_tools": [
        "pmc_s3_connector.pmc_s3_connect",
        "pmc_s3_connector.pmc_get_filelist_csv",
        "pmc_s3_connector.pmc_download_file",
        "pmc_s3_connector.pmc_search_files",
        "pmc_s3_connector.pmc_get_metadata_by_pmcid",
        "pmc_s3_connector.pmc_cache_status",
        "pmc_metadata_parser.parse_pmc_xml",
        "pmc_metadata_parser.parse_pmc_txt",
        "pmc_metadata_parser.extract_pmc_metadata_from_file",
        "pmc_metadata_parser.extract_pmc_sections",
        "pmc_metadata_parser.extract_pmc_keywords",
        "pmc_metadata_parser.extract_pmc_citations",
        "literature_searcher.search_literature",
        "literature_searcher.advanced_search",
        "literature_searcher.search_by_topic",
        "literature_searcher.search_by_pmcid",
        "literature_searcher.batch_search",
        "literature_filter.filter_by_time_range",
        "literature_filter.filter_by_journal_type",
        "literature_filter.filter_by_impact_factor",
        "literature_filter.filter_by_retraction_status",
        "literature_filter.combined_filter",
        "relevance_ranker.calculate_relevance_score",
        "relevance_ranker.rank_literature_by_relevance",
        "relevance_ranker.get_top_ranked_literature",
        "relevance_ranker.rank_by_custom_criteria",
        "relevance_ranker.cluster_by_topic",
        "citation_generator.generate_citation_apa",
        "citation_generator.generate_citation_mla",
        "citation_generator.generate_citation_chicago",
        "citation_generator.generate_citation_harvard",
        "citation_generator.generate_citation_vancouver",
        "citation_generator.generate_all_citations",
        "citation_generator.batch_generate_citations",
        "report_generator.generate_structured_report",
        "report_generator.generate_literature_review",
        "report_generator.generate_executive_summary",
        "report_generator.generate_topic_summary",
        "report_generator.generate_comparison_table"
      ],
      "system_tools": [
        "strands_tools/use_aws",
        "strands_tools/current_time",
        "strands_tools/calculator",
        "strands_tools/file_read",
        "strands_tools/file_write"
      ],
      "strands_tools": [
        "StrandsTelemetry"
      ],
      "integration_notes": [
        "所有工具都通过prompt模板的tools_dependencies配置集成",
        "AWS S3工具使用no-sign-request方式访问PMC数据",
        "文件读写工具用于缓存管理和报告生成",
        "计算器工具用于相关性评分计算",
        "时间工具用于时间范围筛选"
      ]
    },
    "configuration": {
      "environment_variables": [
        "BYPASS_TOOL_CONSENT",
        "OTEL_EXPORTER_OTLP_ENDPOINT"
      ],
      "model_configuration": {
        "model_name": "us.anthropic.claude-3-7-sonnet-20250219-v1:0",
        "max_tokens": 60000,
        "temperature": 0.3,
        "top_p": 0.8
      },
      "streaming_config": {
        "enabled": true,
        "chunk_size": 1024
      }
    },
    "error_handling": {
      "exception_types": [
        "一般异常 (Exception)",
        "网络错误",
        "解析错误",
        "权限错误"
      ],
      "error_responses": [
        "提供明确的错误信息",
        "建议搜索优化",
        "筛选条件调整建议",
        "标注信息缺失"
      ],
      "recovery_strategies": [
        "批处理错误时继续处理其余文章",
        "缓存机制减少S3访问失败影响",
        "使用本地缓存在网络中断时提供部分功能",
        "提供详细错误日志便于故障排查"
      ]
    },
    "testing": {
      "test_cases": [
        "基本文献检索功能",
        "批量查询处理",
        "文献综述生成",
        "引用信息生成",
        "关键信息提取"
      ],
      "test_scenarios": [
        "不同类型的查询语句",
        "各种筛选条件组合",
        "大量文献的批量处理",
        "不同引用格式的生成",
        "网络连接中断情况"
      ],
      "validation_criteria": [
        "检索结果相关性",
        "筛选条件应用准确性",
        "报告结构完整性",
        "引用格式准确性",
        "错误处理有效性"
      ]
    },
    "deployment": {
      "deployment_requirements": [
        "Python 3.13+",
        "Strands SDK",
        "boto3 SDK",
        "互联网连接（访问AWS S3）",
        "足够的内存处理大型文献集"
      ],
      "runtime_dependencies": [
        "nexus_utils",
        "strands",
        "boto3",
        "json",
        "logging",
        "typing"
      ],
      "performance_considerations": [
        "使用本地缓存减少重复S3访问",
        "批量处理大量文献时的内存管理",
        "并行处理提高检索效率",
        "结果分页处理大型结果集",
        "延迟加载文章内容"
      ]
    },
    "development_notes": "PubMed文献检索和汇总智能体的开发采用了基于deep_research_agent模板的单智能体架构，这一决策基于功能的内聚性和线性工作流。智能体实现了多种操作模式（检索、综述、引用、信息提取），并通过AWS S3 no-sign-request方式访问PMC开放数据。为了提高性能，实现了本地缓存机制减少重复S3访问，并使用多维度相关性排序算法提高检索结果质量。错误处理机制确保了在网络不稳定或数据不完整的情况下仍能提供部分功能。代码结构遵循模块化设计原则，清晰分离了不同功能模块，便于维护和扩展。命令行界面支持多种操作模式，方便用户进行不同类型的文献检索和分析任务。"
  }
}