{
  "system_design": {
    "design_overview": {
      "project_name": "fitness_advisor",
      "version": "1.0",
      "date": "2025-10-08",
      "design_scope": "智能健身建议生成系统的完整架构设计，包括单Agent架构、数据模型、交互流程和技术实现方案",
      "design_principles": [
        "单一职责原则 - Agent专注于健身建议生成",
        "用户安全优先 - 所有建议必须考虑安全性",
        "个性化定制 - 基于用户信息提供定制化建议",
        "科学性保证 - 建议基于运动科学理论",
        "简洁易用 - 交互界面简单直观"
      ],
      "key_decisions": [
        "采用单Agent架构，简化系统复杂度",
        "集成多个专业工具支持健身建议生成",
        "使用结构化数据模型确保信息完整性",
        "实现分层安全检查机制",
        "支持渐进式信息收集和建议优化"
      ],
      "workflow_type": "single_agent",
      "recommended_templates": [
        "business_logic_agent_template",
        "consultation_agent_template",
        "personalized_recommendation_agent_template"
      ]
    },
    "architecture": {
      "system_context": "智能健身建议生成系统作为独立的AI Agent，接收用户的个人信息和健身需求，通过内置的专业知识库和算法逻辑，生成个性化的健身计划、营养建议和安全指导。系统不依赖外部健身数据源，完全基于用户输入和内置专业知识进行推理。",
      "agent_topology": "单Agent拓扑结构：用户 ↔ fitness_advisor_agent ↔ 内置工具集（用户信息管理、健身计划生成、营养建议、安全检查、问答支持）",
      "interaction_model": "请求-响应模型：用户通过自然语言与Agent交互，Agent调用相应工具处理请求，返回结构化的建议和指导。支持多轮对话和渐进式信息收集。",
      "technology_stack": {
        "sdk": "Strands SDK",
        "runtime": "Local",
        "integrations": [
          "AWS Bedrock AI推理引擎",
          "本地数据存储",
          "Python运动科学计算库"
        ]
      }
    },
    "agents": [
      {
        "name": "fitness_advisor_agent",
        "purpose": "为用户提供个性化、科学、安全的健身建议和指导",
        "responsibilities": [
          "收集和管理用户基本信息（年龄、性别、身高、体重、健身经验等）",
          "分析用户健身目标并评估可行性",
          "生成个性化运动计划，包括具体动作、强度、频率安排",
          "提供配套的营养建议和饮食指导",
          "计算适合的运动强度和训练频率",
          "建议进度跟踪方法和评估标准",
          "提供运动安全注意事项和风险预防",
          "回答用户的健身相关问题"
        ],
        "interfaces": {
          "inputs": [
            "用户基本信息（年龄、性别、身高、体重、健身经验）",
            "健身目标（减重、增肌、塑形、提高体能等）",
            "时间安排和设备限制",
            "健康状况和运动限制",
            "饮食偏好和限制",
            "具体健身问题和咨询"
          ],
          "outputs": [
            "个性化运动计划（详细训练方案）",
            "营养建议（食物推荐和摄入量）",
            "训练强度和频率建议",
            "进度跟踪方法和评估标准",
            "安全注意事项和预防措施",
            "专业问题解答和指导建议"
          ]
        },
        "dependencies": [
          "用户信息管理工具",
          "健身计划生成工具",
          "营养建议工具",
          "安全检查工具",
          "BMI和基础代谢率计算工具"
        ],
        "implementation_notes": [
          "使用结构化提示词确保建议的专业性和一致性",
          "集成运动科学知识库，包含各种运动的标准参数",
          "实现多层安全检查，确保建议不会造成健康风险",
          "支持渐进式信息收集，允许用户分步提供信息",
          "建立清晰的边界，明确不提供医疗诊断和治疗建议"
        ],
        "recommended_template": "business_logic_agent_template"
      }
    ],
    "data_models": [
      {
        "name": "UserProfile",
        "schema": "{\n  \"basic_info\": {\n    \"age\": \"integer\",\n    \"gender\": \"string\",\n    \"height\": \"float (cm)\",\n    \"weight\": \"float (kg)\",\n    \"bmi\": \"float (calculated)\"\n  },\n  \"fitness_info\": {\n    \"experience_level\": \"string (beginner/intermediate/advanced)\",\n    \"current_activity\": \"string\",\n    \"available_time\": \"string\",\n    \"equipment_access\": \"array of strings\"\n  },\n  \"health_info\": {\n    \"health_conditions\": \"array of strings\",\n    \"injuries_history\": \"array of strings\",\n    \"medications\": \"array of strings\",\n    \"limitations\": \"array of strings\"\n  },\n  \"preferences\": {\n    \"workout_types\": \"array of strings\",\n    \"dietary_preferences\": \"array of strings\",\n    \"dietary_restrictions\": \"array of strings\"\n  }\n}",
        "validation_rules": [
          "年龄必须在13-100岁之间",
          "身高必须在100-250cm之间",
          "体重必须在30-300kg之间",
          "BMI自动计算并验证合理性",
          "健康状况信息必须完整填写"
        ],
        "relationships": [
          "与FitnessGoal模型关联",
          "与WorkoutPlan模型关联",
          "与NutritionPlan模型关联"
        ]
      },
      {
        "name": "FitnessGoal",
        "schema": "{\n  \"primary_goal\": \"string (weight_loss/muscle_gain/body_shaping/endurance/strength)\",\n  \"secondary_goals\": \"array of strings\",\n  \"target_timeline\": \"string\",\n  \"specific_targets\": {\n    \"weight_target\": \"float (optional)\",\n    \"body_fat_target\": \"float (optional)\",\n    \"performance_targets\": \"object (optional)\"\n  },\n  \"motivation_level\": \"string (low/medium/high)\",\n  \"commitment_level\": \"string (casual/regular/intensive)\"\n}",
        "validation_rules": [
          "必须至少有一个主要目标",
          "目标时间线必须现实可行",
          "具体目标数值必须在健康范围内"
        ],
        "relationships": [
          "依赖UserProfile模型",
          "影响WorkoutPlan和NutritionPlan生成"
        ]
      },
      {
        "name": "WorkoutPlan",
        "schema": "{\n  \"plan_overview\": {\n    \"duration\": \"string\",\n    \"frequency\": \"string\",\n    \"intensity_level\": \"string\"\n  },\n  \"weekly_schedule\": {\n    \"monday\": \"workout_session\",\n    \"tuesday\": \"workout_session\",\n    \"wednesday\": \"workout_session\",\n    \"thursday\": \"workout_session\",\n    \"friday\": \"workout_session\",\n    \"saturday\": \"workout_session\",\n    \"sunday\": \"workout_session\"\n  },\n  \"workout_session\": {\n    \"type\": \"string\",\n    \"duration\": \"integer (minutes)\",\n    \"exercises\": \"array of exercise objects\",\n    \"warm_up\": \"array of exercises\",\n    \"cool_down\": \"array of exercises\"\n  },\n  \"exercise\": {\n    \"name\": \"string\",\n    \"sets\": \"integer\",\n    \"reps\": \"string\",\n    \"weight\": \"string (optional)\",\n    \"rest_time\": \"string\",\n    \"instructions\": \"string\",\n    \"safety_notes\": \"string\"\n  }\n}",
        "validation_rules": [
          "每周至少安排3天休息",
          "运动强度必须适合用户水平",
          "必须包含热身和放松环节",
          "安全注意事项必须完整"
        ],
        "relationships": [
          "基于UserProfile和FitnessGoal生成",
          "与SafetyGuidelines模型关联"
        ]
      },
      {
        "name": "NutritionPlan",
        "schema": "{\n  \"daily_calories\": \"integer\",\n  \"macros_distribution\": {\n    \"protein\": \"float (grams)\",\n    \"carbohydrates\": \"float (grams)\",\n    \"fats\": \"float (grams)\"\n  },\n  \"meal_suggestions\": {\n    \"breakfast\": \"array of meal options\",\n    \"lunch\": \"array of meal options\",\n    \"dinner\": \"array of meal options\",\n    \"snacks\": \"array of snack options\"\n  },\n  \"hydration_guide\": \"string\",\n  \"supplements_suggestions\": \"array of strings (optional)\",\n  \"timing_recommendations\": \"object\"\n}",
        "validation_rules": [
          "每日卡路里必须在合理范围内",
          "宏营养素分配必须科学合理",
          "必须考虑用户饮食限制和偏好",
          "补剂建议必须保守和安全"
        ],
        "relationships": [
          "基于UserProfile和FitnessGoal生成",
          "与WorkoutPlan协调配合"
        ]
      }
    ],
    "interaction_flows": [
      {
        "name": "初次用户信息收集流程",
        "description": "新用户首次使用系统时的信息收集和建议生成流程",
        "steps": [
          {
            "step": "欢迎和介绍",
            "agent": "fitness_advisor_agent",
            "action": "向用户介绍系统功能和信息收集目的",
            "data": "系统介绍文本"
          },
          {
            "step": "基本信息收集",
            "agent": "fitness_advisor_agent",
            "action": "收集用户年龄、性别、身高、体重等基本信息",
            "data": "UserProfile.basic_info"
          },
          {
            "step": "健身经验评估",
            "agent": "fitness_advisor_agent",
            "action": "了解用户健身经验、当前活动水平和可用时间",
            "data": "UserProfile.fitness_info"
          },
          {
            "step": "健康状况确认",
            "agent": "fitness_advisor_agent",
            "action": "询问健康状况、伤病史和运动限制",
            "data": "UserProfile.health_info"
          },
          {
            "step": "目标设定",
            "agent": "fitness_advisor_agent",
            "action": "帮助用户明确健身目标和期望时间线",
            "data": "FitnessGoal"
          },
          {
            "step": "偏好收集",
            "agent": "fitness_advisor_agent",
            "action": "了解用户运动偏好和饮食限制",
            "data": "UserProfile.preferences"
          },
          {
            "step": "安全评估",
            "agent": "fitness_advisor_agent",
            "action": "基于收集信息进行安全风险评估",
            "data": "安全评估结果"
          },
          {
            "step": "计划生成",
            "agent": "fitness_advisor_agent",
            "action": "生成个性化运动计划和营养建议",
            "data": "WorkoutPlan + NutritionPlan"
          }
        ]
      },
      {
        "name": "健身咨询问答流程",
        "description": "用户提出健身相关问题的处理流程",
        "steps": [
          {
            "step": "问题接收",
            "agent": "fitness_advisor_agent",
            "action": "接收并理解用户问题",
            "data": "用户问题文本"
          },
          {
            "step": "问题分类",
            "agent": "fitness_advisor_agent",
            "action": "判断问题类型（运动技术、营养、安全、计划调整等）",
            "data": "问题分类结果"
          },
          {
            "step": "个人信息关联",
            "agent": "fitness_advisor_agent",
            "action": "结合用户个人信息提供针对性回答",
            "data": "UserProfile + FitnessGoal"
          },
          {
            "step": "专业解答",
            "agent": "fitness_advisor_agent",
            "action": "基于专业知识提供准确回答",
            "data": "专业解答内容"
          },
          {
            "step": "安全提醒",
            "agent": "fitness_advisor_agent",
            "action": "如涉及安全问题，提供相应安全提醒",
            "data": "安全注意事项"
          },
          {
            "step": "后续建议",
            "agent": "fitness_advisor_agent",
            "action": "提供相关的后续建议或计划调整建议",
            "data": "后续建议内容"
          }
        ]
      },
      {
        "name": "计划调整优化流程",
        "description": "根据用户反馈调整健身计划的流程",
        "steps": [
          {
            "step": "反馈收集",
            "agent": "fitness_advisor_agent",
            "action": "收集用户对当前计划的反馈和困难",
            "data": "用户反馈信息"
          },
          {
            "step": "进度评估",
            "agent": "fitness_advisor_agent",
            "action": "评估用户当前健身进度和目标达成情况",
            "data": "进度评估结果"
          },
          {
            "step": "问题分析",
            "agent": "fitness_advisor_agent",
            "action": "分析计划执行中的问题和改进空间",
            "data": "问题分析报告"
          },
          {
            "step": "计划调整",
            "agent": "fitness_advisor_agent",
            "action": "根据反馈调整运动计划或营养建议",
            "data": "调整后的WorkoutPlan/NutritionPlan"
          },
          {
            "step": "调整说明",
            "agent": "fitness_advisor_agent",
            "action": "向用户解释调整原因和预期效果",
            "data": "调整说明文档"
          }
        ]
      }
    ],
    "security_considerations": [
      "用户健康信息严格保密，不存储敏感医疗数据",
      "所有健身建议必须经过安全检查，避免高风险运动推荐",
      "明确系统边界，不提供医疗诊断和治疗建议",
      "对特殊健康状况用户提供额外安全提醒",
      "建立紧急情况处理机制，建议用户咨询专业人士"
    ],
    "error_handling": [
      "输入数据验证失败时，提供清晰的错误提示和修正建议",
      "健康风险检测时，立即停止建议生成并提供安全警告",
      "系统无法理解用户需求时，请求澄清或提供选项",
      "计划生成失败时，提供基础通用建议并建议人工咨询",
      "数据不完整时，引导用户补充必要信息"
    ],
    "performance_considerations": [
      "优化提示词长度，确保响应时间在3秒内",
      "使用缓存机制存储常用的运动和营养数据",
      "实现增量信息收集，避免一次性收集过多信息",
      "优化计划生成算法，提高生成效率和准确性"
    ],
    "monitoring_strategy": [
      "监控用户满意度和建议采纳率",
      "跟踪系统响应时间和错误率",
      "记录用户常见问题和系统改进需求",
      "监控安全相关的警告和处理情况",
      "定期评估建议的科学性和有效性"
    ]
  },
  "design_rationale": "本系统设计采用单Agent架构，主要基于以下考虑：1）需求分析显示这是一个专业领域的咨询型应用，单一Agent能够更好地保持专业性和一致性；2）健身建议生成需要综合考虑多个因素，单Agent架构便于统一处理和优化；3）用户交互相对简单，主要是信息收集和建议提供，不需要复杂的多Agent协作；4）安全性要求高，单Agent架构便于实施统一的安全检查和风险控制。系统设计重点关注用户安全、建议的科学性和个性化程度，通过结构化的数据模型和清晰的交互流程，确保系统能够提供专业、安全、有效的健身指导服务。技术实现上采用Strands SDK和AWS Bedrock，确保系统的可靠性和扩展性。"
}