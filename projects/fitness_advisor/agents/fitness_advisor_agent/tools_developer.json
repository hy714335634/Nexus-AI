{
  "tools_development": {
    "metadata": {
      "project_name": "fitness_advisor",
      "agent_name": "fitness_advisor_agent",
      "version": "1.0",
      "date": "2025-10-08",
      "author": "Tools Developer"
    },
    "tools": [
      {
        "name": "text_analyzer",
        "description": "分析用户输入文本，提取健身相关信息，如目标、偏好和限制条件",
        "implementation_details": {
          "file_path": "tools/text_analyzer.py",
          "class_name": "TextAnalyzer",
          "methods": [
            {
              "name": "extract_fitness_goals",
              "description": "从用户输入中提取健身目标",
              "parameters": [
                {
                  "name": "text",
                  "type": "str",
                  "description": "用户输入文本"
                }
              ],
              "returns": {
                "type": "list",
                "description": "提取的健身目标列表"
              },
              "implementation": "使用关键词匹配和NLP技术识别常见健身目标，如减脂、增肌、提高耐力等"
            },
            {
              "name": "extract_preferences",
              "description": "从用户输入中提取健身偏好",
              "parameters": [
                {
                  "name": "text",
                  "type": "str",
                  "description": "用户输入文本"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "用户偏好字典，包括喜欢的运动类型、时间偏好等"
              },
              "implementation": "使用模式匹配和语义分析识别用户表达的偏好"
            },
            {
              "name": "extract_limitations",
              "description": "从用户输入中提取身体限制或条件",
              "parameters": [
                {
                  "name": "text",
                  "type": "str",
                  "description": "用户输入文本"
                }
              ],
              "returns": {
                "type": "list",
                "description": "用户限制条件列表"
              },
              "implementation": "识别与身体状况、伤病或设备限制相关的关键词"
            },
            {
              "name": "analyze_sentiment",
              "description": "分析用户对健身的态度和情绪",
              "parameters": [
                {
                  "name": "text",
                  "type": "str",
                  "description": "用户输入文本"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "情绪分析结果，包括积极性、信心等指标"
              },
              "implementation": "使用情感分析技术评估用户对健身的态度"
            },
            {
              "name": "detect_safety_concerns",
              "description": "检测用户输入中的安全隐患",
              "parameters": [
                {
                  "name": "text",
                  "type": "str",
                  "description": "用户输入文本"
                }
              ],
              "returns": {
                "type": "list",
                "description": "检测到的安全隐患列表"
              },
              "implementation": "识别与过度训练、不安全行为或健康风险相关的关键词"
            }
          ],
          "dependencies": ["nltk", "spacy", "regex"]
        },
        "usage_examples": [
          {
            "scenario": "用户初始评估",
            "code_example": "analyzer = TextAnalyzer()\nuser_input = \"我想减掉腹部脂肪，每周能锻炼3次，每次1小时，但我有轻微的膝盖问题\"\ngoals = analyzer.extract_fitness_goals(user_input)\npreferences = analyzer.extract_preferences(user_input)\nlimitations = analyzer.extract_limitations(user_input)\nprint(f\"Goals: {goals}\\nPreferences: {preferences}\\nLimitations: {limitations}\")",
            "expected_output": "Goals: ['减脂', '塑形']\nPreferences: {'frequency': '3次/周', 'duration': '1小时/次'}\nLimitations: ['膝盖问题']"
          }
        ],
        "testing_strategy": "使用预定义的测试用例集合，包括各种健身目标、偏好和限制条件的表达方式，验证提取准确性"
      },
      {
        "name": "data_analyzer",
        "description": "分析用户健身数据，跟踪进度，识别趋势",
        "implementation_details": {
          "file_path": "tools/data_analyzer.py",
          "class_name": "DataAnalyzer",
          "methods": [
            {
              "name": "analyze_progress",
              "description": "分析用户健身进度",
              "parameters": [
                {
                  "name": "user_data",
                  "type": "dict",
                  "description": "用户健身数据，包括历史记录"
                },
                {
                  "name": "metrics",
                  "type": "list",
                  "description": "要分析的指标列表",
                  "default": "None"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "进度分析结果，包括改进、停滞和趋势"
              },
              "implementation": "计算关键指标的变化率，识别进步和停滞区间"
            },
            {
              "name": "identify_trends",
              "description": "识别用户健身数据中的趋势",
              "parameters": [
                {
                  "name": "user_data",
                  "type": "dict",
                  "description": "用户健身数据，包括历史记录"
                },
                {
                  "name": "timeframe",
                  "type": "str",
                  "description": "分析时间范围",
                  "default": "\"4weeks\""
                }
              ],
              "returns": {
                "type": "dict",
                "description": "识别的趋势，包括上升、下降和平稳趋势"
              },
              "implementation": "使用移动平均和线性回归分析数据趋势"
            },
            {
              "name": "compare_to_goals",
              "description": "将当前进度与设定目标比较",
              "parameters": [
                {
                  "name": "user_data",
                  "type": "dict",
                  "description": "用户健身数据"
                },
                {
                  "name": "goals",
                  "type": "dict",
                  "description": "用户设定的健身目标"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "目标完成情况分析，包括完成百分比和预计达成时间"
              },
              "implementation": "计算当前状态与目标之间的差距，并基于历史进度预测达成时间"
            },
            {
              "name": "detect_plateaus",
              "description": "检测进度停滞期",
              "parameters": [
                {
                  "name": "user_data",
                  "type": "dict",
                  "description": "用户健身数据"
                },
                {
                  "name": "metric",
                  "type": "str",
                  "description": "要分析的指标"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "停滞期分析，包括持续时间和可能原因"
              },
              "implementation": "识别数据变化率接近零的区间，分析可能的停滞原因"
            },
            {
              "name": "recommend_adjustments",
              "description": "基于数据分析推荐计划调整",
              "parameters": [
                {
                  "name": "analysis_results",
                  "type": "dict",
                  "description": "进度分析结果"
                },
                {
                  "name": "current_plan",
                  "type": "dict",
                  "description": "当前健身计划"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "推荐的计划调整，包括强度、频率等变化"
              },
              "implementation": "基于进度、停滞期和趋势分析生成智能调整建议"
            }
          ],
          "dependencies": ["pandas", "numpy", "scipy", "matplotlib"]
        },
        "usage_examples": [
          {
            "scenario": "分析用户减重进度",
            "code_example": "analyzer = DataAnalyzer()\nuser_data = {\n    'weight_history': [80, 79.5, 79, 78.8, 78.5, 78.5, 78.4, 78.5],\n    'dates': ['2025-09-01', '2025-09-08', '2025-09-15', '2025-09-22', '2025-09-29', '2025-10-06', '2025-10-13', '2025-10-20'],\n    'workout_consistency': [3, 3, 4, 3, 2, 2, 3, 3]\n}\ngoals = {'target_weight': 75, 'deadline': '2025-12-31'}\nprogress = analyzer.analyze_progress(user_data)\ntrends = analyzer.identify_trends(user_data)\ngoal_comparison = analyzer.compare_to_goals(user_data, goals)\nplateaus = analyzer.detect_plateaus(user_data, 'weight_history')\nprint(f\"Progress: {progress}\\nTrends: {trends}\\nGoal Comparison: {goal_comparison}\\nPlateaus: {plateaus}\")",
            "expected_output": "Progress: {'weight_change': -1.5, 'rate': -0.19kg/week, 'consistency': '72%'}\nTrends: {'weight': 'decreasing but slowing', 'consistency': 'stable'}\nGoal Comparison: {'current_progress': '30%', 'estimated_completion': '2026-02-15'}\nPlateaus: {'detected': True, 'duration': '3 weeks', 'possible_causes': ['caloric intake increased', 'workout intensity decreased']}"
          }
        ],
        "testing_strategy": "使用模拟的进度数据集，验证趋势识别、停滞期检测和调整建议的准确性"
      },
      {
        "name": "json_converter",
        "description": "处理和格式化健身计划、营养方案等数据",
        "implementation_details": {
          "file_path": "tools/json_converter.py",
          "class_name": "JsonConverter",
          "methods": [
            {
              "name": "workout_plan_to_json",
              "description": "将健身计划转换为JSON格式",
              "parameters": [
                {
                  "name": "workout_plan",
                  "type": "dict",
                  "description": "健身计划数据"
                },
                {
                  "name": "include_details",
                  "type": "bool",
                  "description": "是否包含详细说明",
                  "default": "True"
                }
              ],
              "returns": {
                "type": "str",
                "description": "JSON格式的健身计划"
              },
              "implementation": "将健身计划对象转换为结构化JSON，可选包含详细说明"
            },
            {
              "name": "nutrition_plan_to_json",
              "description": "将营养计划转换为JSON格式",
              "parameters": [
                {
                  "name": "nutrition_plan",
                  "type": "dict",
                  "description": "营养计划数据"
                },
                {
                  "name": "include_recipes",
                  "type": "bool",
                  "description": "是否包含食谱",
                  "default": "False"
                }
              ],
              "returns": {
                "type": "str",
                "description": "JSON格式的营养计划"
              },
              "implementation": "将营养计划对象转换为结构化JSON，可选包含食谱"
            },
            {
              "name": "progress_report_to_json",
              "description": "将进度报告转换为JSON格式",
              "parameters": [
                {
                  "name": "progress_data",
                  "type": "dict",
                  "description": "进度数据"
                },
                {
                  "name": "include_charts",
                  "type": "bool",
                  "description": "是否包含图表数据",
                  "default": "True"
                }
              ],
              "returns": {
                "type": "str",
                "description": "JSON格式的进度报告"
              },
              "implementation": "将进度数据转换为结构化JSON，可选包含图表数据"
            },
            {
              "name": "json_to_workout_plan",
              "description": "将JSON转换为健身计划对象",
              "parameters": [
                {
                  "name": "json_data",
                  "type": "str",
                  "description": "JSON格式的健身计划"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "健身计划对象"
              },
              "implementation": "解析JSON并创建健身计划对象"
            },
            {
              "name": "json_to_nutrition_plan",
              "description": "将JSON转换为营养计划对象",
              "parameters": [
                {
                  "name": "json_data",
                  "type": "str",
                  "description": "JSON格式的营养计划"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "营养计划对象"
              },
              "implementation": "解析JSON并创建营养计划对象"
            },
            {
              "name": "validate_plan_format",
              "description": "验证计划格式是否符合要求",
              "parameters": [
                {
                  "name": "plan_data",
                  "type": "dict",
                  "description": "计划数据"
                },
                {
                  "name": "plan_type",
                  "type": "str",
                  "description": "计划类型",
                  "default": "\"workout\""
                }
              ],
              "returns": {
                "type": "tuple",
                "description": "(是否有效, 错误信息)"
              },
              "implementation": "根据计划类型验证数据结构和必要字段"
            }
          ],
          "dependencies": ["json", "jsonschema"]
        },
        "usage_examples": [
          {
            "scenario": "将健身计划转换为JSON",
            "code_example": "converter = JsonConverter()\nworkout_plan = {\n    'user_id': '12345',\n    'goal': '增肌',\n    'duration_weeks': 8,\n    'weekly_schedule': [\n        {\n            'day': '周一',\n            'focus': '胸部和三头肌',\n            'exercises': [\n                {'name': '卧推', 'sets': 4, 'reps': '8-10', 'rest': 90},\n                {'name': '俯身哑铃飞鸟', 'sets': 3, 'reps': '12-15', 'rest': 60}\n            ]\n        }\n    ]\n}\njson_plan = converter.workout_plan_to_json(workout_plan)\nprint(json_plan)",
            "expected_output": "{\"user_id\": \"12345\", \"goal\": \"增肌\", \"duration_weeks\": 8, \"weekly_schedule\": [{\"day\": \"周一\", \"focus\": \"胸部和三头肌\", \"exercises\": [{\"name\": \"卧推\", \"sets\": 4, \"reps\": \"8-10\", \"rest\": 90}, {\"name\": \"俯身哑铃飞鸟\", \"sets\": 3, \"reps\": \"12-15\", \"rest\": 60}]}]}"
          }
        ],
        "testing_strategy": "使用各种健身计划、营养计划和进度报告数据结构测试转换功能，验证格式正确性和数据完整性"
      },
      {
        "name": "web_search_enhanced",
        "description": "增强型网络搜索工具，用于查询最新健身知识和研究",
        "implementation_details": {
          "file_path": "tools/web_search_enhanced.py",
          "class_name": "WebSearchEnhanced",
          "methods": [
            {
              "name": "search_fitness_knowledge",
              "description": "搜索健身相关知识",
              "parameters": [
                {
                  "name": "query",
                  "type": "str",
                  "description": "搜索查询"
                },
                {
                  "name": "result_count",
                  "type": "int",
                  "description": "返回结果数量",
                  "default": "5"
                },
                {
                  "name": "include_sources",
                  "type": "bool",
                  "description": "是否包含来源信息",
                  "default": "True"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "搜索结果，包括摘要和来源"
              },
              "implementation": "使用搜索API查询健身相关信息，过滤结果确保可靠性"
            },
            {
              "name": "search_exercise_techniques",
              "description": "搜索特定运动的技术指导",
              "parameters": [
                {
                  "name": "exercise_name",
                  "type": "str",
                  "description": "运动名称"
                },
                {
                  "name": "detail_level",
                  "type": "str",
                  "description": "详细程度",
                  "default": "\"medium\""
                }
              ],
              "returns": {
                "type": "dict",
                "description": "运动技术指导，包括步骤、图片链接和视频链接"
              },
              "implementation": "搜索特定运动的详细指导，整合多个可靠来源的信息"
            },
            {
              "name": "search_nutrition_information",
              "description": "搜索营养相关信息",
              "parameters": [
                {
                  "name": "food_item",
                  "type": "str",
                  "description": "食物名称"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "食物营养信息，包括宏量营养素和微量营养素"
              },
              "implementation": "查询食物营养数据库，返回全面的营养成分信息"
            },
            {
              "name": "search_scientific_research",
              "description": "搜索健身相关的科学研究",
              "parameters": [
                {
                  "name": "topic",
                  "type": "str",
                  "description": "研究主题"
                },
                {
                  "name": "recent_only",
                  "type": "bool",
                  "description": "是否只返回近期研究",
                  "default": "True"
                }
              ],
              "returns": {
                "type": "list",
                "description": "相关研究摘要列表"
              },
              "implementation": "搜索学术数据库，过滤并整合相关研究结果"
            },
            {
              "name": "verify_information",
              "description": "验证健身信息的可靠性",
              "parameters": [
                {
                  "name": "statement",
                  "type": "str",
                  "description": "待验证的健身说法"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "验证结果，包括可信度评分和支持/反对证据"
              },
              "implementation": "搜索并分析多个可靠来源，评估信息的科学依据"
            }
          ],
          "dependencies": ["requests", "beautifulsoup4", "scholarly"]
        },
        "usage_examples": [
          {
            "scenario": "查询特定运动技术",
            "code_example": "search_tool = WebSearchEnhanced()\nresults = search_tool.search_exercise_techniques('深蹲', detail_level='high')\nprint(f\"技术指导: {results['technique']}\\n安全提示: {results['safety_tips']}\\n常见错误: {results['common_mistakes']}\")",
            "expected_output": "技术指导: 1. 站立时双脚与肩同宽...\n安全提示: 1. 保持脊柱中立位...\n常见错误: 1. 膝盖内扣..."
          }
        ],
        "testing_strategy": "使用预定义的查询集合测试搜索功能，验证结果的相关性、准确性和可靠性"
      },
      {
        "name": "information_collector",
        "description": "信息收集工具，用于收集用户健身相关信息",
        "implementation_details": {
          "file_path": "tools/information_collector.py",
          "class_name": "InformationCollector",
          "methods": [
            {
              "name": "create_user_profile",
              "description": "创建用户健身档案",
              "parameters": [
                {
                  "name": "user_info",
                  "type": "dict",
                  "description": "用户基本信息"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "完整的用户健身档案"
              },
              "implementation": "整合用户信息，创建结构化的健身档案"
            },
            {
              "name": "collect_fitness_assessment",
              "description": "收集健身水平评估信息",
              "parameters": [
                {
                  "name": "assessment_data",
                  "type": "dict",
                  "description": "评估数据"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "结构化的健身水平评估结果"
              },
              "implementation": "处理评估数据，生成健身水平分析"
            },
            {
              "name": "collect_goal_information",
              "description": "收集用户健身目标信息",
              "parameters": [
                {
                  "name": "goal_data",
                  "type": "dict",
                  "description": "目标数据"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "结构化的健身目标"
              },
              "implementation": "处理目标数据，设定可量化的健身目标"
            },
            {
              "name": "collect_progress_update",
              "description": "收集进度更新信息",
              "parameters": [
                {
                  "name": "progress_data",
                  "type": "dict",
                  "description": "进度数据"
                },
                {
                  "name": "user_id",
                  "type": "str",
                  "description": "用户ID"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "处理后的进度更新"
              },
              "implementation": "处理进度数据，更新用户健身记录"
            },
            {
              "name": "generate_information_request",
              "description": "生成信息请求提示",
              "parameters": [
                {
                  "name": "missing_info",
                  "type": "list",
                  "description": "缺失的信息列表"
                },
                {
                  "name": "context",
                  "type": "str",
                  "description": "请求上下文",
                  "default": "\"profile\""
                }
              ],
              "returns": {
                "type": "str",
                "description": "信息请求提示"
              },
              "implementation": "根据缺失信息生成友好的信息请求提示"
            },
            {
              "name": "validate_user_input",
              "description": "验证用户输入的有效性",
              "parameters": [
                {
                  "name": "input_data",
                  "type": "dict",
                  "description": "用户输入数据"
                },
                {
                  "name": "validation_rules",
                  "type": "dict",
                  "description": "验证规则"
                }
              ],
              "returns": {
                "type": "tuple",
                "description": "(是否有效, 错误信息)"
              },
              "implementation": "根据规则验证用户输入，确保数据有效性"
            }
          ],
          "dependencies": ["pydantic"]
        },
        "usage_examples": [
          {
            "scenario": "创建用户健身档案",
            "code_example": "collector = InformationCollector()\nuser_info = {\n    'name': '张三',\n    'age': 28,\n    'gender': '男',\n    'height': 175,\n    'weight': 80,\n    'fitness_level': '中级',\n    'fitness_experience': '3年',\n    'goals': ['增肌', '提高力量'],\n    'limitations': ['右肩轻微受伤']\n}\nprofile = collector.create_user_profile(user_info)\nprint(f\"用户档案: {profile}\")",
            "expected_output": "用户档案: {'user_id': 'user_12345', 'name': '张三', 'age': 28, 'gender': '男', 'height': 175, 'weight': 80, 'bmi': 26.1, 'fitness_level': '中级', 'fitness_experience': '3年', 'goals': ['增肌', '提高力量'], 'limitations': ['右肩轻微受伤'], 'recommended_focus': ['控制训练强度', '避免过度肩部负荷'], 'created_at': '2025-10-08T12:00:00'}"
          }
        ],
        "testing_strategy": "使用各种用户信息场景测试收集和验证功能，确保数据完整性和有效性"
      },
      {
        "name": "calculator",
        "description": "健身计算工具，用于计算BMI、基础代谢率、营养需求等",
        "implementation_details": {
          "file_path": "tools/calculator.py",
          "class_name": "FitnessCalculator",
          "methods": [
            {
              "name": "calculate_bmi",
              "description": "计算体质指数(BMI)",
              "parameters": [
                {
                  "name": "weight",
                  "type": "float",
                  "description": "体重(kg)"
                },
                {
                  "name": "height",
                  "type": "float",
                  "description": "身高(cm)"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "BMI计算结果，包括数值和分类"
              },
              "implementation": "使用BMI公式计算，并根据结果分类"
            },
            {
              "name": "calculate_bmr",
              "description": "计算基础代谢率(BMR)",
              "parameters": [
                {
                  "name": "weight",
                  "type": "float",
                  "description": "体重(kg)"
                },
                {
                  "name": "height",
                  "type": "float",
                  "description": "身高(cm)"
                },
                {
                  "name": "age",
                  "type": "int",
                  "description": "年龄"
                },
                {
                  "name": "gender",
                  "type": "str",
                  "description": "性别",
                  "default": "\"male\""
                }
              ],
              "returns": {
                "type": "float",
                "description": "基础代谢率(kcal/天)"
              },
              "implementation": "使用Mifflin-St Jeor公式计算BMR"
            },
            {
              "name": "calculate_tdee",
              "description": "计算每日总能量消耗(TDEE)",
              "parameters": [
                {
                  "name": "bmr",
                  "type": "float",
                  "description": "基础代谢率"
                },
                {
                  "name": "activity_level",
                  "type": "str",
                  "description": "活动水平",
                  "default": "\"moderate\""
                }
              ],
              "returns": {
                "type": "float",
                "description": "每日总能量消耗(kcal/天)"
              },
              "implementation": "根据活动水平系数计算TDEE"
            },
            {
              "name": "calculate_macros",
              "description": "计算宏量营养素需求",
              "parameters": [
                {
                  "name": "tdee",
                  "type": "float",
                  "description": "每日总能量消耗"
                },
                {
                  "name": "goal",
                  "type": "str",
                  "description": "健身目标",
                  "default": "\"maintain\""
                },
                {
                  "name": "weight",
                  "type": "float",
                  "description": "体重(kg)"
                }
              ],
              "returns": {
                "type": "dict",
                "description": "宏量营养素计算结果，包括蛋白质、碳水化合物和脂肪"
              },
              "implementation": "根据健身目标和体重计算宏量营养素分配"
            },
            {
              "name": "calculate_1rm",
              "description": "计算一次性最大重量(1RM)",
              "parameters": [
                {
                  "name": "weight",
                  "type": "float",
                  "description": "举起的重量"
                },
                {
                  "name": "reps",
                  "type": "int",
                  "description": "完成的重复次数"
                }
              ],
              "returns": {
                "type": "float",
                "description": "估计的1RM"
              },
              "implementation": "使用Brzycki公式计算1RM"
            },
            {
              "name": "calculate_training_zones",
              "description": "计算训练区间",
              "parameters": [
                {
                  "name": "max_value",
                  "type": "float",
                  "description": "最大值(1RM或最大心率)"
                },
                {
                  "name": "zone_type",
                  "type": "str",
                  "description": "区间类型",
                  "default": "\"strength\""
                }
              ],
              "returns": {
                "type": "dict",
                "description": "不同训练区间的范围"
              },
              "implementation": "根据区间类型计算不同训练强度区间"
            },
            {
              "name": "calculate_calorie_deficit",
              "description": "计算减脂热量赤字",
              "parameters": [
                {
                  "name": "tdee",
                  "type": "float",
                  "description": "每日总能量消耗"
                },
                {
                  "name": "rate",
                  "type": "str",
                  "description": "减脂速率",
                  "default": "\"moderate\""
                }
              ],
              "returns": {
                "type": "dict",
                "description": "热量赤字计算结果，包括目标摄入量和预期减脂速度"
              },
              "implementation": "根据减脂速率计算安全有效的热量赤字"
            },
            {
              "name": "calculate_calorie_surplus",
              "description": "计算增肌热量盈余",
              "parameters": [
                {
                  "name": "tdee",
                  "type": "float",
                  "description": "每日总能量消耗"
                },
                {
                  "name": "rate",
                  "type": "str",
                  "description": "增肌速率",
                  "default": "\"moderate\""
                }
              ],
              "returns": {
                "type": "dict",
                "description": "热量盈余计算结果，包括目标摄入量和预期增肌速度"
              },
              "implementation": "根据增肌速率计算适当的热量盈余"
            }
          ],
          "dependencies": ["numpy", "scipy"]
        },
        "usage_examples": [
          {
            "scenario": "计算用户的BMI和基础代谢率",
            "code_example": "calc = FitnessCalculator()\nbmi_result = calc.calculate_bmi(75, 178)\nbmr = calc.calculate_bmr(75, 178, 30, 'male')\ntdee = calc.calculate_tdee(bmr, 'moderate')\nprint(f\"BMI: {bmi_result['value']} ({bmi_result['category']})\\nBMR: {bmr} kcal/天\\nTDEE: {tdee} kcal/天\")",
            "expected_output": "BMI: 23.7 (正常)\nBMR: 1755 kcal/天\nTDEE: 2720 kcal/天"
          },
          {
            "scenario": "计算减脂的营养需求",
            "code_example": "calc = FitnessCalculator()\ntdee = 2500\ndeficit = calc.calculate_calorie_deficit(tdee, 'moderate')\nmacros = calc.calculate_macros(deficit['target_calories'], 'fat_loss', 75)\nprint(f\"目标热量: {deficit['target_calories']} kcal/天\\n预期减脂速度: {deficit['expected_rate']} kg/周\\n蛋白质: {macros['protein']}g\\n碳水: {macros['carbs']}g\\n脂肪: {macros['fat']}g\")",
            "expected_output": "目标热量: 2000 kcal/天\n预期减脂速度: 0.5 kg/周\n蛋白质: 150g\n碳水: 175g\n脂肪: 56g"
          }
        ],
        "testing_strategy": "使用已知输入和预期输出的测试用例验证各种计算功能的准确性"
      }
    ],
    "tool_registry": {
      "file_path": "tools/tool_registry.py",
      "description": "工具注册和管理模块",
      "implementation": "创建一个工具注册表，用于管理和访问所有工具",
      "code_snippet": "class ToolRegistry:\n    def __init__(self):\n        self.tools = {}\n    \n    def register_tool(self, tool_name, tool_instance):\n        \"\"\"注册工具\"\"\"\n        self.tools[tool_name] = tool_instance\n        return True\n    \n    def get_tool(self, tool_name):\n        \"\"\"获取工具实例\"\"\"\n        return self.tools.get(tool_name)\n    \n    def list_tools(self):\n        \"\"\"列出所有可用工具\"\"\"\n        return list(self.tools.keys())\n    \n    def get_tool_info(self, tool_name):\n        \"\"\"获取工具信息\"\"\"\n        tool = self.get_tool(tool_name)\n        if not tool:\n            return None\n        return {\n            'name': tool_name,\n            'description': getattr(tool, '__doc__', '无描述'),\n            'methods': [method for method in dir(tool) if callable(getattr(tool, method)) and not method.startswith('_')]\n        }"
    },
    "fitness_database": {
      "file_path": "tools/fitness_database.py",
      "description": "健身数据库模块，包含运动动作和营养数据",
      "implementation": "创建一个健身数据库，存储常见运动动作和食物营养信息",
      "code_snippet": "class FitnessDatabase:\n    def __init__(self):\n        self.exercises = self._load_exercises()\n        self.nutrition = self._load_nutrition()\n    \n    def _load_exercises(self):\n        \"\"\"加载运动动作数据\"\"\"\n        # 实际实现中应从文件或数据库加载\n        return {\n            'squat': {\n                'name': '深蹲',\n                'muscle_groups': ['大腿', '臀部', '核心'],\n                'difficulty': 'intermediate',\n                'instructions': '站立时双脚与肩同宽，下蹲时保持背部挺直...',\n                'safety_tips': ['保持膝盖与脚尖方向一致', '不要让膝盖超过脚尖'],\n                'variations': ['杠铃深蹲', '哑铃深蹲', '徒手深蹲']\n            },\n            # 更多运动动作...\n        }\n    \n    def _load_nutrition(self):\n        \"\"\"加载营养数据\"\"\"\n        # 实际实现中应从文件或数据库加载\n        return {\n            'chicken_breast': {\n                'name': '鸡胸肉',\n                'category': '蛋白质',\n                'nutrition_per_100g': {\n                    'calories': 165,\n                    'protein': 31,\n                    'carbs': 0,\n                    'fat': 3.6\n                }\n            },\n            # 更多食物...\n        }\n    \n    def get_exercise(self, name):\n        \"\"\"获取运动动作信息\"\"\"\n        return self.exercises.get(name)\n    \n    def get_food(self, name):\n        \"\"\"获取食物营养信息\"\"\"\n        return self.nutrition.get(name)\n    \n    def search_exercises(self, muscle_group=None, difficulty=None, equipment=None):\n        \"\"\"搜索运动动作\"\"\"\n        results = []\n        for ex_id, ex in self.exercises.items():\n            if muscle_group and muscle_group not in ex['muscle_groups']:\n                continue\n            if difficulty and difficulty != ex['difficulty']:\n                continue\n            if equipment and not any(equipment in var for var in ex['variations']):\n                continue\n            results.append(ex)\n        return results\n    \n    def search_foods(self, category=None, min_protein=None, max_calories=None):\n        \"\"\"搜索食物\"\"\"\n        results = []\n        for food_id, food in self.nutrition.items():\n            if category and category != food['category']:\n                continue\n            if min_protein and food['nutrition_per_100g']['protein'] < min_protein:\n                continue\n            if max_calories and food['nutrition_per_100g']['calories'] > max_calories:\n                continue\n            results.append(food)\n        return results"
    },
    "testing": {
      "file_path": "tests/test_tools.py",
      "description": "工具测试模块",
      "implementation": "为每个工具创建单元测试，验证功能正确性",
      "code_snippet": "import unittest\nfrom tools.text_analyzer import TextAnalyzer\nfrom tools.data_analyzer import DataAnalyzer\nfrom tools.calculator import FitnessCalculator\n\nclass TestTextAnalyzer(unittest.TestCase):\n    def setUp(self):\n        self.analyzer = TextAnalyzer()\n    \n    def test_extract_fitness_goals(self):\n        text = \"我想减掉腹部脂肪，增加肌肉，提高耐力\"\n        goals = self.analyzer.extract_fitness_goals(text)\n        self.assertIn('减脂', goals)\n        self.assertIn('增肌', goals)\n        self.assertIn('提高耐力', goals)\n\n# 更多测试...\n\nclass TestFitnessCalculator(unittest.TestCase):\n    def setUp(self):\n        self.calc = FitnessCalculator()\n    \n    def test_calculate_bmi(self):\n        result = self.calc.calculate_bmi(70, 175)\n        self.assertAlmostEqual(result['value'], 22.9, places=1)\n        self.assertEqual(result['category'], '正常')\n\n# 更多测试...\n\nif __name__ == '__main__':\n    unittest.main()"
    }
  }
}